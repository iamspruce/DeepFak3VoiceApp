(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5573:function(e,s,t){Promise.resolve().then(t.bind(t,6783))},6783:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return e0}});var a=t(7437),r=t(2265),l=t(7053),n=t(535),i=t(1994),c=t(3335);function d(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,c.m6)((0,i.W)(s))}let o=e=>new Promise((s,t)=>{let a=new FileReader;a.onload=()=>{s(a.result.split(",")[1])},a.onerror=e=>{t(Error("Failed to convert file to base64: ".concat(e)))},a.readAsDataURL(e)}),m=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function x(e){let{className:s,variant:t,size:r,asChild:n=!1,...i}=e,c=n?l.g7:"button";return(0,a.jsx)(c,{"data-slot":"button",className:d(m({variant:t,size:r,className:s})),...i})}function u(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:d("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function h(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:d("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function p(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:d("leading-none font-semibold",s),...t})}function g(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:d("text-muted-foreground text-sm",s),...t})}function j(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:d("px-6",s),...t})}let v=(0,n.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function f(e){let{className:s,variant:t,asChild:r=!1,...n}=e,i=r?l.g7:"span";return(0,a.jsx)(i,{"data-slot":"badge",className:d(v({variant:t}),s),...n})}function N(e){let{className:s,type:t,...r}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:d("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...r})}var b=t(6394);function w(e){let{className:s,...t}=e;return(0,a.jsx)(b.f,{"data-slot":"label",className:d("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...t})}var y=t(2650),z=t(2489);function k(e){let{...s}=e;return(0,a.jsx)(y.fC,{"data-slot":"dialog",...s})}function S(e){let{...s}=e;return(0,a.jsx)(y.xz,{"data-slot":"dialog-trigger",...s})}function _(e){let{...s}=e;return(0,a.jsx)(y.h_,{"data-slot":"dialog-portal",...s})}function C(e){let{className:s,...t}=e;return(0,a.jsx)(y.aV,{"data-slot":"dialog-overlay",className:d("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...t})}function U(e){let{className:s,children:t,showCloseButton:r=!0,...l}=e;return(0,a.jsxs)(_,{"data-slot":"dialog-portal",children:[(0,a.jsx)(C,{}),(0,a.jsxs)(y.VY,{"data-slot":"dialog-content",className:d("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...l,children:[t,r&&(0,a.jsxs)(y.x8,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(z.Z,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function T(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:d("flex flex-col gap-2 text-center sm:text-left",s),...t})}function Z(e){let{className:s,...t}=e;return(0,a.jsx)(y.Dx,{"data-slot":"dialog-title",className:d("text-lg leading-none font-semibold",s),...t})}var M=t(5881),P=t(9397),R=t(8662),A=t(1101),F=t(7689),I=t(4501);function L(e){let{className:s}=e,{addVoice:t}=(0,M.m)(),[l,n]=(0,r.useState)(!1),[i,c]=(0,r.useState)(!1),[o,m]=(0,r.useState)(""),[h,p]=(0,r.useState)(null),[g,j]=(0,r.useState)([]),[v,b]=(0,r.useState)(!1),[y,_]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(0,I.Vt)().then(e=>_(e)).catch(()=>_(!1))},[y]);let C=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?c(!0):"dragleave"===e.type&&c(!1)},[]),L=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),c(!1);let s=Array.from(e.dataTransfer.files).filter(e=>"audio/mp3"===e.type||"audio/wav"===e.type||"audio/mpeg"===e.type);!(s.length>0)||h||(p(s[0]),o||m(s[0].name.replace(/\.[^/.]+$/,"")))},[h,o]),E=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(y)try{let t=await window.pywebview.api.select_audio_file();if(t&&t.success&&t.file_data){let a=atob(t.file_data),r=Array(a.length);for(let e=0;e<a.length;e++)r[e]=a.charCodeAt(e);let l=new Uint8Array(r),n=new File([l],t.filename,{type:t.mime_type});e&&s>=0?V(s,n):(p(n),o||m(t.filename.replace(/\.[^/.]+$/,"")))}}catch(e){console.error("Error selecting file:",e)}},V=(e,s)=>{j(t=>t.map((t,a)=>a===e?{...t,file:s}:t))},D=e=>{j(s=>s.filter((s,t)=>t!==e))},G=(e,s)=>{j(t=>t.map((t,a)=>a===e?{...t,name:s}:t))},H=async()=>{if(o.trim()&&h){b(!0);try{let e=URL.createObjectURL(h),s=g.filter(e=>e.name.trim()&&e.file).map((e,s)=>({id:"".concat(Date.now(),"-").concat(s),name:e.name.trim(),audioFile:e.file,audioUrl:e.file?URL.createObjectURL(e.file):null}));t({name:o.trim(),mainAudio:h,mainAudioUrl:e,emotions:s}),m(""),p(null),j([]),n(!1)}catch(e){console.error("Error uploading voice:",e)}finally{b(!1)}}},O=()=>{m(""),p(null),j([]),c(!1)};return(0,a.jsxs)(k,{open:l,onOpenChange:e=>{n(e),e||O()},children:[(0,a.jsx)(S,{asChild:!0,children:(0,a.jsxs)(x,{className:d("gap-2",s),children:[(0,a.jsx)(P.Z,{className:"h-4 w-4"}),"Upload Voice"]})}),(0,a.jsxs)(U,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(T,{children:(0,a.jsxs)(Z,{className:"flex items-center gap-2",children:[(0,a.jsx)(R.Z,{className:"h-5 w-5"}),"Upload New Voice"]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(w,{htmlFor:"voice-name",children:"Voice Name"}),(0,a.jsx)(N,{id:"voice-name",value:o,onChange:e=>m(e.target.value),placeholder:"Enter a name for this voice"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(w,{children:"Main Audio (Neutral)"}),(0,a.jsx)("div",{className:d("border-2 border-dashed rounded-lg p-6 text-center transition-colors",i?"border-primary bg-primary/5":"border-border",h?"border-green-500 bg-green-50 dark:bg-green-950/20":""),onDragEnter:C,onDragLeave:C,onDragOver:C,onDrop:L,children:h?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,a.jsx)(A.Z,{className:"h-8 w-8 text-green-600"}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"font-medium text-green-700 dark:text-green-400",children:h.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(h.size/1024/1024).toFixed(2)," MB"]})]}),(0,a.jsx)(x,{size:"sm",variant:"ghost",onClick:()=>p(null),className:"text-muted-foreground hover:text-destructive",children:(0,a.jsx)(z.Z,{className:"h-4 w-4"})})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)(F.Z,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Drop your audio file here"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Supports MP3 and WAV files"}),y?(0,a.jsx)(x,{variant:"outline",size:"sm",className:"mt-2 bg-transparent",onClick:()=>E(),children:"Browse Files"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"file",accept:".mp3,.wav,audio/mp3,audio/wav,audio/mpeg",onChange:e=>{let s=e.target.files;s&&s[0]&&!h&&(p(s[0]),o||m(s[0].name.replace(/\.[^/.]+$/,"")))},className:"hidden",id:"main-audio-upload"}),(0,a.jsx)(w,{htmlFor:"main-audio-upload",className:"cursor-pointer",children:(0,a.jsx)(x,{variant:"outline",size:"sm",className:"mt-2 bg-transparent",asChild:!0,children:(0,a.jsx)("span",{children:"Browse Files"})})})]})]})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(w,{children:"Emotion Variations (Optional)"}),(0,a.jsxs)(f,{variant:"secondary",className:"text-xs",children:[g.length,"/5"]})]}),g.map((e,s)=>(0,a.jsxs)(u,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)(N,{placeholder:"Emotion name (e.g., Happy, Sad, Angry)",value:e.name,onChange:e=>G(s,e.target.value),className:"flex-1"}),(0,a.jsx)(x,{size:"sm",variant:"ghost",onClick:()=>D(s),className:"text-muted-foreground hover:text-destructive",children:(0,a.jsx)(z.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"border border-dashed border-border rounded p-3 text-center",children:e.file?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(A.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{className:"text-sm text-green-700 dark:text-green-400",children:e.file.name}),(0,a.jsx)(x,{size:"sm",variant:"ghost",onClick:()=>V(s,null),className:"h-6 w-6 p-0",children:(0,a.jsx)(z.Z,{className:"h-3 w-3"})})]}):(0,a.jsx)("div",{children:y?(0,a.jsx)(x,{variant:"outline",size:"sm",onClick:()=>E(!0,s),children:(0,a.jsx)("span",{className:"text-xs",children:"Upload Audio"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"file",accept:".mp3,.wav,audio/mp3,audio/wav,audio/mpeg",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&V(s,a)},className:"hidden",id:"emotion-upload-".concat(s)}),(0,a.jsx)(w,{htmlFor:"emotion-upload-".concat(s),className:"cursor-pointer",children:(0,a.jsx)(x,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsx)("span",{className:"text-xs",children:"Upload Audio"})})})]})})})]},s)),g.length<5&&(0,a.jsxs)(x,{variant:"outline",onClick:()=>{g.length<5&&j(e=>[...e,{name:"",file:null}])},className:"w-full gap-2 bg-transparent",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4"}),"Add Emotion Variation"]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(x,{onClick:()=>n(!1),variant:"outline",className:"flex-1",children:"Cancel"}),(0,a.jsx)(x,{onClick:H,disabled:!o.trim()||!h||v,className:"flex-1",children:v?"Uploading...":"Create Voice"})]})]})]})]})}var E=t(610);function V(e){let{className:s,value:t,...r}=e;return(0,a.jsx)(E.fC,{"data-slot":"progress",className:d("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...r,children:(0,a.jsx)(E.z$,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})}let D=(0,n.j)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function G(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:d(D({variant:t}),s),...r})}function H(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"alert-description",className:d("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...t})}let O=()=>(0,a.jsxs)("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("rect",{x:"2",y:"3",width:"20",height:"3",rx:"1"}),(0,a.jsx)("rect",{x:"2",y:"7",width:"20",height:"3",rx:"1"}),(0,a.jsx)("rect",{x:"2",y:"11",width:"20",height:"3",rx:"1"}),(0,a.jsx)("path",{d:"M6 3v12"})]}),B=()=>(0,a.jsxs)("svg",{className:"h-4 w-4 text-green-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("path",{d:"m9 12 2 2 4-4"}),(0,a.jsx)("circle",{cx:"12",cy:"12",r:"9"})]}),W=()=>(0,a.jsxs)("svg",{className:"h-4 w-4 text-red-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("line",{x1:"2",x2:"22",y1:"2",y2:"22"}),(0,a.jsx)("path",{d:"M8.5 16.5a5 5 0 0 1 7 0"}),(0,a.jsx)("path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65"}),(0,a.jsx)("path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76"}),(0,a.jsx)("path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68"}),(0,a.jsx)("path",{d:"M5 13a10 10 0 0 1 5.24-2.76"}),(0,a.jsx)("circle",{cx:"12",cy:"20",r:"1"})]}),q=()=>(0,a.jsxs)("svg",{className:"h-4 w-4 text-blue-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("path",{d:"m3 12 6-6-6-6"}),(0,a.jsx)("path",{d:"M21 18v-2a4 4 0 0 0-4-4H9"}),(0,a.jsx)("path",{d:"M3 6v2a4 4 0 0 0 4 4h8"})]}),Y=()=>(0,a.jsx)("svg",{className:"h-3 w-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,a.jsx)("path",{d:"m22 12-4-4v3H8l-4-4v8l4-4v3h10l4-4Z"})});function $(){var e,s,t,l;let{serverConfig:n,isServerSetupComplete:i}=(0,M.m)(),[c,d]=(0,r.useState)(null),[o,m]=(0,r.useState)(!1),[g,v]=(0,r.useState)([]),[N,b]=(0,r.useState)(null),[w,y]=(0,r.useState)(null),z=(0,r.useRef)(null),k=async()=>(await new Promise(e=>setTimeout(e,1e3*Math.random()+500)),Math.random()>.1);(0,r.useEffect)(()=>{if(!i||!n){z.current&&clearInterval(z.current);return}let e=async()=>{try{let e;let s=Date.now(),t=await k(),a=Date.now()-s,r=new Date,l=null;t&&((e={cpu_usage:100*Math.random(),ram_usage_percent:100*Math.random(),gpu_utilization:100*Math.random(),gpu_memory_used:16*Math.random(),gpu_temperature:40*Math.random()+50,warmup_complete:Math.random()>.3}).warmup_complete?e.cpu_usage>90?l="High CPU usage detected - performance may be impacted":e.ram_usage_percent>95?l="High memory usage detected - server may become unstable":"number"==typeof e.gpu_utilization&&e.gpu_utilization>95&&(l="GPU is at maximum capacity - requests may be queued"):l="Server is still warming up - performance may be slower");let n={timestamp:r,status:t,responseTime:a,systemMetrics:e};b(n),d(r),y(l),v(e=>[...e.slice(-19),n])}catch(t){console.error("[v0]  health check failed:",t);let e=new Date,s={timestamp:e,status:!1,responseTime:0};b(s),d(e),y("Server connection failed"),v(e=>[...e.slice(-19),s])}};return z.current||(e(),z.current=setInterval(e,3e4)),()=>{z.current&&clearInterval(z.current),z.current=null}},[i]);let S=async()=>{if(n){m(!0);try{let e;let s=Date.now(),t=await k(),a=Date.now()-s,r=new Date;t&&(e={cpu_usage:100*Math.random(),ram_usage_percent:100*Math.random(),gpu_utilization:100*Math.random(),gpu_memory_used:16*Math.random(),warmup_complete:Math.random()>.2});let l={timestamp:r,status:t,responseTime:a,systemMetrics:e};b(l),d(r),v(e=>[...e.slice(-19),l])}catch(e){console.error("[v0] Manual  health check failed:",e),y("Manual health check failed")}finally{m(!1)}}},_=()=>{if(!N||!N.status)return 0;let e=100;if(N.responseTime>2e3?e-=30:N.responseTime>1e3&&(e-=15),N.systemMetrics){let s=N.systemMetrics;s.cpu_usage>90?e-=25:s.cpu_usage>70&&(e-=10),s.ram_usage_percent>95?e-=25:s.ram_usage_percent>80&&(e-=10),s.gpu_utilization&&s.gpu_utilization>95&&(e-=20),s.warmup_complete||(e-=40)}return Math.max(0,e)};return i&&n?(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(h,{className:"pb-3",children:(0,a.jsxs)(p,{className:"text-white flex items-center gap-2 text-sm",children:[(0,a.jsx)(O,{}),"Server Monitor"]})}),(0,a.jsxs)(j,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"online":return(0,a.jsx)(B,{});case"offline":default:return(0,a.jsx)(W,{});case"checking":return(0,a.jsx)(q,{})}})(n.status),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:"local"===n.type?"Local Server":"runpod"===n.type?"RunPod Instance":"Remote Server"}),(null==N?void 0:null===(e=N.systemMetrics)||void 0===e?void 0:e.warmup_complete)===!1&&(0,a.jsx)(f,{variant:"secondary",className:"ml-2 text-xs",children:"WARMING"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f,{className:(e=>{switch(e){case"online":return"bg-green-600";case"offline":return"bg-red-600";case"checking":return"bg-blue-600";default:return"bg-yellow-600"}})(n.status),children:n.status.toUpperCase()}),N&&N.status&&(0,a.jsxs)(f,{variant:"outline",className:"text-xs",children:[N.responseTime,"ms"]})]})]}),(0,a.jsx)("div",{className:"text-xs text-zinc-400 font-mono bg-zinc-800 p-2 rounded truncate",children:n.url}),N&&N.status&&(0,a.jsxs)("div",{className:"bg-zinc-800 p-3 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-zinc-400",children:"Performance Score"}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsxs)("span",{className:"text-white font-bold",children:[_(),"/100"]})})]}),(0,a.jsx)(V,{value:_(),className:"h-2"})]}),(null==N?void 0:N.systemMetrics)&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"bg-zinc-800 p-2 rounded text-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-1 mb-1",children:(0,a.jsx)("span",{className:"text-xs text-zinc-400",children:"CPU"})}),(0,a.jsxs)("div",{className:"text-sm font-bold text-white",children:[N.systemMetrics.cpu_usage.toFixed(0),"%"]}),(0,a.jsx)(V,{value:N.systemMetrics.cpu_usage,className:"h-1 mt-1"})]}),(0,a.jsxs)("div",{className:"bg-zinc-800 p-2 rounded text-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-1 mb-1",children:(0,a.jsx)("span",{className:"text-xs text-zinc-400",children:"RAM"})}),(0,a.jsxs)("div",{className:"text-sm font-bold text-white",children:[N.systemMetrics.ram_usage_percent.toFixed(0),"%"]}),(0,a.jsx)(V,{value:N.systemMetrics.ram_usage_percent,className:"h-1 mt-1"})]}),void 0!==N.systemMetrics.gpu_utilization&&(0,a.jsxs)("div",{className:"bg-zinc-800 p-2 rounded text-center col-span-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-1 mb-1",children:(0,a.jsx)("span",{className:"text-xs text-zinc-400",children:"GPU Utilization"})}),(0,a.jsxs)("div",{className:"text-sm font-bold text-white",children:[null===(s=N.systemMetrics.gpu_utilization)||void 0===s?void 0:s.toFixed(0),"%"]}),(0,a.jsx)(V,{value:N.systemMetrics.gpu_utilization||0,className:"h-1 mt-1"}),N.systemMetrics.gpu_temperature&&(0,a.jsxs)("div",{className:"text-xs text-zinc-500 mt-1",children:[N.systemMetrics.gpu_temperature.toFixed(0),"\xb0C"]})]})]}),g.length>0&&(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-white",children:[0===g.length?0:Math.round(g.filter(e=>e.status).length/g.length*100),"%"]}),(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Uptime"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-white",children:[(()=>{let e=g.filter(e=>e.status&&e.responseTime>0);return 0===e.length?0:Math.round(e.reduce((e,s)=>e+s.responseTime,0)/e.length)})(),"ms"]}),(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Avg Response"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:g.length}),(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Checks"})]})]}),g.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Health Timeline (Last 20 checks)"}),(0,a.jsx)("div",{className:"flex gap-1",children:g.map((e,s)=>{var t;let r=(null===(t=e.systemMetrics)||void 0===t?void 0:t.warmup_complete)===!1;return(0,a.jsx)("div",{className:"h-3 flex-1 rounded-sm ".concat(e.status?r?"bg-yellow-600":"bg-green-600":"bg-red-600"),title:"".concat(e.timestamp.toLocaleTimeString(),": ").concat(e.status?r?"Online (Warming)":"Online":"Offline"," - ").concat(e.responseTime,"ms").concat(e.systemMetrics?" | CPU: ".concat(e.systemMetrics.cpu_usage.toFixed(0),"%"):"")},s)})})]}),w&&(0,a.jsx)(G,{className:"border-yellow-800",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("svg",{className:"h-4 w-4 text-yellow-400 mt-0.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),(0,a.jsx)("path",{d:"M12 9v4"}),(0,a.jsx)("path",{d:"m12 17 .01 0"})]}),(0,a.jsx)(H,{className:"text-yellow-400 ml-2",children:w})]})}),c&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-zinc-400",children:[(0,a.jsxs)("svg",{className:"h-3 w-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("polyline",{points:"12,6 12,12 16,14"})]}),"Last checked: ",c.toLocaleTimeString(),N&&N.status&&(0,a.jsxs)("span",{className:"ml-2 text-zinc-500",children:["(",N.responseTime,"ms response)"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x,{onClick:S,disabled:o,variant:"outline",size:"sm",className:"w-full border-zinc-700 text-zinc-300 hover:bg-zinc-800 bg-transparent",children:o?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("svg",{className:"h-3 w-3 mr-2 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("path",{d:"m3 12 6-6-6-6"}),(0,a.jsx)("path",{d:"M21 18v-2a4 4 0 0 0-4-4H9"}),(0,a.jsx)("path",{d:"M3 6v2a4 4 0 0 0 4 4h8"})]}),"Checking..."]}):(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(Y,{}),(0,a.jsx)("span",{className:"ml-2",children:" Health Check"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[n.url&&(0,a.jsxs)(x,{variant:"outline",size:"sm",className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800 bg-transparent text-xs",onClick:()=>window.open("".concat(n.url,"/metrics"),"_blank"),children:[(0,a.jsx)("svg",{className:"h-3 w-3 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,a.jsx)("polyline",{points:"22,12 18,12 15,21 9,3 6,12 2,12"})}),"Metrics"]}),"runpod"===n.type&&(0,a.jsxs)(x,{variant:"outline",size:"sm",className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800 bg-transparent text-xs",onClick:()=>{console.log("[v0] Opening RunPod management")},children:[(0,a.jsxs)("svg",{className:"h-3 w-3 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,a.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),"Manage"]})]})]}),N&&N.status&&80>_()&&(0,a.jsx)("div",{className:"bg-yellow-900/20 border border-yellow-800 rounded p-2",children:(0,a.jsxs)("div",{className:"text-xs text-yellow-400",children:[(0,a.jsx)("strong",{children:"Performance Tips:"}),(null===(t=N.systemMetrics)||void 0===t?void 0:t.warmup_complete)===!1&&(0,a.jsx)("div",{children:"• Wait for warmup to complete for optimal speed"}),N.responseTime>1e3&&(0,a.jsx)("div",{children:"• High network latency - check connection"}),(null===(l=N.systemMetrics)||void 0===l?void 0:l.cpu_usage)&&N.systemMetrics.cpu_usage>80&&(0,a.jsx)("div",{children:"• High CPU usage - consider upgrading server"})]})})]})]}):null}var Q=t(1312);function X(e){let{className:s,...t}=e;return(0,a.jsx)(Q.fC,{"data-slot":"tabs",className:d("flex flex-col gap-2",s),...t})}function K(e){let{className:s,...t}=e;return(0,a.jsx)(Q.aV,{"data-slot":"tabs-list",className:d("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...t})}function J(e){let{className:s,...t}=e;return(0,a.jsx)(Q.xz,{"data-slot":"tabs-trigger",className:d("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t})}function ee(e){let{className:s,...t}=e;return(0,a.jsx)(Q.VY,{"data-slot":"tabs-content",className:d("flex-1 outline-none",s),...t})}var es=t(1671),et=t(5395),ea=t(7168),er=t(6865),el=t(6137),en=t(4401),ei=t(476),ec=t(5954),ed=t(525),eo=t(6899),em=t(4822),ex=t(4428),eu=t(1239),eh=t(91),ep=t(1723),eg=t(6215);function ej(){var e,s;let{serverConfig:t,checkServerHealth:l,isServerSetupComplete:n}=(0,M.m)(),[i,c]=(0,r.useState)([]),[d,o]=(0,r.useState)(null),[m,v]=(0,r.useState)(null),[N,b]=(0,r.useState)(!1),[w,y]=(0,r.useState)(null),[z,k]=(0,r.useState)({requestsPerMinute:0,averageLatency:0,errorRate:0}),S=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!n||!t){S.current&&clearInterval(S.current);return}let e=async()=>{try{var e,s;b(!0);let a=Date.now(),r=await l(),n=Date.now()-a,i=null,d=null;if(r)try{let e=await fetch("".concat(t.url,"/system"));e.ok&&(i=await e.json());let s=await fetch("".concat(t.url,"/metrics"));s.ok&&(d=await s.json())}catch(e){console.warn("[v0] Failed to fetch detailed metrics:",e)}let m={timestamp:new Date,responseTime:n,isOnline:r,cpuUsage:(null==i?void 0:i.cpu_usage)||0,memoryUsage:i?i.ram_used/i.ram_total*100:0,gpuUsage:(null==i?void 0:i.gpu_utilization)||0,gpuMemoryUsed:(null==i?void 0:i.gpu_memory_used)||0,gpuMemoryTotal:(null==i?void 0:i.gpu_memory_total)||0,gpuTemperature:(null==i?void 0:i.gpu_temperature)||null,inferenceTime:(null==d?void 0:null===(e=d.performance_stats)||void 0===e?void 0:e.average_inference_time)||0,queueTime:(null==d?void 0:null===(s=d.performance_stats)||void 0===s?void 0:s.average_preprocessing_time)||0,totalLatency:n,requestsPerSecond:0,warmupComplete:(null==i?void 0:i.warmup_complete)||!1};if(o(m),v(i),y(new Date),null==d?void 0:d.performance_stats){let e=d.performance_stats;k({requestsPerMinute:e.total_requests||0,averageLatency:e.average_inference_time||0,errorRate:0})}c(e=>[...e.slice(-99),m]),console.log("[v0]  health check completed:",m)}catch(s){console.error("[v0]  health check failed:",s);let e={timestamp:new Date,responseTime:0,isOnline:!1};o(e),c(s=>[...s.slice(-99),e])}finally{b(!1)}};return S.current||(e(),S.current=setInterval(e,3e4)),()=>{S.current&&clearInterval(S.current),S.current=null}},[n,null==t?void 0:t.url,l]);let _=()=>0===i.length?0:Math.round(i.filter(e=>e.isOnline).length/i.length*100),C=()=>{let e=i.filter(e=>e.isOnline&&e.inferenceTime&&e.inferenceTime>0);return 0===e.length?0:(e.reduce((e,s)=>e+(s.inferenceTime||0),0)/e.length*1e3).toFixed(1)},U=()=>{if(!d||!d.isOnline)return 0;let e=100;return d.responseTime>1e3?e-=20:d.responseTime>500&&(e-=10),d.cpuUsage&&d.cpuUsage>80&&(e-=15),d.memoryUsage&&d.memoryUsage>90&&(e-=15),d.gpuUsage&&d.gpuUsage>95&&(e-=20),d.warmupComplete||(e-=30),Math.max(0,e)},T=e=>e?"".concat((e/1024).toFixed(1)," GB"):"0 GB";return n&&t?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(u,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsx)(j,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-zinc-400 text-sm",children:"Server Status"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(e=>{switch(e){case"online":return(0,a.jsx)(es.Z,{className:"h-4 w-4 text-green-400"});case"offline":return(0,a.jsx)(et.Z,{className:"h-4 w-4 text-red-400"});case"checking":return(0,a.jsx)(ea.Z,{className:"h-4 w-4 text-blue-400 animate-spin"});default:return(0,a.jsx)(er.Z,{className:"h-4 w-4 text-yellow-400"})}})(t.status),(0,a.jsx)("span",{className:"font-medium ".concat((e=>{switch(e){case"online":return"text-green-400";case"offline":return"text-red-400";case"checking":return"text-blue-400";default:return"text-yellow-400"}})(t.status)),children:t.status.toUpperCase()})]}),(null==d?void 0:d.warmupComplete)===!1&&(0,a.jsx)(f,{variant:"secondary",className:"mt-1 text-xs",children:"WARMING UP"})]}),(0,a.jsx)(en.Z,{className:"h-8 w-8 text-zinc-600"})]})})}),(0,a.jsx)(u,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsx)(j,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-zinc-400 text-sm",children:"Performance Score"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:U()}),(0,a.jsx)("span",{className:"text-sm text-zinc-400",children:"/100"})]})]}),(0,a.jsx)(ei.Z,{className:"h-8 w-8 text-zinc-600"})]})})}),(0,a.jsx)(u,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsx)(j,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-zinc-400 text-sm",children:"Avg Inference"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-white",children:[C(),"ms"]}),(0,a.jsx)("p",{className:"text-xs text-zinc-500",children:"Last 10 requests"})]}),(0,a.jsx)(ec.Z,{className:"h-8 w-8 text-zinc-600"})]})})}),(0,a.jsx)(u,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsx)(j,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-zinc-400 text-sm",children:"Uptime"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-white",children:[_(),"%"]}),(0,a.jsxs)("p",{className:"text-xs text-zinc-500",children:[i.length," checks"]})]}),(0,a.jsx)(ed.Z,{className:"h-8 w-8 text-zinc-600"})]})})})]}),(0,a.jsxs)(X,{defaultValue:"overview",className:"w-full",children:[(0,a.jsxs)(K,{className:"grid w-full grid-cols-4 bg-zinc-800",children:[(0,a.jsx)(J,{value:"overview",className:"text-zinc-300",children:"Overview"}),(0,a.jsx)(J,{value:"performance",className:"text-zinc-300",children:"Performance"}),(0,a.jsx)(J,{value:"resources",className:"text-zinc-300",children:"Resources"}),(0,a.jsx)(J,{value:"history",className:"text-zinc-300",children:"History"})]}),(0,a.jsx)(ee,{value:"overview",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(h,{children:(0,a.jsxs)(p,{className:"text-white flex items-center gap-2",children:[(0,a.jsx)(el.Z,{className:"h-4 w-4"}),"Server Information"]})}),(0,a.jsxs)(j,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"Type:"}),(0,a.jsx)(f,{variant:"outline",children:"local"===t.type?"Local Server":"runpod"===t.type?"RunPod Instance":"Remote Server"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"URL:"}),(0,a.jsx)("span",{className:"text-white font-mono text-sm truncate max-w-48",children:t.url})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"Last Check:"}),(0,a.jsx)("span",{className:"text-white text-sm",children:w?w.toLocaleTimeString():"Never"})]}),(null==m?void 0:m.gpu_name)&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"GPU:"}),(0,a.jsx)("span",{className:"text-white text-sm",children:m.gpu_name})]})]})]}),d&&d.isOnline&&(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(h,{children:(0,a.jsxs)(p,{className:"text-white flex items-center gap-2",children:[(0,a.jsx)(en.Z,{className:"h-4 w-4"}),"Real-time Metrics"]})}),(0,a.jsxs)(j,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-white",children:[d.responseTime,"ms"]}),(0,a.jsx)("p",{className:"text-xs text-zinc-400",children:"Response Time"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-white",children:[d.inferenceTime?(1e3*d.inferenceTime).toFixed(0):"N/A","ms"]}),(0,a.jsx)("p",{className:"text-xs text-zinc-400",children:"Inference Time"})]})]}),d.gpuTemperature&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eo.Z,{className:"h-4 w-4 text-zinc-400"}),(0,a.jsxs)("span",{className:"text-white",children:[d.gpuTemperature,"\xb0C"]}),(0,a.jsx)("span",{className:"text-zinc-400 text-sm",children:"GPU Temp"})]}),!d.warmupComplete&&(0,a.jsxs)(G,{className:"border-yellow-800",children:[(0,a.jsx)(er.Z,{className:"h-4 w-4"}),(0,a.jsx)(H,{className:"text-yellow-400",children:"Server is still warming up. Performance may be slower than usual."})]})]})]})]})}),(0,a.jsx)(ee,{value:"performance",className:"space-y-4",children:(null==m?void 0:m.performance_stats)&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(h,{children:(0,a.jsx)(p,{className:"text-white text-sm",children:"Request Statistics"})}),(0,a.jsxs)(j,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-zinc-400 text-sm",children:"Total Requests:"}),(0,a.jsx)("span",{className:"text-white font-bold",children:m.performance_stats.total_requests})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-zinc-400 text-sm",children:"Cache Hit Rate:"}),(0,a.jsxs)("span",{className:"text-white font-bold",children:[m.performance_stats.cache_hits+m.performance_stats.cache_misses>0?Math.round(m.performance_stats.cache_hits/(m.performance_stats.cache_hits+m.performance_stats.cache_misses)*100):0,"%"]})]})]})]}),(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(h,{children:(0,a.jsx)(p,{className:"text-white text-sm",children:"Processing Times"})}),(0,a.jsxs)(j,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"Inference:"}),(0,a.jsxs)("span",{className:"text-white",children:[(1e3*m.performance_stats.average_inference_time).toFixed(1),"ms"]})]}),(0,a.jsx)(V,{value:Math.min(100*m.performance_stats.average_inference_time,100),className:"h-2"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"Preprocessing:"}),(0,a.jsxs)("span",{className:"text-white",children:[(1e3*m.performance_stats.average_preprocessing_time).toFixed(1),"ms"]})]}),(0,a.jsx)(V,{value:Math.min(100*m.performance_stats.average_preprocessing_time,100),className:"h-2"})]})]})]}),(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(h,{children:(0,a.jsx)(p,{className:"text-white text-sm",children:"Memory Usage"})}),(0,a.jsxs)(j,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xl font-bold text-white",children:T(m.performance_stats.peak_memory_usage)}),(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Peak GPU Memory"})]}),m.gpu_memory_total&&(0,a.jsx)(V,{value:m.performance_stats.peak_memory_usage/1024/m.gpu_memory_total*100,className:"h-3"})]})]})]})}),(0,a.jsxs)(ee,{value:"resources",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(h,{children:(0,a.jsxs)(p,{className:"text-white flex items-center gap-2 text-sm",children:[(0,a.jsx)(em.Z,{className:"h-4 w-4"}),"CPU Usage"]})}),(0,a.jsx)(j,{children:(null==d?void 0:d.cpuUsage)?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-white mb-2",children:[d.cpuUsage.toFixed(1),"%"]}),(0,a.jsx)(V,{value:d.cpuUsage,className:"h-3 mb-2"}),(null==m?void 0:m.cpu_count)&&(0,a.jsxs)("div",{className:"text-xs text-zinc-400",children:[m.cpu_count," cores"]})]}):(0,a.jsx)("div",{className:"text-center text-zinc-400",children:"No data"})})]}),(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(h,{children:(0,a.jsxs)(p,{className:"text-white flex items-center gap-2 text-sm",children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4"}),"RAM Usage"]})}),(0,a.jsx)(j,{children:m&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-white mb-2",children:[(m.ram_used/m.ram_total*100).toFixed(1),"%"]}),(0,a.jsx)(V,{value:m.ram_used/m.ram_total*100,className:"h-3 mb-2"}),(0,a.jsxs)("div",{className:"text-xs text-zinc-400",children:[T(1024*m.ram_used)," /"," ",T(1024*m.ram_total)]})]})})]}),(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(h,{children:(0,a.jsxs)(p,{className:"text-white flex items-center gap-2 text-sm",children:[(0,a.jsx)(eu.Z,{className:"h-4 w-4"}),"GPU Usage"]})}),(0,a.jsx)(j,{children:(null==d?void 0:d.gpuUsage)?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-white mb-2",children:[d.gpuUsage.toFixed(1),"%"]}),(0,a.jsx)(V,{value:d.gpuUsage,className:"h-3 mb-2"}),(0,a.jsxs)("div",{className:"text-xs text-zinc-400",children:["VRAM: ",T(d.gpuMemoryUsed)," /"," ",T(d.gpuMemoryTotal)]})]}):(0,a.jsx)("div",{className:"text-center text-zinc-400",children:(null==m?void 0:m.gpu_available)?"No data":"No GPU"})})]})]}),(null==m?void 0:m.gpu_available)&&(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(h,{children:(0,a.jsxs)(p,{className:"text-white flex items-center gap-2",children:[(0,a.jsx)(eh.Z,{className:"h-4 w-4"}),"GPU Memory Breakdown"]})}),(0,a.jsx)(j,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:T(m.gpu_memory_total)}),(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Total VRAM"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:T(m.gpu_memory_used)}),(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Used VRAM"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:T(m.gpu_memory_available)}),(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Available VRAM"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"VRAM Utilization"}),(0,a.jsxs)("span",{className:"text-white",children:[m.gpu_memory_total?((null!==(e=m.gpu_memory_used)&&void 0!==e?e:0)/m.gpu_memory_total*100).toFixed(1):0,"%"]})]}),(0,a.jsx)(V,{value:m.gpu_memory_total?(null!==(s=m.gpu_memory_used)&&void 0!==s?s:0/m.gpu_memory_total)*100:0,className:"h-4"})]})]})})]})]}),(0,a.jsx)(ee,{value:"history",className:"space-y-4",children:(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsxs)(h,{children:[(0,a.jsxs)(p,{className:"text-white flex items-center gap-2",children:[(0,a.jsx)(ep.Z,{className:"h-4 w-4"}),"Performance History"]}),(0,a.jsxs)(g,{className:"text-zinc-400",children:["Last ",i.length," health checks with detailed metrics"]})]}),(0,a.jsx)(j,{children:i.length>0?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Status Timeline (Last 50 checks)"}),(0,a.jsx)("div",{className:"flex gap-1",children:i.slice(-50).map((e,s)=>{let t=e.isOnline?e.warmupComplete?"opacity-100":"opacity-70":"opacity-100";return(0,a.jsx)("div",{className:"h-4 flex-1 rounded-sm ".concat(e.isOnline?e.warmupComplete?"bg-green-600":"bg-yellow-600":"bg-red-600"," ").concat(t),title:"".concat(e.timestamp.toLocaleTimeString(),": ").concat(e.isOnline?e.warmupComplete?"Online (Ready)":"Online (Warming)":"Offline"," - ").concat(e.responseTime,"ms").concat(e.inferenceTime?" | Inf: ".concat((1e3*e.inferenceTime).toFixed(0),"ms"):"")},s)})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-zinc-800 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400 mb-1",children:"Avg Response Time"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-white",children:[(()=>{let e=i.filter(e=>e.isOnline&&e.responseTime>0);return 0===e.length?0:Math.round(e.reduce((e,s)=>e+s.responseTime,0)/e.length)})(),"ms"]}),(0,a.jsx)("div",{className:"text-xs text-zinc-500",children:"Network latency"})]}),(0,a.jsxs)("div",{className:"bg-zinc-800 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400 mb-1",children:"Avg Inference Time"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-white",children:[C(),"ms"]}),(0,a.jsx)("div",{className:"text-xs text-zinc-500",children:"Model processing"})]}),(0,a.jsxs)("div",{className:"bg-zinc-800 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400 mb-1",children:"Reliability"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-white",children:[_(),"%"]}),(0,a.jsx)("div",{className:"text-xs text-zinc-500",children:"Uptime ratio"})]})]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400 mb-2",children:"Recent Health Checks"}),i.slice(-15).reverse().map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-zinc-800 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.isOnline?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(es.Z,{className:"h-3 w-3 text-green-400"}),!e.warmupComplete&&(0,a.jsx)(f,{variant:"secondary",className:"text-xs px-1 py-0",children:"WARM"})]}):(0,a.jsx)(et.Z,{className:"h-3 w-3 text-red-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-white text-sm",children:e.timestamp.toLocaleTimeString()}),e.gpuTemperature&&(0,a.jsxs)("div",{className:"text-xs text-zinc-400 flex items-center gap-1",children:[(0,a.jsx)(eo.Z,{className:"h-3 w-3"}),e.gpuTemperature,"\xb0C"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-zinc-400",children:[(0,a.jsxs)("span",{children:[e.responseTime,"ms"]}),e.inferenceTime&&(0,a.jsxs)("span",{children:["Inf: ",(1e3*e.inferenceTime).toFixed(0),"ms"]}),e.cpuUsage&&(0,a.jsxs)("span",{children:["CPU: ",e.cpuUsage.toFixed(1),"%"]}),e.gpuUsage&&(0,a.jsxs)("span",{children:["GPU: ",e.gpuUsage.toFixed(1),"%"]})]})]},s))]})]}):(0,a.jsx)("div",{className:"text-center text-zinc-400 py-8",children:"No health data available yet"})})]})})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsx)(x,{onClick:async()=>{b(!0);try{await l()}finally{b(!1)}},disabled:N,variant:"outline",className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ea.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Checking..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ea.Z,{className:"h-4 w-4 mr-2"}),"Manual Health Check"]})}),t.url&&(0,a.jsxs)(x,{onClick:()=>window.open("".concat(t.url,"/metrics"),"_blank"),variant:"outline",className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:[(0,a.jsx)(eg.Z,{className:"h-4 w-4 mr-2"}),"View Raw Metrics"]})]}),d&&d.isOnline&&70>U()&&(0,a.jsxs)(G,{className:"border-yellow-800",children:[(0,a.jsx)(er.Z,{className:"h-4 w-4"}),(0,a.jsxs)(H,{className:"text-yellow-400",children:[(0,a.jsx)("strong",{children:"Performance Warning:"})," Server performance is below optimal levels.",!d.warmupComplete&&" Server is still warming up.",d.responseTime>1e3&&" High response times detected.",d.cpuUsage&&d.cpuUsage>80&&" High CPU usage detected."]})]})]}):(0,a.jsx)(u,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsxs)(j,{className:"p-6 text-center",children:[(0,a.jsx)(el.Z,{className:"h-12 w-12 text-zinc-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-zinc-400",children:"No server configured"}),(0,a.jsx)("p",{className:"text-zinc-500 text-sm",children:"Complete server setup to view health dashboard"})]})})}var ev=t(8930),ef=t(9227),eN=t(3276);function eb(){let{voices:e,selectedVoiceId:s,selectedEmotionId:t,setSelectedVoice:l,setSelectedEmotion:n,deleteVoice:i}=(0,M.m)(),[c,d]=(0,r.useState)(null),[o,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)("server"),g=e=>{s===e?l(null):l(e),n(null)},j=e=>{t===e?n(null):n(e)},v=(e,s)=>{if(c===s){d(null);return}let t=new Audio(e);d(s),t.onended=()=>d(null),t.onerror=()=>d(null),t.play().catch(()=>d(null))};return(0,a.jsxs)("div",{className:"w-80 bg-sidebar border-r border-sidebar-border flex flex-col h-full",children:[(0,a.jsx)("div",{className:"p-6 pb-0 flex-shrink-0",children:(0,a.jsxs)("div",{className:"flex border-b border-zinc-700",children:[(0,a.jsx)("button",{onClick:()=>p("server"),className:"flex-1 pb-2 text-sm font-medium transition-colors ".concat("server"===h?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"),children:"Server"}),(0,a.jsx)("button",{onClick:()=>p("voices"),className:"flex-1 pb-2 text-sm font-medium transition-colors ".concat("voices"===h?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"),children:"Manage Voices"})]})}),(0,a.jsxs)("div",{className:"flex-1 p-6 overflow-y-auto",children:["server"===h&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)($,{}),(0,a.jsxs)(x,{variant:"outline",size:"sm",className:"w-full border-zinc-700 text-zinc-300 hover:bg-zinc-800 bg-transparent",onClick:()=>m(!0),children:[(0,a.jsx)(eg.Z,{className:"h-3 w-3 mr-2"}),"View Full Dashboard"]})]})}),"voices"===h&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-sm font-medium text-sidebar-foreground",children:"Voices"}),(0,a.jsx)(L,{})]}),0===e.length?(0,a.jsxs)(u,{className:"p-4 text-center",children:[(0,a.jsx)(R.Z,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No voices uploaded yet"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Upload your first voice sample to get started"})]}):(0,a.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,a.jsxs)(u,{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("button",{onClick:()=>g(e.id),className:"text-sm font-medium text-left flex-1 ".concat(s===e.id?"text-primary":"text-foreground"),children:e.name}),(0,a.jsx)(x,{size:"sm",variant:"ghost",onClick:()=>i(e.id),className:"h-6 w-6 p-0 text-muted-foreground hover:text-destructive",children:(0,a.jsx)(ev.Z,{className:"h-3 w-3"})})]}),s===e.id&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>j("neutral"),className:"flex-1 text-left px-2 py-1 rounded text-xs ".concat("neutral"!==t&&(t||s!==e.id)?"bg-muted text-muted-foreground hover:bg-accent":"bg-primary text-primary-foreground"),children:"Neutral (Main)"}),e.mainAudioUrl&&(0,a.jsx)(x,{size:"sm",variant:"ghost",onClick:()=>v(e.mainAudioUrl,"".concat(e.id,"-main")),className:"h-6 w-6 p-0",children:c==="".concat(e.id,"-main")?(0,a.jsx)(ef.Z,{className:"h-3 w-3"}):(0,a.jsx)(eN.Z,{className:"h-3 w-3"})})]}),e.emotions.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>j(e.id),className:"flex-1 text-left px-2 py-1 rounded text-xs ".concat(t===e.id?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-accent"),children:e.name}),e.audioUrl&&(0,a.jsx)(x,{size:"sm",variant:"ghost",onClick:()=>v(e.audioUrl,e.id),className:"h-6 w-6 p-0",children:c===e.id?(0,a.jsx)(ef.Z,{className:"h-3 w-3"}):(0,a.jsx)(eN.Z,{className:"h-3 w-3"})})]},e.id))]}),(0,a.jsx)("div",{className:"flex gap-1 mt-2",children:(0,a.jsxs)(f,{variant:"secondary",className:"text-xs",children:[e.emotions.length+1," variants"]})})]},e.id))})]})]}),o&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Server Health Dashboard"}),(0,a.jsx)(x,{variant:"ghost",size:"sm",onClick:()=>m(!1),className:"text-zinc-400 hover:text-white",children:"✕"})]}),(0,a.jsx)(ej,{})]})})})]})}function ew(e){let{className:s,...t}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:d("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}var ey=t(3643);function ez(e){let{className:s,children:t,...r}=e;return(0,a.jsxs)(ey.fC,{"data-slot":"scroll-area",className:d("relative",s),...r,children:[(0,a.jsx)(ey.l_,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),(0,a.jsx)(ek,{}),(0,a.jsx)(ey.Ns,{})]})}function ek(e){let{className:s,orientation:t="vertical",...r}=e;return(0,a.jsx)(ey.gb,{"data-slot":"scroll-area-scrollbar",orientation:t,className:d("flex touch-none p-px transition-colors select-none","vertical"===t&&"h-full w-2.5 border-l border-l-transparent","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent",s),...r,children:(0,a.jsx)(ey.q4,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var eS=t(8736),e_=t(5368),eC=t(1706);let eU=[{title:"Pauses and Timing",examples:[{text:"Hello... world",description:"Short pause (0.5s)"},{text:"Hello...... world",description:"Medium pause (1s)"},{text:"Hello.......... world",description:"Long pause (2s)"},{text:"Hello, world",description:"Natural comma pause"},{text:"Hello. World.",description:"Sentence break pause"}]},{title:"Emphasis and Tone",examples:[{text:"*Hello* world",description:"Emphasis on 'Hello'"},{text:"**IMPORTANT** message",description:"Strong emphasis"},{text:"Hello ~world~",description:"Whispered tone"},{text:"Hello WORLD!",description:"Louder/excited tone"}]},{title:"Speech Patterns",examples:[{text:"Um... let me think",description:"Natural hesitation"},{text:"Well, you know...",description:"Conversational filler"},{text:"Question mark tone?",description:"Rising intonation"},{text:"Exclamation point!",description:"Excited delivery"}]},{title:"Pronunciation Guide",examples:[{text:"Dr. Smith",description:"Abbreviations"},{text:"NASA (NAH-sah)",description:"Phonetic spelling"},{text:"2023 (twenty twenty-three)",description:"Number pronunciation"},{text:"AI (A-I)",description:"Letter-by-letter"}]}];function eT(){let{currentText:e,setText:s,selectedVoiceId:t,selectedEmotionId:l,voices:n}=(0,M.m)(),[i,c]=(0,r.useState)(!1),o=n.find(e=>e.id===t),m=null==o?void 0:o.emotions.find(e=>e.id===l),h=e.trim().split(/\s+/).filter(Boolean).length,p=e.length;return(0,a.jsxs)(u,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,a.jsx)(eS.Z,{className:"h-5 w-5"}),"Text Input"]}),(0,a.jsxs)(k,{open:i,onOpenChange:c,children:[(0,a.jsx)(S,{asChild:!0,children:(0,a.jsxs)(x,{variant:"outline",size:"sm",className:"gap-2 bg-transparent",children:[(0,a.jsx)(e_.Z,{className:"h-4 w-4"}),"Formatting Guide"]})}),(0,a.jsxs)(U,{className:"max-w-3xl max-h-[80vh]",children:[(0,a.jsx)(T,{children:(0,a.jsxs)(Z,{className:"flex items-center gap-2",children:[(0,a.jsx)(e_.Z,{className:"h-5 w-5"}),"Text Formatting Guide"]})}),(0,a.jsx)(ez,{className:"max-h-[60vh]",children:(0,a.jsxs)("div",{className:"space-y-6 pr-4",children:[(0,a.jsxs)("div",{className:"bg-muted/50 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Quick Tips"}),(0,a.jsxs)("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[(0,a.jsx)("li",{children:"• Use natural punctuation for realistic speech patterns"}),(0,a.jsx)("li",{children:"• Add pauses with dots (...) for dramatic effect"}),(0,a.jsx)("li",{children:"• Use *asterisks* for emphasis and ~tildes~ for whispers"}),(0,a.jsx)("li",{children:"• Write numbers and abbreviations as you want them spoken"}),(0,a.jsx)("li",{children:"• Line breaks are preserved in speech timing"})]})]}),eU.map((e,s)=>(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:e.title}),(0,a.jsx)("div",{className:"grid gap-3",children:e.examples.map((e,s)=>(0,a.jsxs)("div",{className:"bg-card border rounded-lg p-3",children:[(0,a.jsx)("div",{className:"font-mono text-sm bg-muted/50 p-2 rounded mb-2",children:e.text}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]},s))})]},s)),(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-950/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Pro Tips"}),(0,a.jsxs)("ul",{className:"text-sm space-y-1 text-blue-800 dark:text-blue-200",children:[(0,a.jsx)("li",{children:"• Test different emotions with the same text for variety"}),(0,a.jsx)("li",{children:"• Use shorter sentences for clearer pronunciation"}),(0,a.jsx)("li",{children:"• Add context clues for ambiguous words"}),(0,a.jsx)("li",{children:"• Preview your text before generating audio"})]})]})]})})]})]})]}),o&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-muted/50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(eC.Z,{className:"h-4 w-4 text-primary"}),(0,a.jsx)("span",{className:"font-medium",children:"Selected Voice:"}),(0,a.jsx)(f,{variant:"secondary",children:o.name}),m&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"•"}),(0,a.jsx)(f,{variant:"outline",children:m.name})]}),!m&&t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"•"}),(0,a.jsx)(f,{variant:"outline",children:"Neutral"})]})]})}),!t&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"Please select a voice from the sidebar before entering text."})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(ew,{value:e,onChange:e=>s(e.target.value),placeholder:"Enter the text you want to convert to speech...\n\nExample:\nHello there! *Welcome* to our text-to-speech studio.\n\nLet me show you... how to use formatting.\n- Use *asterisks* for emphasis\n- Add pauses with dots...\n- Write naturally, and the AI will understand!\n\nReady to create amazing voice content?",className:"min-h-[200px] font-mono text-sm leading-relaxed resize-none",disabled:!t}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(eS.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[p," characters"]})]}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsxs)("span",{children:[h," words"]})}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ep.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["~",Math.ceil(h/150)," min"]})]})]}),e.trim()&&(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Preview"}),(0,a.jsx)("div",{className:"bg-muted/50 p-3 rounded-lg text-sm font-mono leading-relaxed max-h-32 overflow-y-auto",children:e.split("\n").map((e,s)=>(0,a.jsx)("div",{className:d("whitespace-pre-wrap",""===e.trim()&&"h-4"),children:e||" "},s))})]})]})]})}var eZ=t(2926);function eM(){let{serverConfig:e,isServerSetupComplete:s}=(0,M.m)();return s&&e?(0,a.jsxs)(f,{className:(()=>{switch(e.status){case"online":return"bg-green-600 hover:bg-green-700";case"offline":return"bg-red-600 hover:bg-red-700";case"checking":return"bg-blue-600 hover:bg-blue-700";default:return"bg-yellow-600 hover:bg-yellow-700"}})(),children:[(()=>{switch(e.status){case"online":return(0,a.jsx)(eZ.Z,{className:"h-3 w-3 mr-1 text-green-400"});case"offline":return(0,a.jsx)(et.Z,{className:"h-3 w-3 mr-1 text-red-400"});case"checking":return(0,a.jsx)(ea.Z,{className:"h-3 w-3 mr-1 text-blue-400 animate-spin"});default:return(0,a.jsx)(er.Z,{className:"h-3 w-3 mr-1 text-yellow-400"})}})(),e.status.charAt(0).toUpperCase()+e.status.slice(1)]}):(0,a.jsxs)(f,{variant:"secondary",className:"bg-zinc-800 text-zinc-400",children:[(0,a.jsx)(er.Z,{className:"h-3 w-3 mr-1"}),"No Server"]})}var eP=t(2883),eR=t(9322),eA=t(2934),eF=t(5287),eI=t(1817),eL=t(1094),eE=t(105);function eV(){let{currentText:e,selectedVoiceId:s,selectedEmotionId:t,voices:l,isProcessing:n,setProcessing:i,addGeneratedAudio:c,isServerSetupComplete:d,getVoiceSampleBlob:m,serverConfig:h}=(0,M.m)(),[p,g]=(0,r.useState)(0),[j,v]=(0,r.useState)(""),[N,b]=(0,r.useState)(null),[w,y]=(0,r.useState)(null),[z,k]=(0,r.useState)("generate"),[S,_]=(0,r.useState)(!1),C=(0,r.useRef)(null),U=(0,r.useRef)(null),T=(0,r.useRef)(0),Z=(0,r.useRef)([]),P=(0,r.useRef)(!1),R=l.find(e=>e.id===s),A=null==R?void 0:R.emotions.find(e=>e.id===t),F=e.trim()&&s&&!n&&d&&!S,I=async()=>{if(F&&h&&s){i(!0),b(null),y(null),v("Preparing voice model..."),g(20);try{v("Fetching voice sample...");let a=await m(s,t);if(!a)throw Error("Could not find the selected voice audio sample.");g(40);let r=new FormData;r.append("text",e),r.append("voice_file",new File([a],"voice_sample.wav")),v("Generating speech..."),g(60);let l=await fetch("".concat(h.url,"/single-speaker"),{method:"POST",body:r});if(!l.ok){let e=await l.text();throw Error("Server error: ".concat(l.status," - ").concat(e))}let n=await l.blob();await O(n)}catch(e){console.error("Audio generation failed:",e),b(e instanceof Error?e.message:"Failed to generate audio")}finally{i(!1),g(0),v("")}}},L=()=>{if(P.current||0===Z.current.length)return;P.current=!0;let e=U.current;if(!e){P.current=!1;return}let s=Z.current.shift();if(!s){P.current=!1;return}let t=e.createBufferSource();t.buffer=s,t.connect(e.destination);let a=e.currentTime,r=T.current<a?a:T.current;t.start(r),T.current=r+s.duration,t.onended=()=>{P.current=!1,L()}},E=async()=>{if(F&&h&&s){if(b(null),y(null),_(!0),v("Connecting to server..."),!U.current){let e=window.AudioContext||window.webkitAudioContext;U.current=new e}T.current=0,Z.current=[],P.current=!1;try{let a=await m(s,t);if(!a)throw Error("Voice sample not found.");let r=await o(a),l="".concat(h.url,"/single-speaker-stream?text=").concat(encodeURIComponent(e),"&voice_sample=").concat(encodeURIComponent(r));C.current=new EventSource(l),v("Streaming live audio...");let n=[];C.current.onmessage=async e=>{try{let t=JSON.parse(e.data),a=U.current;if("audio_chunk"===t.type&&a){let e=t.audio_data,s=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2)s[t/2]=parseInt(e.substr(t,2),16);n.push(s.buffer);let r=await a.decodeAudioData(s.buffer.slice(0));Z.current.push(r),L()}else if("complete"===t.type){var s;null===(s=C.current)||void 0===s||s.close();let e=new Blob(n,{type:"audio/wav"});await O(e,!0),y("Streaming completed successfully!"),setTimeout(()=>{var e;_(!1),y(null),null===(e=U.current)||void 0===e||e.close(),U.current=null},1e3)}else if("error"===t.type)throw Error(t.message)}catch(e){b("Stream processing error: ".concat(e instanceof Error?e.message:String(e))),D()}},C.current.onerror=()=>{b("Streaming connection failed. The server might be busy."),D()}}catch(e){b(e instanceof Error?e.message:"Failed to start streaming"),D()}}},D=()=>{var e,s;null===(e=C.current)||void 0===e||e.close(),C.current=null,null===(s=U.current)||void 0===s||s.close().then(()=>{U.current=null}),Z.current=[],P.current=!1,_(!1),v(""),N||(y("Streaming stopped"),setTimeout(()=>y(null),2e3))},O=async function(a){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];v("Finalizing audio..."),g(80);let l={id:crypto.randomUUID(),text:e,voiceId:s,emotionId:null!=t?t:void 0,audioUrl:eE.C.createObjectURL(a),createdAt:new Date};await c(l,a),v("Complete!"),g(100),y("Audio ".concat(r?"streamed":"generated"," successfully!")),setTimeout(()=>y(null),3e3)},B=e.trim().split(/\s+/).filter(Boolean).length;return(0,a.jsxs)(u,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eP.Z,{className:"h-5 w-5"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Audio Generation"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eZ.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(eM,{})]})]}),N&&(0,a.jsxs)(G,{className:"mb-4 border-destructive/50 text-destructive dark:border-destructive",children:[(0,a.jsx)(eR.Z,{className:"h-4 w-4"}),(0,a.jsx)(H,{children:N})]}),w&&(0,a.jsxs)(G,{className:"mb-4 border-green-500/50 text-green-700 dark:text-green-400 dark:border-green-500",children:[(0,a.jsx)(eA.Z,{className:"h-4 w-4"}),(0,a.jsx)(H,{children:w})]}),!d&&(0,a.jsxs)(G,{className:"mb-4 border-yellow-500/50 text-yellow-700 dark:text-yellow-400 dark:border-yellow-500",children:[(0,a.jsx)(eR.Z,{className:"h-4 w-4"}),(0,a.jsx)(H,{children:"Server setup required. Please complete the server configuration to generate audio."})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-3 block",children:"Generation Mode"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(x,{variant:"generate"===z?"default":"outline",size:"sm",onClick:()=>k("generate"),disabled:n||S,className:"flex-1",children:[(0,a.jsx)(eP.Z,{className:"h-4 w-4 mr-2"}),"Generate File"]}),(0,a.jsxs)(x,{variant:"stream"===z?"default":"outline",size:"sm",onClick:()=>k("stream"),disabled:n||S,className:"flex-1",children:[(0,a.jsx)(eF.Z,{className:"h-4 w-4 mr-2"}),"Stream Audio (Live)"]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"generate"===z?"Wait for the full audio file to be created.":"Play audio in real-time as it's being generated."})]}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Selected Voice"}),(0,a.jsx)("div",{className:"p-3 bg-muted/50 rounded-lg",children:R?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eC.Z,{className:"h-4 w-4 text-primary"}),(0,a.jsx)("span",{className:"font-medium",children:R.name})]}):(0,a.jsx)("span",{className:"text-muted-foreground text-sm",children:"No voice selected"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Emotion"}),(0,a.jsx)("div",{className:"p-3 bg-muted/50 rounded-lg",children:R?(0,a.jsx)(f,{variant:"outline",children:A?A.name:"Neutral"}):(0,a.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Estimated Time"}),(0,a.jsx)("div",{className:"p-3 bg-muted/50 rounded-lg",children:(0,a.jsx)("span",{className:"text-sm",children:"stream"===z?"Real-time playback":"".concat(Math.ceil(B/50),"s processing")})})]})]}),e.trim()&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Text Preview"}),(0,a.jsx)("div",{className:"p-3 bg-muted/50 rounded-lg max-h-24 overflow-y-auto",children:(0,a.jsx)("p",{className:"text-sm font-mono leading-relaxed",children:e.length>200?"".concat(e.substring(0,200),"..."):e})})]})]}),(n||S)&&(0,a.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eI.Z,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:j}),S&&(0,a.jsx)(f,{variant:"destructive",className:"animate-pulse ml-2",children:"LIVE"})]}),n&&(0,a.jsx)(V,{value:p,className:"w-full"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:S?"Audio is playing live as it is generated...":"This may take a few moments depending on text length..."})]}),(0,a.jsx)("div",{className:"flex gap-3",children:"generate"===z?(0,a.jsx)(x,{onClick:I,disabled:!F,className:"flex-1 gap-2",size:"lg",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eI.Z,{className:"h-4 w-4 animate-spin"}),"Generating..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eP.Z,{className:"h-4 w-4"}),"Generate Speech"]})}):(0,a.jsx)(a.Fragment,{children:S?(0,a.jsxs)(x,{onClick:D,variant:"destructive",className:"flex-1 gap-2",size:"lg",children:[(0,a.jsx)(eL.Z,{className:"h-4 w-4"}),"Stop Stream"]}):(0,a.jsxs)(x,{onClick:E,disabled:!F,className:"flex-1 gap-2",size:"lg",children:[(0,a.jsx)(eF.Z,{className:"h-4 w-4"}),"Start Streaming"]})})}),!F&&!n&&!S&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2",children:"Requirements:"}),(0,a.jsxs)("ul",{className:"text-sm space-y-1",children:[(0,a.jsxs)("li",{className:"flex items-center gap-2 ".concat(e.trim()?"text-green-600 dark:text-green-400":"text-muted-foreground"),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.trim()?"bg-green-500":"bg-muted-foreground")}),"Enter text to convert"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2 ".concat(s?"text-green-600 dark:text-green-400":"text-muted-foreground"),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(s?"bg-green-500":"bg-muted-foreground")}),"Select a voice from sidebar"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2 ".concat(d?"text-green-600 dark:text-green-400":"text-muted-foreground"),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(d?"bg-green-500":"bg-muted-foreground")}),"Complete server setup"]})]})]})]})}var eD=t(3586);function eG(e){let{className:s,defaultValue:t,value:l,min:n=0,max:i=100,...c}=e,o=r.useMemo(()=>Array.isArray(l)?l:Array.isArray(t)?t:[n,i],[l,t,n,i]);return(0,a.jsxs)(eD.fC,{"data-slot":"slider",defaultValue:t,value:l,min:n,max:i,className:d("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",s),...c,children:[(0,a.jsx)(eD.fQ,{"data-slot":"slider-track",className:"bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5",children:(0,a.jsx)(eD.e6,{"data-slot":"slider-range",className:"bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full"})}),Array.from({length:o.length},(e,s)=>(0,a.jsx)(eD.bU,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},s))]})}var eH=t(2735);function eO(e){let{audioUrl:s,audioId:t,text:l,className:n}=e,[i,c]=(0,r.useState)(!1),[o,m]=(0,r.useState)(0),[h,p]=(0,r.useState)(0),[g,j]=(0,r.useState)([1]),[v,f]=(0,r.useState)(Array(32).fill(0)),N=(0,r.useRef)(null),b=(0,r.useRef)();(0,r.useEffect)(()=>{let e=N.current;if(!e)return;let s=()=>p(e.duration),t=()=>m(e.currentTime),a=()=>c(!1),r=()=>c(!0),l=()=>c(!1);return e.addEventListener("loadedmetadata",s),e.addEventListener("timeupdate",t),e.addEventListener("ended",a),e.addEventListener("play",r),e.addEventListener("pause",l),()=>{e.removeEventListener("loadedmetadata",s),e.removeEventListener("timeupdate",t),e.removeEventListener("ended",a),e.removeEventListener("play",r),e.removeEventListener("pause",l)}},[]),(0,r.useEffect)(()=>{if(i){let e=()=>{f(Array.from({length:32},()=>100*Math.random())),b.current=requestAnimationFrame(e)};e()}else b.current&&cancelAnimationFrame(b.current),f(Array(32).fill(0));return()=>{b.current&&cancelAnimationFrame(b.current)}},[i]);let w=async()=>{let e=N.current;if(e){if(i)e.pause();else try{await e.play()}catch(e){console.error("Failed to play audio:",e)}}},y=e=>"".concat(Math.floor(e/60),":").concat(Math.floor(e%60).toString().padStart(2,"0"));return(0,a.jsxs)(u,{className:d("p-4",n),children:[(0,a.jsx)("audio",{ref:N,src:s,preload:"metadata"}),(0,a.jsx)("div",{className:"mb-4 p-3 bg-muted/50 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm font-mono leading-relaxed line-clamp-2",children:l})}),(0,a.jsxs)("div",{className:"mb-4 p-4 bg-black/5 dark:bg-white/5 rounded-lg",children:[(0,a.jsx)("div",{className:"flex items-center gap-1 h-16 justify-center",children:v.map((e,s)=>(0,a.jsx)("div",{className:"bg-primary/70 rounded-sm transition-all duration-75 ease-out",style:{width:"4px",height:"".concat(Math.max(2,.6*e),"px"),opacity:i?1:.3}},s))}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-2",children:[(0,a.jsx)(eg.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:i?"Playing":"Ready"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eG,{value:[h>0?o/h*100:0],onValueChange:e=>{let s=N.current;if(!s)return;let t=e[0]/100*h;s.currentTime=t,m(t)},max:100,step:.1,className:"w-full",disabled:0===h}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:y(o)}),(0,a.jsx)("span",{children:y(h)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(x,{onClick:w,disabled:0===h,size:"sm",className:"gap-2",children:[i?(0,a.jsx)(ef.Z,{className:"h-4 w-4"}):(0,a.jsx)(eN.Z,{className:"h-4 w-4"}),i?"Pause":"Play"]}),(0,a.jsxs)(x,{onClick:()=>{let e=document.createElement("a");e.href=s,e.download="tts-audio-".concat(t,".wav"),document.body.appendChild(e),e.click(),document.body.removeChild(e)},variant:"outline",size:"sm",className:"gap-2 bg-transparent",children:[(0,a.jsx)(eH.Z,{className:"h-4 w-4"}),"Download"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[(0,a.jsx)(eC.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(eG,{value:g,onValueChange:e=>{let s=N.current;s&&(j(e),s.volume=e[0])},max:1,step:.1,className:"w-20"})]})]})]})]})}var eB=t(5621);function eW(){let{generatedAudios:e,voices:s,removeGeneratedAudio:t}=(0,M.m)(),r=async e=>{if(confirm("Are you sure you want to delete this audio?"))try{await t(e)}catch(e){console.error("Failed to delete audio:",e)}};return 0===e.length?(0,a.jsxs)(u,{className:"p-6 text-center",children:[(0,a.jsx)(eB.Z,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No generated audio yet"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Generated audio will appear here"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eB.Z,{className:"h-5 w-5"}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Generated Audio"}),(0,a.jsx)(f,{variant:"secondary",children:e.length})]}),e.length>1&&(0,a.jsxs)(x,{onClick:()=>{e.forEach(e=>{let s=document.createElement("a");s.href=e.audioUrl,s.download="tts-".concat(e.id,".wav"),document.body.appendChild(s),s.click(),document.body.removeChild(s)})},variant:"outline",size:"sm",className:"gap-2",children:[(0,a.jsx)(eH.Z,{className:"h-4 w-4"}),"Download All"]})]}),(0,a.jsx)("div",{className:"space-y-4",children:e.slice().reverse().map(e=>{let t=s.find(s=>s.id===e.voiceId),l=null==t?void 0:t.emotions.find(s=>s.id===e.emotionId);return(0,a.jsxs)("div",{className:"space-y-2 p-4 rounded-lg border bg-background",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eC.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:(null==t?void 0:t.name)||"Unknown Voice"}),l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:l.name})]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:new Date(e.createdAt).toLocaleString()})]}),(0,a.jsx)(x,{onClick:()=>r(e.id),variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-muted-foreground hover:text-destructive",children:(0,a.jsx)(ev.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)(eO,{audioUrl:e.audioUrl,audioId:e.id,text:e.text})]},e.id)})}),e.length>0&&(0,a.jsx)(u,{className:"p-4 bg-muted/50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{children:["Total: ",e.length," audio files"]}),(0,a.jsxs)("span",{children:["Storage: ~",Math.round(1.2*e.length),"MB estimated"]})]})})]})}var eq=t(1818);function eY(e){let{delayDuration:s=0,...t}=e;return(0,a.jsx)(eq.zt,{"data-slot":"tooltip-provider",delayDuration:s,...t})}function e$(e){let{...s}=e;return(0,a.jsx)(eY,{children:(0,a.jsx)(eq.fC,{"data-slot":"tooltip",...s})})}function eQ(e){let{...s}=e;return(0,a.jsx)(eq.xz,{"data-slot":"tooltip-trigger",...s})}function eX(e){let{className:s,sideOffset:t=0,children:r,...l}=e;return(0,a.jsx)(eq.h_,{children:(0,a.jsxs)(eq.VY,{"data-slot":"tooltip-content",sideOffset:t,className:d("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",s),...l,children:[r,(0,a.jsx)(eq.Eh,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var eK=t(6362);function eJ(){var e;let{hardwareInfo:s,serverConfig:l,serverSetupStep:n,isServerSetupComplete:i,checkHardware:c,setServerConfig:d,checkServerHealth:o,setServerSetupStep:m}=(0,M.m)(),[v,b]=(0,r.useState)(""),[y,k]=(0,r.useState)(""),[S,_]=(0,r.useState)(!1),[C,U]=(0,r.useState)(null),[T,Z]=(0,r.useState)(null),[P,R]=(0,r.useState)(null),[A,F]=(0,r.useState)(null),[I,L]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s||"hardware-check"!==n?s&&"hardware-check"===n&&m({local:"server-download",remote:"url-input",runpod:"runpod-deploy"}[s.recommendedSetup]||"url-input"):c()},[s,n,c]),(0,r.useEffect)(()=>{if(s&&!P){let e=new(t(2682)).Yg;e.setProgressCallback(U),R(e)}},[s,P]),(0,r.useEffect)(()=>{let e;if(P&&(C||(null==l?void 0:l.type)==="local")){let s=async()=>{try{let e=await P.getServerInfo();F(e)}catch(e){console.error("Failed to get server info:",e)}};s(),e=setInterval(s,3e3)}return()=>{e&&clearInterval(e)}},[P,C,l]);let E=async()=>{if(!v.trim())return;let e=function(e){try{let s=new URL(e);if(!["http:","https:"].includes(s.protocol))return{isValid:!1,error:"URL must use HTTP or HTTPS protocol"};if(!s.hostname)return{isValid:!1,error:"URL must have a valid hostname"};let t="".concat(s.protocol,"//").concat(s.hostname).concat(s.port?":".concat(s.port):"");return{isValid:!0,normalizedUrl:t}}catch(e){return{isValid:!1,error:"Invalid URL format"}}}(v.trim());if(!e.isValid){alert(e.error||"Invalid URL format. Please enter a valid HTTP/HTTPS URL.");return}_(!0);try{let s={type:"remote",url:e.normalizedUrl,status:"checking"};await d(s),await o()?M.m.setState({isServerSetupComplete:!0,serverSetupStep:"complete"}):alert("Server is not reachable. Please check the URL and try again.")}catch(e){alert("Failed to connect to server. Please check the URL and try again.")}finally{_(!1)}},D=async()=>{if(y.trim()){Z({stage:"validating",progress:0,message:"Validating API key..."});try{var e,s;let{RunPodManager:a}=await Promise.resolve().then(t.bind(t,9782)),r=new a(y.trim());if(r.setProgressCallback(Z),!await r.validateApiKey())throw Error("Invalid RunPod API key or insufficient credits");Z({stage:"creating",progress:25,message:"Creating RunPod instance..."});let l=await r.deployTTSServer("tts-server-"+Date.now());Z({stage:"ready",progress:100,message:"RunPod instance is ready!",podId:l.podId});let n={type:"runpod",url:l.url,status:"checking"};if(await d(n),(null===(s=window.pywebview)||void 0===s?void 0:null===(e=s.api)||void 0===e?void 0:e.set_active_runpod_instance)&&window.pywebview.api.set_active_runpod_instance(y.trim(),l.podId),await o())M.m.setState({isServerSetupComplete:!0,serverSetupStep:"complete"});else throw Error("RunPod server is not responding")}catch(e){Z({stage:"error",progress:0,message:"Deployment failed",error:e instanceof Error?e.message:"Unknown error"})}}},O=async()=>{if(P&&s)try{await P.setupLocalServer();let e=async()=>{if((await P.getServerInfo()).isRunning){let e={type:"local",url:P.getServerUrl(),status:"checking"};await d(e),await o()&&(M.m.setState({isServerSetupComplete:!0,serverSetupStep:"complete"}),U(null))}};setTimeout(e,2e3)}catch(e){console.error("Local server setup failed:",e),U({stage:"error",progress:0,message:"Setup failed",error:e instanceof Error?e.message:"Unknown error"})}},B=async()=>{if(P)try{await P.startServer(),setTimeout(async()=>{let e=await P.getServerInfo();if(F(e),e.isRunning){let e={type:"local",url:P.getServerUrl(),status:"checking"};await d(e),await o()}},1e3)}catch(e){console.error("Failed to start local server:",e)}},W=async()=>{if(P)try{await P.stopServer(),setTimeout(async()=>{let e=await P.getServerInfo();F(e)},1e3)}catch(e){console.error("Failed to stop local server:",e)}},q=()=>{P&&(P.cancelSetup(),U(null)),T&&"error"!==T.stage&&Z(null)},Y=async()=>{if(P){L(!0);try{let e=await P.getServerInfo();F(e)}catch(e){console.error("Failed to refresh server info:",e)}finally{L(!1)}}};return i?null:(0,a.jsx)(eY,{children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(u,{className:"w-full max-w-3xl bg-zinc-900 border-zinc-800 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(h,{children:[(0,a.jsxs)(p,{className:"text-white flex items-center gap-2",children:[(0,a.jsx)(el.Z,{className:"h-5 w-5"}),"Server Setup Required"]}),(0,a.jsx)(g,{className:"text-zinc-400",children:"Configure your TTS server to get started. This setup ensures optimal performance based on your hardware."})]}),(0,a.jsxs)(j,{className:"space-y-6",children:["hardware-check"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eI.Z,{className:"h-4 w-4 animate-spin text-blue-400"}),(0,a.jsx)("span",{className:"text-white",children:"Analyzing hardware capabilities..."})]}),(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"This may take a few moments while we detect your system specifications."})]}),s&&"hardware-check"!==n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-white font-medium",children:"Hardware Detection Results"}),(0,a.jsxs)(f,{variant:s.hasGPU?"default":"secondary",children:[null===(e=s.recommendedSetup)||void 0===e?void 0:e.toUpperCase()," SETUP"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsxs)(e$,{children:[(0,a.jsx)(eQ,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)(el.Z,{className:"h-4 w-4 text-zinc-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"System"}),(0,a.jsxs)(f,{variant:"outline",children:[s.os," ",s.arch]})]})]})}),(0,a.jsx)(eX,{children:(0,a.jsx)("p",{children:"Operating system and architecture"})})]}),(0,a.jsxs)(e$,{children:[(0,a.jsx)(eQ,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)(em.Z,{className:"h-4 w-4 text-zinc-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"GPUs Found"}),(0,a.jsx)(f,{variant:s.hasGPU?"default":"secondary",children:s.gpus.length})]})]})}),(0,a.jsx)(eX,{children:(0,a.jsx)("p",{children:"Number of detected graphics processing units"})})]}),(0,a.jsxs)(e$,{children:[(0,a.jsx)(eQ,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4 text-zinc-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Total VRAM"}),(0,a.jsxs)(f,{variant:s.totalVRAM>=8?"default":"secondary",children:[s.totalVRAM,"GB"]})]})]})}),(0,a.jsx)(eX,{children:(0,a.jsx)("p",{children:"Total video memory across all GPUs. Minimum 8GB recommended for local setup."})})]})]}),s.gpus.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Detected GPUs:"}),s.gpus.map((e,s)=>(0,a.jsxs)(e$,{children:[(0,a.jsx)(eQ,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(eu.Z,{className:"h-4 w-4 ".concat(e.isSupported?"text-green-400":"text-red-400")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:e.model}),(0,a.jsxs)("span",{className:"text-zinc-400 text-xs ml-2",children:["(",e.vendor,")"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(f,{variant:e.isSupported?"default":"secondary",children:[e.vramGB,"GB"]}),(0,a.jsx)(f,{variant:e.isSupported?"default":"destructive",children:e.isSupported?"Supported":"Insufficient"})]})]})}),(0,a.jsxs)(eX,{children:[(0,a.jsxs)("p",{children:["Performance Score: ",e.performanceScore,"/100"]}),(0,a.jsx)("p",{children:e.isSupported?"This GPU meets the minimum requirements for local TTS processing":"This GPU doesn't meet the minimum 8GB VRAM requirement"})]})]},s))]}),(0,a.jsxs)(G,{className:"border-".concat("local"===s.recommendedSetup?"green":"remote"===s.recommendedSetup?"yellow":"blue","-800"),children:[(0,a.jsx)(eR.Z,{className:"h-4 w-4"}),(0,a.jsxs)(H,{className:"text-zinc-300",children:[(0,a.jsx)("strong",{children:"Recommendation:"})," ","local"===s.recommendedSetup?"Your hardware is excellent for local TTS processing. We recommend downloading the local server for optimal performance and privacy.":"remote"===s.recommendedSetup?"Your hardware can handle TTS but may benefit from a remote server for better performance. You can try local setup or use a custom server.":"Your hardware is insufficient for local TTS processing. We recommend using RunPod cloud deployment for optimal performance with high-end GPUs."]})]})]}),"server-download"===n&&s&&(0,a.jsxs)("div",{className:"space-y-4",children:[A&&(0,a.jsxs)(u,{className:"bg-zinc-800 border-zinc-700",children:[(0,a.jsx)(h,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(p,{className:"text-sm text-white",children:"Local Server Status"}),(0,a.jsx)(x,{variant:"ghost",size:"sm",onClick:Y,disabled:I,className:"text-zinc-400 hover:text-white",children:I?(0,a.jsx)(eI.Z,{className:"h-3 w-3 animate-spin"}):"Refresh"})]})}),(0,a.jsxs)(j,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Installation"}),(0,a.jsx)(f,{variant:A.isInstalled?"default":"secondary",children:A.isInstalled?"Installed":"Not Installed"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Status"}),(0,a.jsx)(f,{variant:A.isRunning?"default":"secondary",children:A.isRunning?"Running":"Stopped"})]}),A.version&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Version"}),(0,a.jsx)("span",{className:"text-white text-sm",children:A.version})]}),A.pid&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"PID"}),(0,a.jsx)("span",{className:"text-white text-sm",children:A.pid})]})]}),A.isInstalled&&(0,a.jsx)("div",{className:"flex gap-2",children:A.isRunning?(0,a.jsxs)(x,{variant:"destructive",size:"sm",onClick:W,className:"flex items-center gap-1",children:[(0,a.jsx)(eL.Z,{className:"h-3 w-3"}),"Stop Server"]}):(0,a.jsxs)(x,{variant:"default",size:"sm",onClick:B,className:"flex items-center gap-1 bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(eN.Z,{className:"h-3 w-3"}),"Start Server"]})})]})]}),C&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["error"===C.stage?(0,a.jsx)(eR.Z,{className:"h-4 w-4 text-red-400"}):"complete"===C.stage?(0,a.jsx)(es.Z,{className:"h-4 w-4 text-green-400"}):(0,a.jsx)(eI.Z,{className:"h-4 w-4 animate-spin text-blue-400"}),(0,a.jsx)("span",{className:"text-white text-sm",children:C.message})]}),"error"!==C.stage&&"complete"!==C.stage&&(0,a.jsx)(x,{variant:"ghost",size:"sm",onClick:q,className:"text-zinc-400 hover:text-red-400",children:(0,a.jsx)(z.Z,{className:"h-4 w-4"})})]}),"error"!==C.stage&&"complete"!==C.stage&&(0,a.jsx)(V,{value:C.progress,className:"w-full"}),C.error&&(0,a.jsxs)(G,{className:"border-red-800",children:[(0,a.jsx)(eR.Z,{className:"h-4 w-4"}),(0,a.jsx)(H,{className:"text-red-400",children:C.error})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(x,{onClick:O,disabled:!!C&&"error"!==C.stage&&"complete"!==C.stage,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:C&&"error"!==C.stage&&"complete"!==C.stage?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eI.Z,{className:"h-4 w-4 animate-spin mr-2"}),"downloading"===C.stage?"Downloading...":"extracting"===C.stage?"Extracting...":"installing"===C.stage?"Installing...":"starting"===C.stage?"Starting...":"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eH.Z,{className:"h-4 w-4 mr-2"}),(null==A?void 0:A.isInstalled)?"Start Local Server":"Download & Setup Server"]})}),(0,a.jsx)(x,{variant:"outline",onClick:()=>m("url-input"),className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",disabled:!!C&&"error"!==C.stage&&"complete"!==C.stage,children:"Use Custom Server"})]})]}),"url-input"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[s&&(!s.hasGPU||s.totalVRAM<8)&&(0,a.jsxs)("div",{className:"p-4 bg-yellow-900/20 border border-yellow-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(eR.Z,{className:"h-4 w-4 text-yellow-400"}),(0,a.jsx)("span",{className:"text-yellow-400 font-medium",children:"Hardware Insufficient"})]}),(0,a.jsx)("p",{className:"text-zinc-300 text-sm",children:"Your system doesn't meet the minimum requirements (GPU with 8GB+ VRAM). Please provide a server URL or deploy to RunPod."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(w,{htmlFor:"server-url",className:"text-white",children:"Server URL"}),(0,a.jsx)(N,{id:"server-url",value:v,onChange:e=>b(e.target.value),placeholder:"https://your-server.com:8000",className:"bg-zinc-800 border-zinc-700 text-white"}),(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Enter the URL of your TTS server (e.g., http://localhost:8000 or https://remote-server.com)"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(x,{onClick:E,disabled:!v.trim()||S,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eI.Z,{className:"h-4 w-4 animate-spin mr-2"}),"Checking Connection..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(el.Z,{className:"h-4 w-4 mr-2"}),"Connect to Server"]})}),(0,a.jsx)(x,{variant:"outline",onClick:()=>m("runpod-deploy"),className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:"Deploy to RunPod"}),(null==s?void 0:s.recommendedSetup)==="local"&&(0,a.jsx)(x,{variant:"outline",onClick:()=>m("server-download"),className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:"Back to Local Setup"})]})]}),"runpod-deploy"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-blue-900/20 border border-blue-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(eK.Z,{className:"h-4 w-4 text-blue-400"}),(0,a.jsx)("span",{className:"text-blue-400 font-medium",children:"RunPod Cloud Deployment"})]}),(0,a.jsx)("p",{className:"text-zinc-300 text-sm mb-3",children:"Deploy a high-performance TTS server with 24GB+ VRAM GPU (RTX 5090, RTX 4090, or similar) on RunPod. Costs approximately $0.50-2.00/hour."}),(0,a.jsxs)("a",{href:"https://www.runpod.io/console/user/settings/api-keys",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-400 hover:underline text-sm",children:[(0,a.jsx)(eK.Z,{className:"h-3 w-3"}),"Get your RunPod API key here"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(w,{htmlFor:"runpod-key",className:"text-white",children:"RunPod API Key"}),(0,a.jsx)(N,{id:"runpod-key",type:"password",value:y,onChange:e=>k(e.target.value),placeholder:"Enter your RunPod API key",className:"bg-zinc-800 border-zinc-700 text-white"}),(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Your API key is used to deploy and manage the server instance. It's stored securely and only used for deployment."})]}),T&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["error"===T.stage?(0,a.jsx)(eR.Z,{className:"h-4 w-4 text-red-400"}):"ready"===T.stage?(0,a.jsx)(es.Z,{className:"h-4 w-4 text-green-400"}):(0,a.jsx)(eI.Z,{className:"h-4 w-4 animate-spin text-blue-400"}),(0,a.jsx)("span",{className:"text-white text-sm",children:T.message})]}),"error"!==T.stage&&"ready"!==T.stage&&(0,a.jsx)(x,{variant:"ghost",size:"sm",onClick:q,className:"text-zinc-400 hover:text-red-400",children:(0,a.jsx)(z.Z,{className:"h-4 w-4"})})]}),"error"!==T.stage&&"ready"!==T.stage&&(0,a.jsx)(V,{value:T.progress,className:"w-full"}),T.error&&(0,a.jsxs)(G,{className:"border-red-800",children:[(0,a.jsx)(eR.Z,{className:"h-4 w-4"}),(0,a.jsx)(H,{className:"text-red-400",children:T.error})]}),T.podId&&(0,a.jsxs)("div",{className:"p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Pod ID"}),(0,a.jsx)("div",{className:"text-white font-mono text-xs break-all",children:T.podId})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(x,{onClick:D,disabled:!y.trim()||!!T&&"error"!==T.stage&&"ready"!==T.stage,className:"flex-1 bg-green-600 hover:bg-green-700",children:T&&"error"!==T.stage&&"ready"!==T.stage?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eI.Z,{className:"h-4 w-4 animate-spin mr-2"}),T.stage.charAt(0).toUpperCase()+T.stage.slice(1),"..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eu.Z,{className:"h-4 w-4 mr-2"}),"Deploy to RunPod"]})}),(0,a.jsx)(x,{variant:"outline",onClick:()=>m("url-input"),className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",disabled:!!T&&"error"!==T.stage&&"ready"!==T.stage,children:"Use Custom Server"}),(null==s?void 0:s.recommendedSetup)==="local"&&(0,a.jsx)(x,{variant:"outline",onClick:()=>m("server-download"),className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",disabled:!!T&&"error"!==T.stage&&"ready"!==T.stage,children:"Try Local Setup"})]}),(null==T?void 0:T.stage)==="creating"&&(0,a.jsxs)(G,{className:"border-blue-800 bg-blue-900/20",children:[(0,a.jsx)(eR.Z,{className:"h-4 w-4 text-blue-400"}),(0,a.jsxs)(H,{className:"text-blue-300",children:[(0,a.jsx)("strong",{children:"Cost Estimate:"})," High-end GPU instances cost approximately $0.50-$2.00/hour. The app will automatically terminate the instance when you close it to save costs."]})]})]}),"complete"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-green-900/20 border border-green-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(es.Z,{className:"h-5 w-5 text-green-400"}),(0,a.jsx)("span",{className:"text-green-400 font-medium text-lg",children:"Setup Complete!"})]}),(0,a.jsx)("p",{className:"text-zinc-300",children:"Your TTS server is now running and ready to generate speech. You can now start using voice cloning features."})]}),l&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Server Type"}),(0,a.jsx)("div",{className:"text-white font-medium",children:"local"===l.type?"Local Server":"runpod"===l.type?"RunPod Cloud":"Remote Server"})]}),(0,a.jsxs)("div",{className:"p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Status"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),(0,a.jsx)("span",{className:"text-green-400 font-medium",children:"Online"})]})]})]}),(0,a.jsxs)("div",{className:"p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400 mb-1",children:"Server URL"}),(0,a.jsx)("div",{className:"text-white font-mono text-sm bg-zinc-900 p-2 rounded break-all",children:l.url})]}),"runpod"===l.type&&(0,a.jsxs)(G,{className:"border-yellow-800 bg-yellow-900/20",children:[(0,a.jsx)(eR.Z,{className:"h-4 w-4 text-yellow-400"}),(0,a.jsxs)(H,{className:"text-yellow-300",children:[(0,a.jsx)("strong",{children:"Remember:"})," Your RunPod instance is running and incurring costs. The app will automatically terminate it when you close the application."]})]})]}),(0,a.jsx)(x,{onClick:()=>{M.m.setState({isServerSetupComplete:!0})},className:"w-full bg-blue-600 hover:bg-blue-700",children:"Start Using Voice Cloning"})]}),l&&"complete"!==n&&(0,a.jsxs)("div",{className:"p-4 bg-zinc-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-zinc-300 font-medium",children:"Current Server"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(f,{variant:"online"===l.status?"default":"checking"===l.status?"secondary":"destructive",className:"online"===l.status?"bg-green-600 text-white":"checking"===l.status?"bg-yellow-600 text-white":"bg-red-600 text-white",children:["online"===l.status&&(0,a.jsx)(es.Z,{className:"h-3 w-3 mr-1"}),"checking"===l.status&&(0,a.jsx)(eI.Z,{className:"h-3 w-3 mr-1 animate-spin"}),"offline"===l.status&&(0,a.jsx)(eR.Z,{className:"h-3 w-3 mr-1"}),l.status.toUpperCase()]}),(0,a.jsx)(f,{variant:"outline",className:"border-zinc-600 text-zinc-300",children:l.type.toUpperCase()})]})]}),(0,a.jsx)("div",{className:"text-sm text-zinc-400 font-mono bg-zinc-900 p-2 rounded break-all",children:l.url}),l.lastChecked&&(0,a.jsxs)("div",{className:"text-xs text-zinc-500 mt-1",children:["Last checked:"," ",l.lastChecked.toLocaleTimeString()]})]}),((null==C?void 0:C.stage)==="error"||(null==T?void 0:T.stage)==="error")&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(G,{className:"border-red-800",children:[(0,a.jsx)(eR.Z,{className:"h-4 w-4"}),(0,a.jsxs)(H,{className:"text-red-300",children:[(0,a.jsx)("strong",{children:"Setup Failed:"})," ",(null==C?void 0:C.error)||(null==T?void 0:T.error)]})]}),(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:(0,a.jsx)("strong",{children:"Troubleshooting Options:"})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(null==C?void 0:C.stage)==="error"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(x,{variant:"outline",onClick:O,className:"justify-start border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:[(0,a.jsx)(eH.Z,{className:"h-4 w-4 mr-2"}),"Retry Local Setup"]}),(0,a.jsxs)(x,{variant:"outline",onClick:()=>m("url-input"),className:"justify-start border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:[(0,a.jsx)(el.Z,{className:"h-4 w-4 mr-2"}),"Use Custom Server Instead"]})]}),(null==T?void 0:T.stage)==="error"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(x,{variant:"outline",onClick:()=>{Z(null),k("")},className:"justify-start border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:[(0,a.jsx)(eu.Z,{className:"h-4 w-4 mr-2"}),"Retry RunPod Deployment"]}),(0,a.jsxs)(x,{variant:"outline",onClick:()=>m("url-input"),className:"justify-start border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:[(0,a.jsx)(el.Z,{className:"h-4 w-4 mr-2"}),"Use Custom Server Instead"]})]}),(0,a.jsxs)(x,{variant:"outline",onClick:()=>m("runpod-deploy"),className:"justify-start border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:[(0,a.jsx)(eK.Z,{className:"h-4 w-4 mr-2"}),"Try Different Cloud Option"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-zinc-800",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors ".concat("hardware-check"===n?"bg-blue-400":["server-download","server-start","url-input","runpod-deploy","complete"].includes(n)?"bg-green-400":"bg-zinc-600")}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors ".concat(["server-download","server-start"].includes(n)?"bg-blue-400":["url-input","runpod-deploy","complete"].includes(n)?"bg-green-400":"bg-zinc-600")}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors ".concat(["url-input","runpod-deploy"].includes(n)?"bg-blue-400":"complete"===n?"bg-green-400":"bg-zinc-600")}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors ".concat("complete"===n?"bg-green-400":"bg-zinc-600")})]}),(0,a.jsxs)("div",{className:"text-xs text-zinc-500",children:["hardware-check"===n&&"Analyzing Hardware",["server-download","server-start"].includes(n)&&"Setting up Local Server",["url-input","runpod-deploy"].includes(n)&&"Configuring Server","complete"===n&&"Setup Complete"]})]}),!1]})]})})})}function e0(){let{isLoading:e}=(0,M.m)();return e?(0,a.jsx)("div",{className:"flex h-screen bg-background grid-pattern items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(eI.Z,{className:"h-6 w-6 animate-spin"}),(0,a.jsx)("span",{className:"text-lg",children:"Loading DeepFak3r..."})]})}):(0,a.jsxs)("div",{className:"flex h-screen bg-background grid-pattern",children:[(0,a.jsx)(eb,{}),(0,a.jsx)("main",{className:"flex-1 p-6 overflow-y-auto",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"DeepFak3r Voice Changer"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Upload voice samples, add emotional variations, and generate natural-sounding speech"})]}),(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(eT,{}),(0,a.jsx)(eV,{})]}),(0,a.jsx)(eW,{})]})]})}),(0,a.jsx)(eJ,{})]})}}},function(e){e.O(0,[961,881,971,117,744],function(){return e(e.s=5573)}),_N_E=e.O()}]);