(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5573:function(e,s,t){Promise.resolve().then(t.bind(t,6266))},6266:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return su}});var a=t(7437),r=t(2265),n=t(7053),l=t(535),i=t(1994),c=t(3335);function o(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,c.m6)((0,i.W)(s))}let d=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function m(e){let{className:s,variant:t,size:r,asChild:l=!1,...i}=e,c=l?n.g7:"button";return(0,a.jsx)(c,{"data-slot":"button",className:o(d({variant:t,size:r,className:s})),...i})}function u(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:o("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function x(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:o("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function h(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:o("leading-none font-semibold",s),...t})}function p(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:o("text-muted-foreground text-sm",s),...t})}function g(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:o("px-6",s),...t})}let v=(0,l.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function f(e){let{className:s,variant:t,asChild:r=!1,...l}=e,i=r?n.g7:"span";return(0,a.jsx)(i,{"data-slot":"badge",className:o(v({variant:t}),s),...l})}function j(e){let{className:s,type:t,...r}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:o("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...r})}var N=t(6394);function b(e){let{className:s,...t}=e;return(0,a.jsx)(N.f,{"data-slot":"label",className:o("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...t})}var w=t(9027),y=t(2489);function z(e){let{...s}=e;return(0,a.jsx)(w.fC,{"data-slot":"dialog",...s})}function k(e){let{...s}=e;return(0,a.jsx)(w.xz,{"data-slot":"dialog-trigger",...s})}function S(e){let{...s}=e;return(0,a.jsx)(w.h_,{"data-slot":"dialog-portal",...s})}function _(e){let{className:s,...t}=e;return(0,a.jsx)(w.aV,{"data-slot":"dialog-overlay",className:o("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...t})}function C(e){let{className:s,children:t,showCloseButton:r=!0,...n}=e;return(0,a.jsxs)(S,{"data-slot":"dialog-portal",children:[(0,a.jsx)(_,{}),(0,a.jsxs)(w.VY,{"data-slot":"dialog-content",className:o("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...n,children:[t,r&&(0,a.jsxs)(w.x8,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(y.Z,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function Z(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:o("flex flex-col gap-2 text-center sm:text-left",s),...t})}function U(e){let{className:s,...t}=e;return(0,a.jsx)(w.Dx,{"data-slot":"dialog-title",className:o("text-lg leading-none font-semibold",s),...t})}var R=t(2097),T=t(9397),A=t(8662),P=t(1101),M=t(7689),L=t(4501);function F(e){let{className:s}=e,{addVoice:t}=(0,R.m)(),[n,l]=(0,r.useState)(!1),[i,c]=(0,r.useState)(!1),[d,x]=(0,r.useState)(""),[h,p]=(0,r.useState)(null),[g,v]=(0,r.useState)([]),[N,w]=(0,r.useState)(!1),[S,_]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(0,L.Vt)().then(e=>_(e)).catch(()=>_(!1))},[S]);let F=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?c(!0):"dragleave"===e.type&&c(!1)},[]),E=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),c(!1);let s=Array.from(e.dataTransfer.files).filter(e=>"audio/mp3"===e.type||"audio/wav"===e.type||"audio/mpeg"===e.type);!(s.length>0)||h||(p(s[0]),d||x(s[0].name.replace(/\.[^/.]+$/,"")))},[h,d]),I=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(S)try{let t=await window.pywebview.api.select_audio_file();if(t&&t.success&&t.file_data){let a=atob(t.file_data),r=Array(a.length);for(let e=0;e<a.length;e++)r[e]=a.charCodeAt(e);let n=new Uint8Array(r),l=new File([n],t.filename,{type:t.mime_type});e&&s>=0?D(s,l):(p(l),d||x(t.filename.replace(/\.[^/.]+$/,"")))}}catch(e){console.error("Error selecting file:",e)}},D=(e,s)=>{v(t=>t.map((t,a)=>a===e?{...t,file:s}:t))},V=e=>{v(s=>s.filter((s,t)=>t!==e))},G=(e,s)=>{v(t=>t.map((t,a)=>a===e?{...t,name:s}:t))},O=async()=>{if(d.trim()&&h){w(!0);try{let e=URL.createObjectURL(h),s=g.filter(e=>e.name.trim()&&e.file).map((e,s)=>({id:"".concat(Date.now(),"-").concat(s),name:e.name.trim(),audioFile:e.file,audioUrl:e.file?URL.createObjectURL(e.file):null}));t({name:d.trim(),mainAudio:h,mainAudioUrl:e,emotions:s}),x(""),p(null),v([]),l(!1)}catch(e){console.error("Error uploading voice:",e)}finally{w(!1)}}},X=()=>{x(""),p(null),v([]),c(!1)};return(0,a.jsxs)(z,{open:n,onOpenChange:e=>{l(e),e||X()},children:[(0,a.jsx)(k,{asChild:!0,children:(0,a.jsxs)(m,{className:o("gap-2",s),children:[(0,a.jsx)(T.Z,{className:"h-4 w-4"}),"Upload Voice"]})}),(0,a.jsxs)(C,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(Z,{children:(0,a.jsxs)(U,{className:"flex items-center gap-2",children:[(0,a.jsx)(A.Z,{className:"h-5 w-5"}),"Upload New Voice"]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b,{htmlFor:"voice-name",children:"Voice Name"}),(0,a.jsx)(j,{id:"voice-name",value:d,onChange:e=>x(e.target.value),placeholder:"Enter a name for this voice"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b,{children:"Main Audio (Neutral)"}),(0,a.jsx)("div",{className:o("border-2 border-dashed rounded-lg p-6 text-center transition-colors",i?"border-primary bg-primary/5":"border-border",h?"border-green-500 bg-green-50 dark:bg-green-950/20":""),onDragEnter:F,onDragLeave:F,onDragOver:F,onDrop:E,children:h?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,a.jsx)(P.Z,{className:"h-8 w-8 text-green-600"}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"font-medium text-green-700 dark:text-green-400",children:h.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(h.size/1024/1024).toFixed(2)," MB"]})]}),(0,a.jsx)(m,{size:"sm",variant:"ghost",onClick:()=>p(null),className:"text-muted-foreground hover:text-destructive",children:(0,a.jsx)(y.Z,{className:"h-4 w-4"})})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)(M.Z,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Drop your audio file here"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Supports MP3 and WAV files"}),S?(0,a.jsx)(m,{variant:"outline",size:"sm",className:"mt-2 bg-transparent",onClick:()=>I(),children:"Browse Files"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"file",accept:".mp3,.wav,audio/mp3,audio/wav,audio/mpeg",onChange:e=>{let s=e.target.files;s&&s[0]&&!h&&(p(s[0]),d||x(s[0].name.replace(/\.[^/.]+$/,"")))},className:"hidden",id:"main-audio-upload"}),(0,a.jsx)(b,{htmlFor:"main-audio-upload",className:"cursor-pointer",children:(0,a.jsx)(m,{variant:"outline",size:"sm",className:"mt-2 bg-transparent",asChild:!0,children:(0,a.jsx)("span",{children:"Browse Files"})})})]})]})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(b,{children:"Emotion Variations (Optional)"}),(0,a.jsxs)(f,{variant:"secondary",className:"text-xs",children:[g.length,"/5"]})]}),g.map((e,s)=>(0,a.jsxs)(u,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)(j,{placeholder:"Emotion name (e.g., Happy, Sad, Angry)",value:e.name,onChange:e=>G(s,e.target.value),className:"flex-1"}),(0,a.jsx)(m,{size:"sm",variant:"ghost",onClick:()=>V(s),className:"text-muted-foreground hover:text-destructive",children:(0,a.jsx)(y.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"border border-dashed border-border rounded p-3 text-center",children:e.file?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{className:"text-sm text-green-700 dark:text-green-400",children:e.file.name}),(0,a.jsx)(m,{size:"sm",variant:"ghost",onClick:()=>D(s,null),className:"h-6 w-6 p-0",children:(0,a.jsx)(y.Z,{className:"h-3 w-3"})})]}):(0,a.jsx)("div",{children:S?(0,a.jsx)(m,{variant:"outline",size:"sm",onClick:()=>I(!0,s),children:(0,a.jsx)("span",{className:"text-xs",children:"Upload Audio"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"file",accept:".mp3,.wav,audio/mp3,audio/wav,audio/mpeg",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&D(s,a)},className:"hidden",id:"emotion-upload-".concat(s)}),(0,a.jsx)(b,{htmlFor:"emotion-upload-".concat(s),className:"cursor-pointer",children:(0,a.jsx)(m,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsx)("span",{className:"text-xs",children:"Upload Audio"})})})]})})})]},s)),g.length<5&&(0,a.jsxs)(m,{variant:"outline",onClick:()=>{g.length<5&&v(e=>[...e,{name:"",file:null}])},className:"w-full gap-2 bg-transparent",children:[(0,a.jsx)(T.Z,{className:"h-4 w-4"}),"Add Emotion Variation"]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(m,{onClick:()=>l(!1),variant:"outline",className:"flex-1",children:"Cancel"}),(0,a.jsx)(m,{onClick:O,disabled:!d.trim()||!h||N,className:"flex-1",children:N?"Uploading...":"Create Voice"})]})]})]})]})}var E=t(610);function I(e){let{className:s,value:t,...r}=e;return(0,a.jsx)(E.fC,{"data-slot":"progress",className:o("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...r,children:(0,a.jsx)(E.z$,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})}let D=(0,l.j)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function V(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:o(D({variant:t}),s),...r})}function G(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"alert-description",className:o("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...t})}function O(){var e;let{serverConfig:s,isServerSetupComplete:t,checkServerHealth:n}=(0,R.m)(),[l,i]=(0,r.useState)(!1),[c,o]=(0,r.useState)([]),[d,p]=(0,r.useState)(null),[v,j]=(0,r.useState)(null),N=(0,r.useRef)(0),b=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!t||!s){b.current&&clearInterval(b.current),b.current=null;return}let e=async()=>{let e=Date.now();await n(),N.current=Date.now()-e};return e(),b.current=setInterval(e,3e4),()=>{b.current&&clearInterval(b.current)}},[t,n]),(0,r.useEffect)(()=>{if(!s||!s.lastChecked)return;let e="online"===s.status,t=null,a={timestamp:new Date(s.lastChecked),status:e,responseTime:N.current,cpu_usage:s.cpu_usage,ram_usage_percent:s.ram_usage_percent,gpu_utilization:s.gpu_utilization,gpu_memory_usage:s.gpu_memory_usage,warmup_complete:s.warmup_complete};e?a.warmup_complete?a.cpu_usage>90?t="High CPU usage detected - performance may be impacted.":a.ram_usage_percent>95?t="High memory usage detected - server may become unstable.":"number"==typeof a.gpu_utilization&&a.gpu_utilization>95&&(t="GPU is at maximum capacity - requests may be queued."):t="Server is warming up - performance may be slower.":e||(t="Server connection failed or is offline."),j(t),p(a),o(e=>[...e.slice(-19),a])},[s]);let w=async()=>{if(!s)return;i(!0);let e=Date.now();try{await n(),N.current=Date.now()-e}catch(e){console.error("[v0] Manual health check failed:",e),j("Manual health check failed.")}finally{i(!1)}},y=()=>{if(!d||!d.status)return 0;let e=100;return d.responseTime>2e3?e-=30:d.responseTime>1e3&&(e-=15),d.cpu_usage>90?e-=25:d.cpu_usage>70&&(e-=10),d.ram_usage_percent>95?e-=25:d.ram_usage_percent>80&&(e-=10),d.gpu_utilization&&d.gpu_utilization>95&&(e-=20),d.warmup_complete||(e-=40),Math.max(0,e)};if(!t||!s)return null;let z=null!==(e=null==d?void 0:d.status)&&void 0!==e?e:"online"===s.status,k=(null==d?void 0:d.warmup_complete)===!1;return(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(x,{className:"pb-3",children:(0,a.jsxs)(h,{className:"text-white flex items-center gap-2 text-sm",children:[(0,a.jsx)(B,{}),"Server Monitor"]})}),(0,a.jsxs)(g,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[z?(0,a.jsx)(W,{}):(0,a.jsx)(Y,{}),(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:"local"===s.type?"Local Server":"Remote Server"}),k&&(0,a.jsx)(f,{variant:"secondary",className:"ml-2 text-xs",children:"WARMING"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f,{className:null===z?"bg-zinc-600":z?"bg-green-600":"bg-red-600",children:z?"ONLINE":"OFFLINE"}),(null==d?void 0:d.status)&&(0,a.jsxs)(f,{variant:"outline",className:"text-xs",children:[d.responseTime,"ms"]})]})]}),(0,a.jsx)("div",{className:"text-xs text-zinc-400 font-mono bg-zinc-800 p-2 rounded truncate",children:s.url}),(null==d?void 0:d.status)&&(0,a.jsxs)("div",{className:"bg-zinc-800 p-3 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-zinc-400",children:"Performance Score"}),(0,a.jsxs)("span",{className:"text-white font-bold",children:[y(),"/100"]})]}),(0,a.jsx)(I,{value:y(),className:"h-2"})]}),d&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)(X,{label:"CPU",value:null==d?void 0:d.cpu_usage,unit:"%"}),(0,a.jsx)(X,{label:"RAM",value:null==d?void 0:d.ram_usage_percent,unit:"%"}),(null==d?void 0:d.gpu_utilization)!==void 0&&(null==d?void 0:d.gpu_utilization)!==null&&(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)(X,{label:"GPU Utilization",value:null==d?void 0:d.gpu_utilization,unit:"%"})})]}),c.length>0&&(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-center",children:[(0,a.jsx)(q,{label:"Uptime",value:"".concat(0===c.length?0:Math.round(c.filter(e=>e.status).length/c.length*100),"%")}),(0,a.jsx)(q,{label:"Avg Response",value:"".concat((()=>{let e=c.filter(e=>e.status&&e.responseTime>0);return 0===e.length?0:Math.round(e.reduce((e,s)=>e+s.responseTime,0)/e.length)})(),"ms")}),(0,a.jsx)(q,{label:"Checks",value:c.length})]}),c.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-zinc-400 mb-2",children:"Health Timeline (Last 20 checks)"}),(0,a.jsx)("div",{className:"flex gap-1",children:c.map((e,s)=>{let t=(null==e?void 0:e.warmup_complete)===!1,r=e.status?t?"bg-yellow-600":"bg-green-600":"bg-red-600";return(0,a.jsx)("div",{className:"h-3 flex-1 rounded-sm ".concat(r),title:"".concat(e.timestamp.toLocaleTimeString(),": ").concat(e.status?t?"Online (Warming)":"Online":"Offline"," - ").concat(e.responseTime,"ms")},s)})})]}),v&&(0,a.jsx)(V,{className:"border-yellow-800 bg-yellow-900/20",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)($,{className:"h-4 w-4 text-yellow-400 mt-0.5"}),(0,a.jsx)(G,{className:"text-yellow-400 ml-2",children:v})]})}),d&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-zinc-400",children:[(0,a.jsx)(K,{className:"h-3 w-3"}),"Last checked: ",d.timestamp.toLocaleTimeString()]}),(0,a.jsx)(m,{onClick:w,disabled:l,variant:"outline",size:"sm",className:"w-full border-zinc-700 text-zinc-300 hover:bg-zinc-800 bg-transparent",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Q,{className:"h-3 w-3 mr-2 animate-spin"}),"Checking..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J,{className:"h-3 w-3 mr-2"}),"Manual Health Check"]})})]})]})}let X=e=>{let{label:s,value:t,unit:r}=e;return(0,a.jsxs)("div",{className:"bg-zinc-800 p-2 rounded text-center",children:[(0,a.jsx)("div",{className:"text-xs text-zinc-400 mb-1",children:s}),(0,a.jsxs)("div",{className:"text-sm font-bold text-white",children:[t.toFixed(0),r]}),(0,a.jsx)(I,{value:t,className:"h-1 mt-1"})]})},q=e=>{let{label:s,value:t}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:t}),(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:s})]})},H={className:"h-5 w-5 text-zinc-400",strokeWidth:"1.5"},B=()=>(0,a.jsxs)("svg",{...H,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,a.jsx)("rect",{x:"2",y:"2",width:"20",height:"8",rx:"2",ry:"2"}),(0,a.jsx)("rect",{x:"2",y:"14",width:"20",height:"8",rx:"2",ry:"2"}),(0,a.jsx)("line",{x1:"6",y1:"6",x2:"6.01",y2:"6"}),(0,a.jsx)("line",{x1:"6",y1:"18",x2:"6.01",y2:"18"})]}),W=()=>(0,a.jsxs)("svg",{className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,a.jsx)("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Y=()=>(0,a.jsxs)("svg",{className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),(0,a.jsx)("path",{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),(0,a.jsx)("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),(0,a.jsx)("path",{d:"M10.71 5.05A16 16 0 0 1 22.58 9"}),(0,a.jsx)("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),(0,a.jsx)("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),(0,a.jsx)("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]}),$=e=>(0,a.jsxs)("svg",{...e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),(0,a.jsx)("path",{d:"M12 9v4"}),(0,a.jsx)("path",{d:"m12 17 .01 0"})]}),K=e=>(0,a.jsxs)("svg",{...e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("polyline",{points:"12 6 12 12 16 14"})]}),J=e=>(0,a.jsx)("svg",{...e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,a.jsx)("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),Q=e=>(0,a.jsx)("svg",{...e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,a.jsx)("path",{d:"M21 12a9 9 0 0 1-9 9m9-9a9 9 0 0 0-9-9m9 9H3m0 0a9 9 0 0 1 9-9m-9 9a9 9 0 0 0 9 9"})});var ee=t(1312);function es(e){let{className:s,...t}=e;return(0,a.jsx)(ee.fC,{"data-slot":"tabs",className:o("flex flex-col gap-2",s),...t})}function et(e){let{className:s,...t}=e;return(0,a.jsx)(ee.aV,{"data-slot":"tabs-list",className:o("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...t})}function ea(e){let{className:s,...t}=e;return(0,a.jsx)(ee.xz,{"data-slot":"tabs-trigger",className:o("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t})}function er(e){let{className:s,...t}=e;return(0,a.jsx)(ee.VY,{"data-slot":"tabs-content",className:o("flex-1 outline-none",s),...t})}var en=t(1671),el=t(5395),ei=t(7168),ec=t(6865),eo=t(6137),ed=t(4401),em=t(476),eu=t(5954),ex=t(525),eh=t(6899),ep=t(4822),eg=t(4428),ev=t(1239),ef=t(91),ej=t(1723),eN=t(6215);function eb(){var e,s;let{serverConfig:t,checkServerHealth:n,isServerSetupComplete:l}=(0,R.m)(),[i,c]=(0,r.useState)([]),[o,d]=(0,r.useState)(null),[v,j]=(0,r.useState)(null),[N,b]=(0,r.useState)(!1),[w,y]=(0,r.useState)(null),[z,k]=(0,r.useState)({requestsPerMinute:0,averageLatency:0,errorRate:0}),S=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!l||!t){S.current&&clearInterval(S.current);return}let e=async()=>{try{var e,s;b(!0);let a=Date.now(),r=await n(),l=Date.now()-a,i=null,o=null;if(r)try{let e=await fetch("".concat(t.url,"/system"));e.ok&&(i=await e.json());let s=await fetch("".concat(t.url,"/metrics"));s.ok&&(o=await s.json())}catch(e){console.warn("[v0] Failed to fetch detailed metrics:",e)}let m={timestamp:new Date,responseTime:l,isOnline:r,cpuUsage:(null==i?void 0:i.cpu_usage)||0,memoryUsage:i?i.ram_used/i.ram_total*100:0,gpuUsage:(null==i?void 0:i.gpu_utilization)||0,gpuMemoryUsed:(null==i?void 0:i.gpu_memory_used)||0,gpuMemoryTotal:(null==i?void 0:i.gpu_memory_total)||0,gpuTemperature:(null==i?void 0:i.gpu_temperature)||null,inferenceTime:(null==o?void 0:null===(e=o.performance_stats)||void 0===e?void 0:e.average_inference_time)||0,queueTime:(null==o?void 0:null===(s=o.performance_stats)||void 0===s?void 0:s.average_preprocessing_time)||0,totalLatency:l,requestsPerSecond:0,warmupComplete:(null==i?void 0:i.warmup_complete)||!1};if(d(m),j(i),y(new Date),null==o?void 0:o.performance_stats){let e=o.performance_stats;k({requestsPerMinute:e.total_requests||0,averageLatency:e.average_inference_time||0,errorRate:0})}c(e=>[...e.slice(-99),m]),console.log("[v0]  health check completed:",m)}catch(s){console.error("[v0]  health check failed:",s);let e={timestamp:new Date,responseTime:0,isOnline:!1};d(e),c(s=>[...s.slice(-99),e])}finally{b(!1)}};return S.current||(e(),S.current=setInterval(e,3e4)),()=>{S.current&&clearInterval(S.current),S.current=null}},[l,null==t?void 0:t.url,n]);let _=()=>0===i.length?0:Math.round(i.filter(e=>e.isOnline).length/i.length*100),C=()=>{let e=i.filter(e=>e.isOnline&&e.inferenceTime&&e.inferenceTime>0);return 0===e.length?0:(e.reduce((e,s)=>e+(s.inferenceTime||0),0)/e.length*1e3).toFixed(1)},Z=()=>{if(!o||!o.isOnline)return 0;let e=100;return o.responseTime>1e3?e-=20:o.responseTime>500&&(e-=10),o.cpuUsage&&o.cpuUsage>80&&(e-=15),o.memoryUsage&&o.memoryUsage>90&&(e-=15),o.gpuUsage&&o.gpuUsage>95&&(e-=20),o.warmupComplete||(e-=30),Math.max(0,e)},U=e=>e?"".concat((e/1024).toFixed(1)," GB"):"0 GB";return l&&t?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(u,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsx)(g,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-zinc-400 text-sm",children:"Server Status"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(e=>{switch(e){case"online":return(0,a.jsx)(en.Z,{className:"h-4 w-4 text-green-400"});case"offline":return(0,a.jsx)(el.Z,{className:"h-4 w-4 text-red-400"});case"checking":return(0,a.jsx)(ei.Z,{className:"h-4 w-4 text-blue-400 animate-spin"});default:return(0,a.jsx)(ec.Z,{className:"h-4 w-4 text-yellow-400"})}})(t.status),(0,a.jsx)("span",{className:"font-medium ".concat((e=>{switch(e){case"online":return"text-green-400";case"offline":return"text-red-400";case"checking":return"text-blue-400";default:return"text-yellow-400"}})(t.status)),children:t.status.toUpperCase()})]}),(null==o?void 0:o.warmupComplete)===!1&&(0,a.jsx)(f,{variant:"secondary",className:"mt-1 text-xs",children:"WARMING UP"})]}),(0,a.jsx)(ed.Z,{className:"h-8 w-8 text-zinc-600"})]})})}),(0,a.jsx)(u,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsx)(g,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-zinc-400 text-sm",children:"Performance Score"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:Z()}),(0,a.jsx)("span",{className:"text-sm text-zinc-400",children:"/100"})]})]}),(0,a.jsx)(em.Z,{className:"h-8 w-8 text-zinc-600"})]})})}),(0,a.jsx)(u,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsx)(g,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-zinc-400 text-sm",children:"Avg Inference"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-white",children:[C(),"ms"]}),(0,a.jsx)("p",{className:"text-xs text-zinc-500",children:"Last 10 requests"})]}),(0,a.jsx)(eu.Z,{className:"h-8 w-8 text-zinc-600"})]})})}),(0,a.jsx)(u,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsx)(g,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-zinc-400 text-sm",children:"Uptime"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-white",children:[_(),"%"]}),(0,a.jsxs)("p",{className:"text-xs text-zinc-500",children:[i.length," checks"]})]}),(0,a.jsx)(ex.Z,{className:"h-8 w-8 text-zinc-600"})]})})})]}),(0,a.jsxs)(es,{defaultValue:"overview",className:"w-full",children:[(0,a.jsxs)(et,{className:"grid w-full grid-cols-4 bg-zinc-800",children:[(0,a.jsx)(ea,{value:"overview",className:"text-zinc-300",children:"Overview"}),(0,a.jsx)(ea,{value:"performance",className:"text-zinc-300",children:"Performance"}),(0,a.jsx)(ea,{value:"resources",className:"text-zinc-300",children:"Resources"}),(0,a.jsx)(ea,{value:"history",className:"text-zinc-300",children:"History"})]}),(0,a.jsx)(er,{value:"overview",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(x,{children:(0,a.jsxs)(h,{className:"text-white flex items-center gap-2",children:[(0,a.jsx)(eo.Z,{className:"h-4 w-4"}),"Server Information"]})}),(0,a.jsxs)(g,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"Type:"}),(0,a.jsx)(f,{variant:"outline",children:"local"===t.type?"Local Server":"runpod"===t.type?"RunPod Instance":"Remote Server"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"URL:"}),(0,a.jsx)("span",{className:"text-white font-mono text-sm truncate max-w-48",children:t.url})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"Last Check:"}),(0,a.jsx)("span",{className:"text-white text-sm",children:w?w.toLocaleTimeString():"Never"})]}),(null==v?void 0:v.gpu_name)&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"GPU:"}),(0,a.jsx)("span",{className:"text-white text-sm",children:v.gpu_name})]})]})]}),o&&o.isOnline&&(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(x,{children:(0,a.jsxs)(h,{className:"text-white flex items-center gap-2",children:[(0,a.jsx)(ed.Z,{className:"h-4 w-4"}),"Real-time Metrics"]})}),(0,a.jsxs)(g,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-white",children:[o.responseTime,"ms"]}),(0,a.jsx)("p",{className:"text-xs text-zinc-400",children:"Response Time"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-white",children:[o.inferenceTime?(1e3*o.inferenceTime).toFixed(0):"N/A","ms"]}),(0,a.jsx)("p",{className:"text-xs text-zinc-400",children:"Inference Time"})]})]}),o.gpuTemperature&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eh.Z,{className:"h-4 w-4 text-zinc-400"}),(0,a.jsxs)("span",{className:"text-white",children:[o.gpuTemperature,"\xb0C"]}),(0,a.jsx)("span",{className:"text-zinc-400 text-sm",children:"GPU Temp"})]}),!o.warmupComplete&&(0,a.jsxs)(V,{className:"border-yellow-800",children:[(0,a.jsx)(ec.Z,{className:"h-4 w-4"}),(0,a.jsx)(G,{className:"text-yellow-400",children:"Server is still warming up. Performance may be slower than usual."})]})]})]})]})}),(0,a.jsx)(er,{value:"performance",className:"space-y-4",children:(null==v?void 0:v.performance_stats)&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(x,{children:(0,a.jsx)(h,{className:"text-white text-sm",children:"Request Statistics"})}),(0,a.jsxs)(g,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-zinc-400 text-sm",children:"Total Requests:"}),(0,a.jsx)("span",{className:"text-white font-bold",children:v.performance_stats.total_requests})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-zinc-400 text-sm",children:"Cache Hit Rate:"}),(0,a.jsxs)("span",{className:"text-white font-bold",children:[v.performance_stats.cache_hits+v.performance_stats.cache_misses>0?Math.round(v.performance_stats.cache_hits/(v.performance_stats.cache_hits+v.performance_stats.cache_misses)*100):0,"%"]})]})]})]}),(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(x,{children:(0,a.jsx)(h,{className:"text-white text-sm",children:"Processing Times"})}),(0,a.jsxs)(g,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"Inference:"}),(0,a.jsxs)("span",{className:"text-white",children:[(1e3*v.performance_stats.average_inference_time).toFixed(1),"ms"]})]}),(0,a.jsx)(I,{value:Math.min(100*v.performance_stats.average_inference_time,100),className:"h-2"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"Preprocessing:"}),(0,a.jsxs)("span",{className:"text-white",children:[(1e3*v.performance_stats.average_preprocessing_time).toFixed(1),"ms"]})]}),(0,a.jsx)(I,{value:Math.min(100*v.performance_stats.average_preprocessing_time,100),className:"h-2"})]})]})]}),(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(x,{children:(0,a.jsx)(h,{className:"text-white text-sm",children:"Memory Usage"})}),(0,a.jsxs)(g,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xl font-bold text-white",children:U(v.performance_stats.peak_memory_usage)}),(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Peak GPU Memory"})]}),v.gpu_memory_total&&(0,a.jsx)(I,{value:v.performance_stats.peak_memory_usage/1024/v.gpu_memory_total*100,className:"h-3"})]})]})]})}),(0,a.jsxs)(er,{value:"resources",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(x,{children:(0,a.jsxs)(h,{className:"text-white flex items-center gap-2 text-sm",children:[(0,a.jsx)(ep.Z,{className:"h-4 w-4"}),"CPU Usage"]})}),(0,a.jsx)(g,{children:(null==o?void 0:o.cpuUsage)?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-white mb-2",children:[o.cpuUsage.toFixed(1),"%"]}),(0,a.jsx)(I,{value:o.cpuUsage,className:"h-3 mb-2"}),(null==v?void 0:v.cpu_count)&&(0,a.jsxs)("div",{className:"text-xs text-zinc-400",children:[v.cpu_count," cores"]})]}):(0,a.jsx)("div",{className:"text-center text-zinc-400",children:"No data"})})]}),(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(x,{children:(0,a.jsxs)(h,{className:"text-white flex items-center gap-2 text-sm",children:[(0,a.jsx)(eg.Z,{className:"h-4 w-4"}),"RAM Usage"]})}),(0,a.jsx)(g,{children:v&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-white mb-2",children:[(v.ram_used/v.ram_total*100).toFixed(1),"%"]}),(0,a.jsx)(I,{value:v.ram_used/v.ram_total*100,className:"h-3 mb-2"}),(0,a.jsxs)("div",{className:"text-xs text-zinc-400",children:[U(1024*v.ram_used)," /"," ",U(1024*v.ram_total)]})]})})]}),(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(x,{children:(0,a.jsxs)(h,{className:"text-white flex items-center gap-2 text-sm",children:[(0,a.jsx)(ev.Z,{className:"h-4 w-4"}),"GPU Usage"]})}),(0,a.jsx)(g,{children:(null==o?void 0:o.gpuUsage)?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-white mb-2",children:[o.gpuUsage.toFixed(1),"%"]}),(0,a.jsx)(I,{value:o.gpuUsage,className:"h-3 mb-2"}),(0,a.jsxs)("div",{className:"text-xs text-zinc-400",children:["VRAM: ",U(o.gpuMemoryUsed)," /"," ",U(o.gpuMemoryTotal)]})]}):(0,a.jsx)("div",{className:"text-center text-zinc-400",children:(null==v?void 0:v.gpu_available)?"No data":"No GPU"})})]})]}),(null==v?void 0:v.gpu_available)&&(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(x,{children:(0,a.jsxs)(h,{className:"text-white flex items-center gap-2",children:[(0,a.jsx)(ef.Z,{className:"h-4 w-4"}),"GPU Memory Breakdown"]})}),(0,a.jsx)(g,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:U(v.gpu_memory_total)}),(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Total VRAM"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:U(v.gpu_memory_used)}),(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Used VRAM"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:U(v.gpu_memory_available)}),(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Available VRAM"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"VRAM Utilization"}),(0,a.jsxs)("span",{className:"text-white",children:[v.gpu_memory_total?((null!==(e=v.gpu_memory_used)&&void 0!==e?e:0)/v.gpu_memory_total*100).toFixed(1):0,"%"]})]}),(0,a.jsx)(I,{value:v.gpu_memory_total?(null!==(s=v.gpu_memory_used)&&void 0!==s?s:0/v.gpu_memory_total)*100:0,className:"h-4"})]})]})})]})]}),(0,a.jsx)(er,{value:"history",className:"space-y-4",children:(0,a.jsxs)(u,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsxs)(x,{children:[(0,a.jsxs)(h,{className:"text-white flex items-center gap-2",children:[(0,a.jsx)(ej.Z,{className:"h-4 w-4"}),"Performance History"]}),(0,a.jsxs)(p,{className:"text-zinc-400",children:["Last ",i.length," health checks with detailed metrics"]})]}),(0,a.jsx)(g,{children:i.length>0?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Status Timeline (Last 50 checks)"}),(0,a.jsx)("div",{className:"flex gap-1",children:i.slice(-50).map((e,s)=>{let t=e.isOnline?e.warmupComplete?"opacity-100":"opacity-70":"opacity-100";return(0,a.jsx)("div",{className:"h-4 flex-1 rounded-sm ".concat(e.isOnline?e.warmupComplete?"bg-green-600":"bg-yellow-600":"bg-red-600"," ").concat(t),title:"".concat(e.timestamp.toLocaleTimeString(),": ").concat(e.isOnline?e.warmupComplete?"Online (Ready)":"Online (Warming)":"Offline"," - ").concat(e.responseTime,"ms").concat(e.inferenceTime?" | Inf: ".concat((1e3*e.inferenceTime).toFixed(0),"ms"):"")},s)})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-zinc-800 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400 mb-1",children:"Avg Response Time"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-white",children:[(()=>{let e=i.filter(e=>e.isOnline&&e.responseTime>0);return 0===e.length?0:Math.round(e.reduce((e,s)=>e+s.responseTime,0)/e.length)})(),"ms"]}),(0,a.jsx)("div",{className:"text-xs text-zinc-500",children:"Network latency"})]}),(0,a.jsxs)("div",{className:"bg-zinc-800 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400 mb-1",children:"Avg Inference Time"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-white",children:[C(),"ms"]}),(0,a.jsx)("div",{className:"text-xs text-zinc-500",children:"Model processing"})]}),(0,a.jsxs)("div",{className:"bg-zinc-800 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400 mb-1",children:"Reliability"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-white",children:[_(),"%"]}),(0,a.jsx)("div",{className:"text-xs text-zinc-500",children:"Uptime ratio"})]})]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400 mb-2",children:"Recent Health Checks"}),i.slice(-15).reverse().map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-zinc-800 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.isOnline?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(en.Z,{className:"h-3 w-3 text-green-400"}),!e.warmupComplete&&(0,a.jsx)(f,{variant:"secondary",className:"text-xs px-1 py-0",children:"WARM"})]}):(0,a.jsx)(el.Z,{className:"h-3 w-3 text-red-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-white text-sm",children:e.timestamp.toLocaleTimeString()}),e.gpuTemperature&&(0,a.jsxs)("div",{className:"text-xs text-zinc-400 flex items-center gap-1",children:[(0,a.jsx)(eh.Z,{className:"h-3 w-3"}),e.gpuTemperature,"\xb0C"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-zinc-400",children:[(0,a.jsxs)("span",{children:[e.responseTime,"ms"]}),e.inferenceTime&&(0,a.jsxs)("span",{children:["Inf: ",(1e3*e.inferenceTime).toFixed(0),"ms"]}),e.cpuUsage&&(0,a.jsxs)("span",{children:["CPU: ",e.cpuUsage.toFixed(1),"%"]}),e.gpuUsage&&(0,a.jsxs)("span",{children:["GPU: ",e.gpuUsage.toFixed(1),"%"]})]})]},s))]})]}):(0,a.jsx)("div",{className:"text-center text-zinc-400 py-8",children:"No health data available yet"})})]})})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsx)(m,{onClick:async()=>{b(!0);try{await n()}finally{b(!1)}},disabled:N,variant:"outline",className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ei.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Checking..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ei.Z,{className:"h-4 w-4 mr-2"}),"Manual Health Check"]})}),t.url&&(0,a.jsxs)(m,{onClick:()=>window.open("".concat(t.url,"/metrics"),"_blank"),variant:"outline",className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:[(0,a.jsx)(eN.Z,{className:"h-4 w-4 mr-2"}),"View Raw Metrics"]})]}),o&&o.isOnline&&70>Z()&&(0,a.jsxs)(V,{className:"border-yellow-800",children:[(0,a.jsx)(ec.Z,{className:"h-4 w-4"}),(0,a.jsxs)(G,{className:"text-yellow-400",children:[(0,a.jsx)("strong",{children:"Performance Warning:"})," Server performance is below optimal levels.",!o.warmupComplete&&" Server is still warming up.",o.responseTime>1e3&&" High response times detected.",o.cpuUsage&&o.cpuUsage>80&&" High CPU usage detected."]})]})]}):(0,a.jsx)(u,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsxs)(g,{className:"p-6 text-center",children:[(0,a.jsx)(eo.Z,{className:"h-12 w-12 text-zinc-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-zinc-400",children:"No server configured"}),(0,a.jsx)("p",{className:"text-zinc-500 text-sm",children:"Complete server setup to view health dashboard"})]})})}var ew=t(407),ey=t(2451),ez=t(8930),ek=t(9227),eS=t(3276);function e_(){let{voices:e,selectedVoiceId:s,selectedEmotionId:t,setSelectedVoice:n,setSelectedEmotion:l,deleteVoice:i}=(0,R.m)(),[c,o]=(0,r.useState)(null),[d,x]=(0,r.useState)(!1),[h,p]=(0,r.useState)("server"),[g,v]=(0,r.useState)(!1),j=e=>{s===e?n(null):n(e),l(null)},N=e=>{t===e?l(null):l(e)},b=(e,s)=>{if(c===s){o(null);return}let t=new Audio(e);o(s),t.onended=()=>o(null),t.onerror=()=>o(null),t.play().catch(()=>o(null))};return(0,a.jsxs)("div",{className:"bg-sidebar border-r border-sidebar-border flex flex-col h-full transition-all duration-300 ease-in-out ".concat(g?"w-12":"w-80"),children:[(0,a.jsxs)("div",{className:"flex-shrink-0 relative transition-all duration-300 ".concat(g?"p-2 pt-4":"p-6 pb-0"),children:[(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>{v(!g)},className:"absolute top-4 right-2 h-8 w-8 p-0 text-muted-foreground hover:text-foreground z-10",children:g?(0,a.jsx)(ew.Z,{className:"h-4 w-4"}):(0,a.jsx)(ey.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex border-b border-zinc-700 transition-opacity duration-300 ".concat(g?"opacity-0 pointer-events-none":"opacity-100"),children:[(0,a.jsx)("button",{onClick:()=>p("server"),className:"flex-1 pb-2 text-sm font-medium transition-colors ".concat("server"===h?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"),children:"Server"}),(0,a.jsx)("button",{onClick:()=>p("voices"),className:"flex-1 pb-2 text-sm font-medium transition-colors ".concat("voices"===h?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"),children:"Manage Voices"})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto transition-all duration-300 ".concat(g?"hidden":"p-6"),children:["server"===h&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(O,{}),(0,a.jsxs)(m,{variant:"outline",size:"sm",className:"w-full border-zinc-700 text-zinc-300 hover:bg-zinc-800 bg-transparent",onClick:()=>x(!0),children:[(0,a.jsx)(eN.Z,{className:"h-3 w-3 mr-2"}),"View Full Dashboard"]})]})}),"voices"===h&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-sm font-medium text-sidebar-foreground",children:"Voices"}),(0,a.jsx)(F,{})]}),0===e.length?(0,a.jsxs)(u,{className:"p-4 text-center",children:[(0,a.jsx)(A.Z,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No voices uploaded yet"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Upload your first voice sample to get started"})]}):(0,a.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,a.jsxs)(u,{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("button",{onClick:()=>j(e.id),className:"text-sm font-medium text-left flex-1 ".concat(s===e.id?"text-primary":"text-foreground"),children:e.name}),(0,a.jsx)(m,{size:"sm",variant:"ghost",onClick:()=>i(e.id),className:"h-6 w-6 p-0 text-muted-foreground hover:text-destructive",children:(0,a.jsx)(ez.Z,{className:"h-3 w-3"})})]}),s===e.id&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>N("neutral"),className:"flex-1 text-left px-2 py-1 rounded text-xs ".concat("neutral"!==t&&(t||s!==e.id)?"bg-muted text-muted-foreground hover:bg-accent":"bg-primary text-primary-foreground"),children:"Neutral (Main)"}),e.mainAudioUrl&&(0,a.jsx)(m,{size:"sm",variant:"ghost",onClick:()=>b(e.mainAudioUrl,"".concat(e.id,"-main")),className:"h-6 w-6 p-0",children:c==="".concat(e.id,"-main")?(0,a.jsx)(ek.Z,{className:"h-3 w-3"}):(0,a.jsx)(eS.Z,{className:"h-3 w-3"})})]}),e.emotions.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>N(e.id),className:"flex-1 text-left px-2 py-1 rounded text-xs ".concat(t===e.id?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-accent"),children:e.name}),e.audioUrl&&(0,a.jsx)(m,{size:"sm",variant:"ghost",onClick:()=>b(e.audioUrl,e.id),className:"h-6 w-6 p-0",children:c===e.id?(0,a.jsx)(ek.Z,{className:"h-3 w-3"}):(0,a.jsx)(eS.Z,{className:"h-3 w-3"})})]},e.id))]}),(0,a.jsx)("div",{className:"flex gap-1 mt-2",children:(0,a.jsxs)(f,{variant:"secondary",className:"text-xs",children:[e.emotions.length+1," variants"]})})]},e.id))})]})]}),d&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Server Health Dashboard"}),(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>x(!1),className:"text-zinc-400 hover:text-white",children:"âœ•"})]}),(0,a.jsx)(eb,{})]})})})]})}var eC=t(2926);function eZ(){let{serverConfig:e,isServerSetupComplete:s}=(0,R.m)();return s&&e?(0,a.jsxs)(f,{className:(()=>{switch(e.status){case"online":return"bg-green-600 hover:bg-green-700";case"offline":return"bg-red-600 hover:bg-red-700";case"checking":return"bg-blue-600 hover:bg-blue-700";default:return"bg-yellow-600 hover:bg-yellow-700"}})(),children:[(()=>{switch(e.status){case"online":return(0,a.jsx)(eC.Z,{className:"h-3 w-3 mr-1 text-green-400"});case"offline":return(0,a.jsx)(el.Z,{className:"h-3 w-3 mr-1 text-red-400"});case"checking":return(0,a.jsx)(ei.Z,{className:"h-3 w-3 mr-1 text-blue-400 animate-spin"});default:return(0,a.jsx)(ec.Z,{className:"h-3 w-3 mr-1 text-yellow-400"})}})(),e.status.charAt(0).toUpperCase()+e.status.slice(1)]}):(0,a.jsxs)(f,{variant:"secondary",className:"bg-zinc-800 text-zinc-400",children:[(0,a.jsx)(ec.Z,{className:"h-3 w-3 mr-1"}),"No Server"]})}function eU(e){let{className:s,...t}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:o("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}var eR=t(721);function eT(e){let{className:s,...t}=e;return(0,a.jsx)(eR.fC,{"data-slot":"switch",className:o("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:(0,a.jsx)(eR.bU,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}var eA=t(6873),eP=t(875),eM=t(401),eL=t(2135);function eF(e){let{...s}=e;return(0,a.jsx)(eA.fC,{"data-slot":"select",...s})}function eE(e){let{...s}=e;return(0,a.jsx)(eA.B4,{"data-slot":"select-value",...s})}function eI(e){let{className:s,size:t="default",children:r,...n}=e;return(0,a.jsxs)(eA.xz,{"data-slot":"select-trigger","data-size":t,className:o("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...n,children:[r,(0,a.jsx)(eA.JO,{asChild:!0,children:(0,a.jsx)(eP.Z,{className:"size-4 opacity-50"})})]})}function eD(e){let{className:s,children:t,position:r="popper",...n}=e;return(0,a.jsx)(eA.h_,{children:(0,a.jsxs)(eA.VY,{"data-slot":"select-content",className:o("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...n,children:[(0,a.jsx)(eG,{}),(0,a.jsx)(eA.l_,{className:o("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(eO,{})]})})}function eV(e){let{className:s,children:t,...r}=e;return(0,a.jsxs)(eA.ck,{"data-slot":"select-item",className:o("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...r,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(eA.wU,{children:(0,a.jsx)(eM.Z,{className:"size-4"})})}),(0,a.jsx)(eA.eT,{children:t})]})}function eG(e){let{className:s,...t}=e;return(0,a.jsx)(eA.u_,{"data-slot":"select-scroll-up-button",className:o("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(eL.Z,{className:"size-4"})})}function eO(e){let{className:s,...t}=e;return(0,a.jsx)(eA.$G,{"data-slot":"select-scroll-down-button",className:o("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(eP.Z,{className:"size-4"})})}var eX=t(2883),eq=t(5368),eH=t(2934),eB=t(9322),eW=t(1706),eY=t(5805),e$=t(5287),eK=t(4743),eJ=t(7806),eQ=t(1817),e0=t(9388),e4=t(1094),e1=t(105),e2=t(3643);function e3(e){let{className:s,children:t,...r}=e;return(0,a.jsxs)(e2.fC,{"data-slot":"scroll-area",className:o("relative",s),...r,children:[(0,a.jsx)(e2.l_,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),(0,a.jsx)(e5,{}),(0,a.jsx)(e2.Ns,{})]})}function e5(e){let{className:s,orientation:t="vertical",...r}=e;return(0,a.jsx)(e2.gb,{"data-slot":"scroll-area-scrollbar",orientation:t,className:o("flex touch-none p-px transition-colors select-none","vertical"===t&&"h-full w-2.5 border-l border-l-transparent","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent",s),...r,children:(0,a.jsx)(e2.q4,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}let e8=[{title:"Multi-Speaker Dialogue",examples:[{text:"Speaker 1: Hello, how are you?\nSpeaker 2: I'm doing well, thanks!",description:"Use 'Speaker X:' labels and new lines to assign text."},{text:"Speaker 1: I'll start.\nSpeaker 2: Then I will continue.\nSpeaker 1: And I will finish.",description:"The order of speakers in the text must match the order you selected them in the UI."}]},{title:"Pauses and Timing",examples:[{text:"Hello... world",description:"Short pause (0.5s)"},{text:"Hello...... world",description:"Medium pause (1s)"},{text:"Hello.......... world",description:"Long pause (2s)"},{text:"Hello, world",description:"Natural comma pause"},{text:"Hello. World.",description:"Sentence break pause"}]},{title:"Emphasis and Tone",examples:[{text:"*Hello* world",description:"Emphasis on 'Hello'"},{text:"**IMPORTANT** message",description:"Strong emphasis"},{text:"Hello ~world~",description:"Whispered tone"},{text:"Hello WORLD!",description:"Louder/excited tone"}]},{title:"Speech Patterns",examples:[{text:"Um... let me think",description:"Natural hesitation"},{text:"Well, you know...",description:"Conversational filler"},{text:"Question mark tone?",description:"Rising intonation"},{text:"Exclamation point!",description:"Excited delivery"}]},{title:"Pronunciation Guide",examples:[{text:"Dr. Smith",description:"Abbreviations"},{text:"NASA (NAH-sah)",description:"Phonetic spelling"},{text:"2023 (twenty twenty-three)",description:"Number pronunciation"},{text:"AI (A-I)",description:"Letter-by-letter"}]}];function e6(){var e,s;let{setText:t,selectedVoiceId:n,selectedEmotionId:l,voices:i,isProcessing:c,setProcessing:o,addGeneratedAudio:d,isServerSetupComplete:x,getVoiceSampleBlob:h,serverConfig:p}=(0,R.m)(),[g,v]=(0,r.useState)("single"),[j,N]=(0,r.useState)([]),[w,S]=(0,r.useState)(!1),[_,T]=(0,r.useState)(""),[A,P]=(0,r.useState)(0),[M,L]=(0,r.useState)(""),[F,E]=(0,r.useState)(null),[D,O]=(0,r.useState)(null),[X,q]=(0,r.useState)("generate"),[H,B]=(0,r.useState)(!1),[W,Y]=(0,r.useState)(!1),[$,K]=(0,r.useState)(0),[J,Q]=(0,r.useState)(!0),[ee,es]=(0,r.useState)(!1),et=(0,r.useRef)(null),ea=(0,r.useRef)(0),er=(0,r.useRef)(null),en=(0,r.useRef)([]),el=(0,r.useRef)(!1),ei=(0,r.useRef)(0),eo=(0,r.useRef)(null),ed=(0,r.useRef)(!1),em=(0,r.useRef)(null),eu=(0,r.useRef)({totalRequests:0,successfulRequests:0,failedRequests:0,failureStages:{},averageGenerationTime:0}),ex=i.find(e=>e.id===n),eh=null==ex?void 0:ex.emotions.find(e=>e.id===l),ep=_.trim()&&("single"===g?!!n:j.length>1)&&!c&&!H&&x&&!ee;(0,r.useEffect)(()=>()=>{er.current&&(console.log("Closing WebSocket on component unmount"),er.current.close(),er.current=null),et.current&&(et.current.close(),et.current=null),en.current=[],el.current=!1},[]),(0,r.useEffect)(()=>{ee&&er.current&&(er.current.close(),er.current=null,eR())},[n,j]);let eg=e=>{N(j.filter(s=>s.id!==e))},ev=(e,s,t)=>{let a=eu.current;s?(a.successfulRequests++,t&&(a.averageGenerationTime=(a.averageGenerationTime*(a.successfulRequests-1)+t)/a.successfulRequests)):(a.failedRequests++,a.failureStages[e]=(a.failureStages[e]||0)+1)},ef=e=>{let s=e.trim();return s?s.length>1e4?{valid:!1,error:"Text is too long (".concat(s.length," characters). Maximum is ").concat(1e4," characters.")}:{valid:!0}:{valid:!1,error:"Text cannot be empty"}},ej=e=>new Promise(s=>setTimeout(s,e)),eN=e=>["Failed to fetch","Network error","timeout","503","502","504","ECONNREFUSED"].some(s=>e.message.toLowerCase().includes(s.toLowerCase())),eb=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1?arguments[1]:void 0,t=Date.now();K(e);try{let a;let r=ef(s);if(!r.valid)throw ev("validation",!1),Error(r.error);L("Fetching voice samples..."),P(20);let i=new FormData;if(i.append("text",s),"single"===g){let e=await h(n,l);if(!e)throw Error("Could not find the selected voice audio sample.");i.append("voice_file",new File([e],"voice_sample.wav")),a="".concat(p.url,"/single-speaker")}else(await Promise.all(j.map(e=>h(e.id,null)))).forEach((e,s)=>{if(!e)throw Error("Could not find audio sample for speaker ".concat(s+1,": ").concat(j[s].name,"."));i.append("voice_files",new File([e],"speaker_".concat(s+1,".wav")))}),a="".concat(p.url,"/multi-speaker");P(40),L(e>1?"Generating speech (attempt ".concat(e,")..."):"Generating speech..."),P(60),eo.current=new AbortController;let c=setTimeout(()=>{var e;return null===(e=eo.current)||void 0===e?void 0:e.abort()},12e4),o=await fetch(a,{method:"POST",body:i,signal:eo.current.signal});if(clearTimeout(c),!o.ok){let e="Server error: ".concat(o.status);try{let s=await o.json();e=s.detail||s.message||e}catch(s){e=await o.text()||e}throw ev("server_response",!1),Error(e)}L("Processing audio..."),P(70);let d=await o.blob();if(!d||0===d.size)throw ev("audio_blob_processing",!1),Error("Received empty audio data from server");if(L("Saving audio..."),P(80),!await ey(d,s))throw ev("audio_save",!1),Error("Failed to save generated audio to storage");let m=Date.now()-t;return ev("complete",!0,m),P(100),d}catch(a){let t=a instanceof Error?a:Error(String(a));if("AbortError"===t.name&&W)throw Error("Generation cancelled by user");if("AbortError"===t.name){let t=Error("Request timed out.");if(ev("timeout",!1),e<3)return await ej(2e3*e),eb(e+1,s);throw t}if(e<3&&eN(t))return await ej(2e3*e),eb(e+1,s);throw ev("unknown",!1),t}},ew=async e=>{if(p&&("single"!==g||n)&&("multi"!==g||!(j.length<2))){o(!0),B(!0),Y(!1),E(null),O(null),L("Preparing voice model..."),P(10),K(0),eu.current.totalRequests++;try{await eb(1,e)&&!W&&(O("Audio generated and saved successfully!"),setTimeout(()=>O(null),3e3))}catch(e){console.error("Audio generation failed:",e),E(e instanceof Error?e.message:"Failed to generate audio"),setTimeout(()=>E(null),5e3)}finally{o(!1),B(!1),P(0),L(""),K(0),eo.current=null}}},ey=async function(e,s){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{L("Finalizing audio..."),P(80);let a={id:crypto.randomUUID(),text:s,voiceId:"single"===g?n:j.map(e=>e.id).join(","),emotionId:"single"===g&&null!=l?l:void 0,audioUrl:e1.C.createObjectURL(e),createdAt:new Date};return await d(a,e),L("Complete!"),P(100),O("Audio ".concat(t?"streamed":"generated"," successfully!")),setTimeout(()=>O(null),3e3),!0}catch(e){return console.error("Failed to save audio:",e),!1}},ez=(0,r.useCallback)(()=>{var e;if((null===(e=er.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN)return er.current;let s=p.url.replace("http://","ws://").replace("https://","wss://"),t=new WebSocket("".concat(s,"/ws/tts-stream"));return t.onopen=()=>{console.log("WebSocket connected")},t.onerror=e=>{console.error("WebSocket error:",e),E("Connection error. Please try again.")},t.onclose=()=>{console.log("WebSocket closed"),er.current=null},er.current=t,t},[null==p?void 0:p.url]),ek=(0,r.useCallback)(()=>{let e=et.current;if(!e||0===en.current.length||el.current)return;el.current=!0;let s=()=>{if(0===en.current.length){el.current=!1;return}let{buffer:t}=en.current.shift(),a=e.createBufferSource(),r=e.createGain();a.buffer=t,a.connect(r),r.connect(e.destination);let n=Math.max(e.currentTime,ei.current);r.gain.setValueAtTime(0,n),r.gain.linearRampToValueAtTime(1,n+.003),r.gain.setValueAtTime(1,n+t.duration-.003),r.gain.linearRampToValueAtTime(0,n+t.duration),a.start(n),ei.current=n+t.duration,a.onended=()=>{a.disconnect(),r.disconnect(),s()}};s()},[]),eS=(0,r.useCallback)((e,s,t)=>{let a=et.current;if(!a)return;let r=new Int16Array(e.buffer,e.byteOffset,e.byteLength/2),n=new Float32Array(r.length);for(let e=0;e<r.length;e++)n[e]=r[e]/32768;let l=a.createBuffer(1,n.length,s);l.getChannelData(0).set(n),en.current.push({buffer:l,id:t}),en.current.length>=2&&!el.current&&ek()},[ek]),e_=async e=>{if(p&&("single"!==g||n)&&("multi"!==g||!(j.length<2))){E(null),O(null),es(!0),L("Connecting..."),ed.current=!1,em.current=null;try{let s=ez();s.readyState===WebSocket.CONNECTING&&await new Promise((e,t)=>{let a=setTimeout(()=>t(Error("Connection timeout")),1e4);s.onopen=()=>{clearTimeout(a),e(!0)},s.onerror=()=>{clearTimeout(a),t(Error("Connection failed"))}});let t=window.AudioContext||window.webkitAudioContext;et.current=new t,"suspended"===et.current.state&&await et.current.resume(),ea.current=et.current.currentTime+.4,L("Preparing voice samples...");let a=[];if("single"===g){let e=await h(n,l);if(!e)throw Error("Voice sample not found.");let s=await e.arrayBuffer(),t=btoa(new Uint8Array(s).reduce((e,s)=>e+String.fromCharCode(s),""));a.push({data:t})}else for(let e of(await Promise.all(j.map(e=>h(e.id,null))))){if(!e)throw Error("Voice sample not found.");let s=await e.arrayBuffer(),t=btoa(new Uint8Array(s).reduce((e,s)=>e+String.fromCharCode(s),""));a.push({data:t})}L("Preparing to stream...");let r=[],i=24e3;s.onmessage=s=>{try{let t=JSON.parse(s.data);if("ready"===t.type)L("Streaming audio..."),en.current=[],el.current=!1,ei.current=0;else if("audio_chunk"===t.type){let e=t.audio_data,s=new Uint8Array(e.match(/.{1,2}/g).map(e=>parseInt(e,16)));r.push(s);let a=t.sample_rate||i;i=a,eS(s,a,t.chunk_id)}else if("complete"===t.type)L("Finalizing audio..."),en.current.length>0&&!el.current&&ek(),(async()=>{let s=Date.now();await new Promise(e=>{let t=()=>{let a=Date.now()-s;0===en.current.length&&!el.current||a>3e4?e():setTimeout(t,50)};t()});let t=eA(r,i);t.size>44&&await ey(t,e,!0),eR()})();else if("error"===t.type)throw Error(t.message||"Streaming error")}catch(e){console.error("Failed to parse message:",e),E(e instanceof Error?e.message:"Unknown error"),eR()}},s.send(JSON.stringify({text:e,type:g,voice_files:a}))}catch(e){console.error("Streaming error:",e),E(e instanceof Error?e.message:"Streaming failed"),eR()}}},eR=()=>{en.current=[],el.current=!1,ei.current=0,et.current&&(et.current.close(),et.current=null),es(!1),L(""),F||(O("Stream completed successfully"),setTimeout(()=>O(null),3e3))},eA=(e,s)=>{let t=e.reduce((e,s)=>e+s.length,0),a=new ArrayBuffer(44+t),r=new DataView(a),n=(e,s)=>{for(let t=0;t<s.length;t++)r.setUint8(e+t,s.charCodeAt(t))};n(0,"RIFF"),r.setUint32(4,36+t,!0),n(8,"WAVE"),n(12,"fmt "),r.setUint32(16,16,!0),r.setUint16(20,1,!0),r.setUint16(22,1,!0),r.setUint32(24,s,!0),r.setUint32(28,2*s,!0),r.setUint16(32,2,!0),r.setUint16(34,16,!0),n(36,"data"),r.setUint32(40,t,!0);let l=44,i=new Uint8Array(a);for(let s of e)i.set(s,l),l+=s.length;return new Blob([a],{type:"audio/wav"})},eP=()=>{ep&&(t(_),"generate"===X?ew(_):e_(_))};return(0,a.jsxs)(u,{className:"p-6 w-full border-2 shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center flex-wrap gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,a.jsx)(eX.Z,{className:"h-5 w-5 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Audio Generation"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Create speech from any voice."})]}),(0,a.jsxs)(z,{open:w,onOpenChange:S,children:[(0,a.jsx)(k,{asChild:!0,children:(0,a.jsxs)(m,{variant:"outline",size:"sm",className:"gap-2 hover:bg-primary/5",children:[(0,a.jsx)(eq.Z,{className:"h-4 w-4"}),"Formatting Guide"]})}),(0,a.jsxs)(C,{className:"max-w-3xl max-h-[80vh]",children:[(0,a.jsx)(Z,{children:(0,a.jsxs)(U,{className:"flex items-center gap-2",children:[(0,a.jsx)(eq.Z,{className:"h-5 w-5"})," Text Formatting Guide"]})}),(0,a.jsx)(e3,{className:"max-h-[60vh]",children:(0,a.jsxs)("div",{className:"space-y-6 pr-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-primary/10 to-primary/5 p-4 rounded-lg border border-primary/20",children:[(0,a.jsxs)("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[(0,a.jsx)(eH.Z,{className:"h-4 w-4 text-primary"}),"Quick Tips"]}),(0,a.jsxs)("ul",{className:"text-sm space-y-2 text-muted-foreground",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-primary mt-0.5",children:"â€¢"}),"Use natural punctuation for realistic speech patterns"]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-primary mt-0.5",children:"â€¢"}),"Add pauses with dots (...) for dramatic effect"]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-primary mt-0.5",children:"â€¢"}),"Use *asterisks* for emphasis and ~tildes~ for whispers"]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-primary mt-0.5",children:"â€¢"}),'For multi-speaker, use "Speaker 1:", "Speaker 2:", etc.']})]})]}),e8.map((e,s)=>(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-1 w-1 rounded-full bg-primary"}),e.title]}),(0,a.jsx)("div",{className:"grid gap-3",children:e.examples.map((e,s)=>(0,a.jsxs)("div",{className:"bg-card border rounded-lg p-3 hover:border-primary/50 transition-colors",children:[(0,a.jsx)("div",{className:"font-mono text-sm bg-muted/70 p-3 rounded-md mb-2 border",children:e.text}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-primary mt-0.5",children:"â†’"}),e.description]})]},s))})]},s))]})})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-muted/50 rounded-lg border",children:[(0,a.jsx)(eC.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(eZ,{})]})]}),F&&(0,a.jsxs)(V,{className:"mb-4 border-destructive/50 bg-destructive/10 text-destructive dark:border-destructive animate-in fade-in slide-in-from-top-2 duration-300",children:[(0,a.jsx)(eB.Z,{className:"h-4 w-4"}),(0,a.jsx)(G,{className:"font-medium",children:F})]}),D&&(0,a.jsxs)(V,{className:"mb-4 border-green-500/50 bg-green-500/10 text-green-700 dark:text-green-400 dark:border-green-500 animate-in fade-in slide-in-from-top-2 duration-300",children:[(0,a.jsx)(eH.Z,{className:"h-4 w-4"}),(0,a.jsx)(G,{className:"font-medium",children:D})]}),!x&&(0,a.jsxs)(V,{className:"mb-4 border-yellow-500/50 bg-yellow-500/10 text-yellow-700 dark:text-yellow-400 dark:border-yellow-500",children:[(0,a.jsx)(eB.Z,{className:"h-4 w-4"}),(0,a.jsx)(G,{className:"font-medium",children:"Server setup required to generate audio."})]}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(eW.Z,{className:"h-4 w-4 text-primary"}),"Generation Type"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(m,{variant:"single"===g?"default":"outline",size:"sm",onClick:()=>v("single"),disabled:c||ee||H,className:"flex-1 transition-all",children:[(0,a.jsx)(eW.Z,{className:"h-4 w-4 mr-2"})," Single"]}),(0,a.jsxs)(m,{variant:"multi"===g?"default":"outline",size:"sm",onClick:()=>v("multi"),disabled:c||ee||H,className:"flex-1 transition-all",children:[(0,a.jsx)(eY.Z,{className:"h-4 w-4 mr-2"})," Multi"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(eX.Z,{className:"h-4 w-4 text-primary"}),"Generation Mode"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(m,{variant:"generate"===X?"default":"outline",size:"sm",onClick:()=>q("generate"),disabled:c||ee||H,className:"flex-1 transition-all",children:[(0,a.jsx)(eX.Z,{className:"h-4 w-4 mr-2"})," File"]}),(0,a.jsxs)(m,{variant:"stream"===X?"default":"outline",size:"sm",onClick:()=>q("stream"),disabled:c||ee||H,className:"flex-1 transition-all",children:[(0,a.jsx)(e$.Z,{className:"h-4 w-4 mr-2"})," Live"]})]})]})]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)(eU,{value:_,onChange:e=>T(e.target.value),onKeyDown:e=>{J&&"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),eP())},placeholder:"multi"===g?"Enter dialogue with speaker labels (e.g., 'Speaker 1: Hello!')":ex?"Enter text for ".concat(ex.name,"'s voice..."):"Select a voice, then enter text...",className:"pr-14 py-4 min-h-[140px] resize-none border-2 focus:border-primary transition-colors",disabled:c||ee||H}),(0,a.jsx)("div",{className:"absolute bottom-3 right-3",children:(0,a.jsx)(m,{size:"icon",onClick:eP,disabled:!ep,className:"shadow-lg hover:scale-105 transition-transform",children:(0,a.jsx)(eK.Z,{className:"w-4 h-4"})})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center px-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eT,{id:"enter-to-send",checked:J,onCheckedChange:Q,disabled:c||ee||H}),(0,a.jsx)(b,{htmlFor:"enter-to-send",className:"text-xs text-muted-foreground cursor-pointer",children:"Press Enter to generate"})]}),(0,a.jsxs)("p",{className:"text-xs font-medium transition-colors ".concat(_.length>9e3?"text-destructive":_.length>7e3?"text-yellow-600":"text-muted-foreground"),children:[_.length," / ",1e4]})]})]}),(0,a.jsx)("div",{className:"space-y-4 my-6",children:"single"===g?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(eW.Z,{className:"h-4 w-4 text-primary"}),"Selected Voice"]}),(0,a.jsx)("div",{className:"p-4 bg-gradient-to-r from-muted/50 to-muted/30 rounded-lg border-2 border-muted hover:border-primary/50 transition-colors",children:ex?(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-primary/10 rounded-full",children:(0,a.jsx)(eW.Z,{className:"h-4 w-4 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:ex.name}),eh&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[eh.name," emotion"]})]})]}),eh&&(0,a.jsx)(f,{variant:"secondary",className:"ml-auto",children:eh.name})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(eB.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:"No voice selected"})]})})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(eY.Z,{className:"h-4 w-4 text-primary"}),"Selected Speakers (",j.length,")"]}),(0,a.jsxs)("div",{className:"p-4 bg-gradient-to-r from-muted/50 to-muted/30 rounded-lg border-2 border-muted space-y-3",children:[j.length>0?(0,a.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:j.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-background/80 backdrop-blur-sm p-3 rounded-lg border hover:border-primary/50 transition-all group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(f,{variant:"default",className:"min-w-[90px]",children:["Speaker ",s+1]}),(0,a.jsx)("span",{className:"font-medium text-sm",children:e.name})]}),(0,a.jsx)(m,{variant:"ghost",size:"icon",className:"h-7 w-7 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-destructive/10 hover:text-destructive",onClick:()=>eg(e.id),disabled:c||ee||H,children:(0,a.jsx)(y.Z,{className:"h-4 w-4"})})]},e.id))}):(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground py-2",children:[(0,a.jsx)(eB.Z,{className:"h-4 w-4"}),(0,a.jsx)("p",{className:"text-sm",children:"Add at least 2 speakers to begin."})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2 border-t",children:[(0,a.jsxs)(eF,{onValueChange:e=>{let s=i.find(s=>s.id===e);s&&!j.find(s=>s.id===e)&&N([...j,{id:s.id,name:s.name}])},disabled:c||ee||H,children:[(0,a.jsx)(eI,{className:"flex-1 border-2 hover:border-primary/50 transition-colors",children:(0,a.jsx)(eE,{placeholder:"Add a speaker..."})}),(0,a.jsx)(eD,{children:i.filter(e=>!j.some(s=>s.id===e.id)).map(e=>(0,a.jsx)(eV,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eW.Z,{className:"h-3 w-3"}),e.name]})},e.id))})]}),(0,a.jsx)(m,{variant:"outline",size:"icon",className:"shrink-0",disabled:i.length===j.length||c||ee||H,children:(0,a.jsx)(eJ.Z,{className:"h-4 w-4"})})]})]})]})}),(c||ee||H)&&(0,a.jsxs)("div",{className:"space-y-4 mb-6 p-4 bg-gradient-to-r from-primary/5 to-primary/10 rounded-lg border-2 border-primary/20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(eQ.Z,{className:"h-5 w-5 animate-spin text-primary"}),ee&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full animate-pulse"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold",children:M}),$>1&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Attempt ",$," of ",3]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[ee&&(0,a.jsxs)(f,{variant:"destructive",className:"animate-pulse",children:[(0,a.jsx)(e$.Z,{className:"h-3 w-3 mr-1"}),"LIVE"]}),$>1&&(0,a.jsxs)(f,{variant:"secondary",children:["Retry ",$,"/",3]})]})]}),(c||H)&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(I,{value:A,className:"h-2"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground text-center",children:[Math.round(A),"% complete"]})]}),ee&&(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("div",{className:"h-8 w-1 bg-primary/60 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),(0,a.jsx)("div",{className:"h-8 w-1 bg-primary/60 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),(0,a.jsx)("div",{className:"h-8 w-1 bg-primary/60 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),(0,a.jsx)("span",{children:"Audio is playing live..."})]})]}),(H||ee)&&(0,a.jsx)("div",{className:"flex gap-3 mb-6",children:"generate"===X?(0,a.jsxs)(m,{onClick:()=>{eo.current&&(eo.current.abort(),Y(!0),o(!1),B(!1),P(0),L(""),K(0),E("Generation cancelled by user"),setTimeout(()=>E(null),3e3))},variant:"destructive",size:"lg",className:"flex-1 hover:scale-[1.02] transition-transform",children:[(0,a.jsx)(e0.Z,{className:"h-4 w-4 mr-2"})," Cancel Generation"]}):(0,a.jsxs)(m,{onClick:eR,variant:"destructive",className:"flex-1 gap-2 hover:scale-[1.02] transition-transform",size:"lg",children:[(0,a.jsx)(e4.Z,{className:"h-4 w-4"})," Stop Streaming"]})}),!ep&&!c&&!ee&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-muted/30 rounded-lg border-2 border-dashed border-muted-foreground/30",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,a.jsx)(eB.Z,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold mb-1",children:"Requirements Checklist"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Complete all requirements to generate audio"})]})]}),(0,a.jsxs)("ul",{className:"space-y-2",children:[(0,a.jsxs)("li",{className:"flex items-center gap-3 p-2 rounded transition-colors ".concat(_.trim()?"bg-green-500/10":"bg-muted/50"),children:[(0,a.jsx)("div",{className:"w-5 h-5 rounded-full flex items-center justify-center ".concat(_.trim()?"bg-green-500":"bg-muted-foreground/30"),children:_.trim()&&(0,a.jsx)(eH.Z,{className:"h-3 w-3 text-white"})}),(0,a.jsx)("span",{className:"text-sm ".concat(_.trim()?"text-green-700 dark:text-green-400 font-medium":"text-muted-foreground"),children:"Enter text to convert"})]}),"single"===g?(0,a.jsxs)("li",{className:"flex items-center gap-3 p-2 rounded transition-colors ".concat(n?"bg-green-500/10":"bg-muted/50"),children:[(0,a.jsx)("div",{className:"w-5 h-5 rounded-full flex items-center justify-center ".concat(n?"bg-green-500":"bg-muted-foreground/30"),children:n&&(0,a.jsx)(eH.Z,{className:"h-3 w-3 text-white"})}),(0,a.jsx)("span",{className:"text-sm ".concat(n?"text-green-700 dark:text-green-400 font-medium":"text-muted-foreground"),children:"Select a voice from sidebar"})]}):(0,a.jsxs)("li",{className:"flex items-center gap-3 p-2 rounded transition-colors ".concat(j.length>=2?"bg-green-500/10":"bg-muted/50"),children:[(0,a.jsx)("div",{className:"w-5 h-5 rounded-full flex items-center justify-center ".concat(j.length>=2?"bg-green-500":"bg-muted-foreground/30"),children:j.length>=2&&(0,a.jsx)(eH.Z,{className:"h-3 w-3 text-white"})}),(0,a.jsx)("span",{className:"text-sm ".concat(j.length>=2?"text-green-700 dark:text-green-400 font-medium":"text-muted-foreground"),children:"Select at least 2 speakers"})]}),(0,a.jsxs)("li",{className:"flex items-center gap-3 p-2 rounded transition-colors ".concat(x?"bg-green-500/10":"bg-muted/50"),children:[(0,a.jsx)("div",{className:"w-5 h-5 rounded-full flex items-center justify-center ".concat(x?"bg-green-500":"bg-muted-foreground/30"),children:x&&(0,a.jsx)(eH.Z,{className:"h-3 w-3 text-white"})}),(0,a.jsx)("span",{className:"text-sm ".concat(x?"text-green-700 dark:text-green-400 font-medium":"text-muted-foreground"),children:"Complete server setup"})]})]})]}),(null==p?void 0:p.current_model)&&!(null==p?void 0:null===(e=p.current_model)||void 0===e?void 0:e.includes("large"))&&(0,a.jsx)("div",{className:"mt-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(ec.Z,{className:"h-5 w-5 text-yellow-600 flex-shrink-0"}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Notice:"})," Youâ€™re using a lighter version of our AI model, which helps it run smoothly on your device â€” but it might slightly reduce the audio quality. For the best experience, we recommend using this app on a computer with 16GB RAM or more, or try our one-click RunPod setup for top performance.",(0,a.jsx)("br",{})," ",(0,a.jsx)("br",{}),"AI isnâ€™t perfect â€” it might make a few small mistakes (around 1 in 100 for file generation and 5 in 100 for live audio). So itâ€™s always good to listen and verify your results."]})})]})}),(null==p?void 0:p.current_model)&&(null==p?void 0:null===(s=p.current_model)||void 0===s?void 0:s.includes("large"))&&(0,a.jsx)("div",{className:"mt-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(ec.Z,{className:"h-5 w-5 text-yellow-600 flex-shrink-0"}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Notice:"})," Youâ€™re using the full version of our AI model for the highest-quality audio. This version gives you the best possible results but may need a powerful computer to run smoothly. If your device slows down, you can or use our RunPod one-click deploy for faster performance. While accuracy is very high, AI can still make a few small errors â€” so itâ€™s a good idea to double-check your audio output."]})})]})})]})}var e9=t(8846);function e7(e){let{className:s,defaultValue:t,value:n,min:l=0,max:i=100,...c}=e,d=r.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[l,i],[n,t,l,i]);return(0,a.jsxs)(e9.fC,{"data-slot":"slider",defaultValue:t,value:n,min:l,max:i,className:o("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",s),...c,children:[(0,a.jsx)(e9.fQ,{"data-slot":"slider-track",className:"bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5",children:(0,a.jsx)(e9.e6,{"data-slot":"slider-range",className:"bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full"})}),Array.from({length:d.length},(e,s)=>(0,a.jsx)(e9.bU,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},s))]})}var se=t(2735);function ss(e){let{audioUrl:s,audioId:t,text:n,className:l}=e,[i,c]=(0,r.useState)(!1),[d,x]=(0,r.useState)(0),[h,p]=(0,r.useState)(0),[g,v]=(0,r.useState)([1]),[f,j]=(0,r.useState)(Array(32).fill(2)),N=(0,r.useRef)(null),b=(0,r.useRef)(null),w=(0,r.useRef)(null),y=(0,r.useRef)(null),z=(0,r.useRef)(null),k=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=N.current;if(!e)return;let s=()=>{if(!w.current)try{let s=new(window.AudioContext||window.webkitAudioContext),t=s.createAnalyser();t.fftSize=256,t.smoothingTimeConstant=.8,t.minDecibels=-90,t.maxDecibels=-10;let a=s.createMediaElementSource(e);a.connect(t),t.connect(s.destination),w.current=s,y.current=t,z.current=a,k.current=new Uint8Array(t.frequencyBinCount)}catch(e){console.error("Failed to initialize audio context:",e)}};return e.addEventListener("play",s,{once:!0}),()=>{var t,a;e.removeEventListener("play",s),(null===(t=w.current)||void 0===t?void 0:t.state)!=="closed"&&(null===(a=w.current)||void 0===a||a.close())}},[]),(0,r.useEffect)(()=>{let e=N.current;if(!e)return;let s=()=>p(e.duration),t=()=>x(e.currentTime),a=()=>c(!1),r=()=>c(!0),n=()=>c(!1);return e.addEventListener("loadedmetadata",s),e.addEventListener("timeupdate",t),e.addEventListener("ended",a),e.addEventListener("play",r),e.addEventListener("pause",n),()=>{e.removeEventListener("loadedmetadata",s),e.removeEventListener("timeupdate",t),e.removeEventListener("ended",a),e.removeEventListener("play",r),e.removeEventListener("pause",n)}},[]),(0,r.useEffect)(()=>{let e=y.current,s=k.current;if(i&&e&&s){let t=e.frequencyBinCount,a=Array.from({length:32},(e,s)=>Math.round(Math.exp((s+1)/32*Math.log(t-1))-1));a.unshift(0);let r=()=>{e.getByteFrequencyData(s);let t=Array.from({length:32},(e,t)=>{let r=a[t],n=a[t+1],l=s.slice(r,n);return 0===l.length?0:255*Math.pow(l.reduce((e,s)=>e+s,0)/l.length/255,2)/255*100});j(e=>e.map((e,s)=>{let a=t[s],r=a>e?.5:.8;return e*r+a*(1-r)})),b.current=requestAnimationFrame(r)};r()}else{b.current&&cancelAnimationFrame(b.current);let e=()=>{j(s=>{let t=s.map(e=>.9*e);return t.every(e=>e<2.1)?Array(32).fill(2):(b.current=requestAnimationFrame(e),t)})};b.current=requestAnimationFrame(e)}return()=>{b.current&&cancelAnimationFrame(b.current)}},[i]);let S=async()=>{let e=N.current;if(e){if(i)e.pause();else try{var s;(null===(s=w.current)||void 0===s?void 0:s.state)==="suspended"&&await w.current.resume(),await e.play()}catch(e){console.error("Failed to play audio:",e)}}},_=e=>"".concat(Math.floor(e/60),":").concat(Math.floor(e%60).toString().padStart(2,"0"));return(0,a.jsxs)(u,{className:o("p-4",l),children:[(0,a.jsx)("audio",{ref:N,src:s,preload:"metadata",crossOrigin:"anonymous"}),(0,a.jsx)("div",{className:"mb-4 p-3 bg-muted/50 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm font-mono leading-relaxed line-clamp-2",children:n})}),(0,a.jsxs)("div",{className:"mb-4 p-4 bg-black/5 dark:bg-white/5 rounded-lg",children:[(0,a.jsx)("div",{className:"flex items-end gap-[3px] h-20 justify-center",children:f.map((e,s)=>(0,a.jsx)("div",{className:o("bg-gradient-to-t from-primary/50 to-primary rounded-full","transition-opacity duration-300 ease-out"),style:{width:"5px",height:"".concat(Math.max(2,e),"%"),opacity:i?1:.4}},s))}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-2",children:[(0,a.jsx)(eN.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:i?"Analyzing Audio":"Ready"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(e7,{value:[h>0?d/h*100:0],onValueChange:e=>{let s=N.current;if(!s)return;let t=e[0]/100*h;s.currentTime=t,x(t)},max:100,step:.1,className:"w-full",disabled:0===h}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:_(d)}),(0,a.jsx)("span",{children:_(h)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(m,{onClick:S,disabled:0===h,size:"sm",className:"gap-2",children:[i?(0,a.jsx)(ek.Z,{className:"h-4 w-4"}):(0,a.jsx)(eS.Z,{className:"h-4 w-4"}),i?"Pause":"Play"]}),(0,a.jsxs)(m,{onClick:()=>{let e=document.createElement("a");e.href=s,e.download="Deepfak3r-audio-".concat(t,".wav"),document.body.appendChild(e),e.click(),document.body.removeChild(e)},variant:"outline",size:"sm",className:"gap-2 bg-transparent",children:[(0,a.jsx)(se.Z,{className:"h-4 w-4"}),"Download"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[(0,a.jsx)(eW.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(e7,{value:g,onValueChange:e=>{let s=N.current;s&&(v(e),s.volume=e[0])},max:1,step:.1,className:"w-20"})]})]})]})]})}var st=t(5621);function sa(){let{generatedAudios:e,voices:s,removeGeneratedAudio:t}=(0,R.m)(),r=async e=>{if(confirm("Are you sure you want to delete this audio?"))try{await t(e)}catch(e){console.error("Failed to delete audio:",e)}};return 0===e.length?(0,a.jsxs)(u,{className:"p-6 text-center",children:[(0,a.jsx)(st.Z,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No generated audio yet"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Generated audio will appear here"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(st.Z,{className:"h-5 w-5"}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Generated Audio"}),(0,a.jsx)(f,{variant:"secondary",children:e.length})]}),e.length>1&&(0,a.jsxs)(m,{onClick:()=>{e.forEach(e=>{let s=document.createElement("a");s.href=e.audioUrl,s.download="DeepFak3r-".concat(e.id,".wav"),document.body.appendChild(s),s.click(),document.body.removeChild(s)})},variant:"outline",size:"sm",className:"gap-2",children:[(0,a.jsx)(se.Z,{className:"h-4 w-4"}),"Download All"]})]}),(0,a.jsx)("div",{className:"space-y-4",children:e.slice().reverse().map(e=>{let t=s.find(s=>s.id===e.voiceId),n=null==t?void 0:t.emotions.find(s=>s.id===e.emotionId);return(0,a.jsxs)("div",{className:"space-y-2 p-4 rounded-lg border bg-background",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eW.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:(null==t?void 0:t.name)||"Unknown Voice"}),n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"â€¢"}),(0,a.jsx)("span",{children:n.name})]}),(0,a.jsx)("span",{children:"â€¢"}),(0,a.jsx)("span",{children:new Date(e.createdAt).toLocaleString()})]}),(0,a.jsx)(m,{onClick:()=>r(e.id),variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-muted-foreground hover:text-destructive",children:(0,a.jsx)(ez.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)(ss,{audioUrl:e.audioUrl,audioId:e.id,text:e.text})]},e.id)})}),e.length>0&&(0,a.jsx)(u,{className:"p-4 bg-muted/50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{children:["Total: ",e.length," audio files"]}),(0,a.jsxs)("span",{children:["Storage: ~",Math.round(1.2*e.length),"MB estimated"]})]})})]})}var sr=t(7845);function sn(e){let{delayDuration:s=0,...t}=e;return(0,a.jsx)(sr.zt,{"data-slot":"tooltip-provider",delayDuration:s,...t})}function sl(e){let{...s}=e;return(0,a.jsx)(sn,{children:(0,a.jsx)(sr.fC,{"data-slot":"tooltip",...s})})}function si(e){let{...s}=e;return(0,a.jsx)(sr.xz,{"data-slot":"tooltip-trigger",...s})}function sc(e){let{className:s,sideOffset:t=0,children:r,...n}=e;return(0,a.jsx)(sr.h_,{children:(0,a.jsxs)(sr.VY,{"data-slot":"tooltip-content",sideOffset:t,className:o("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",s),...n,children:[r,(0,a.jsx)(sr.Eh,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var so=t(6362),sd=t(2682);function sm(){var e;let{hardwareInfo:s,serverConfig:t,serverSetupStep:n,isServerSetupComplete:l,licenseKey:i,checkHardware:c,setServerConfig:o,checkServerHealth:d,setServerSetupStep:v,setLicenseKey:N,deployToRunPod:w}=(0,R.m)(),[z,k]=(0,r.useState)(i||""),[S,_]=(0,r.useState)(!1),[C,Z]=(0,r.useState)(""),[U,T]=(0,r.useState)(""),[A,P]=(0,r.useState)(""),[M,L]=(0,r.useState)(!1),[F,E]=(0,r.useState)(null),[D,O]=(0,r.useState)(null),[X,q]=(0,r.useState)(null),[H,B]=(0,r.useState)(null),[W,Y]=(0,r.useState)(!1),$=(0,r.useRef)(!1),K=(0,r.useRef)(null),[J,Q]=(0,r.useState)("");(0,r.useEffect)(()=>{i?v("hardware-check"):v("license-input")},[i,v]),(0,r.useEffect)(()=>{if("hardware-check"===n){if(s){let e=s.recommendedSetup;"local"===e&&"macos"==s.os&&(Q("Local Server setup is currently only supported on Windows and Linux. We recommend using RunPod for the best performance on your Macos(update coming soon)."),e="runpod"),v({local:"server-download",remote:"url-input",runpod:"runpod-deploy"}[e]||"url-input")}else c()}},[s,n,c,v]);let ee=async()=>{if(!U.trim())return;let e=function(e){try{let s=new URL(e);if(!["http:","https:"].includes(s.protocol))return{isValid:!1,error:"URL must use HTTP or HTTPS protocol"};if(!s.hostname)return{isValid:!1,error:"URL must have a valid hostname"};let t="".concat(s.protocol,"//").concat(s.hostname).concat(s.port?":".concat(s.port):"");return{isValid:!0,normalizedUrl:t}}catch(e){return{isValid:!1,error:"Invalid URL format"}}}(U.trim());if(!e.isValid){alert(e.error||"Invalid URL format. Please enter a valid HTTP/HTTPS URL.");return}L(!0);try{let t={type:"remote",url:e.normalizedUrl,current_model:null,cpu_usage:0,gpu_available:s.hasGPU,gpu_memory_usage:null,gpu_utilization:null,model_loaded:!1,ram_usage_percent:0,warmup_complete:!1,status:"checking"};await o(t),await d()?R.m.setState({serverSetupStep:"complete"}):alert("Server is not reachable or license is invalid. Please check the URL, server status, and your license key.")}catch(e){alert("Failed to connect: ".concat(e.message))}finally{L(!1)}};(0,r.useEffect)(()=>{let e=async e=>{let t=e.detail;if(E(t),"ready"===t.stage&&t.url&&t.podId){var a,r;if(null===(r=window.pywebview)||void 0===r?void 0:null===(a=r.api)||void 0===a?void 0:a.set_active_runpod_instance){let e=A.trim();await window.pywebview.api.set_active_runpod_instance(e,t.podId)}let e={type:"runpod",url:t.url,current_model:null,cpu_usage:0,gpu_available:s.hasGPU,gpu_memory_usage:null,gpu_utilization:null,model_loaded:!1,ram_usage_percent:0,warmup_complete:!1,status:"checking"};await o(e),await d()?R.m.setState({serverSetupStep:"complete"}):E({...t,stage:"error",error:"RunPod server deployed but is not healthy or license is invalid."})}};return window.addEventListener("runpod-progress",e),()=>{window.removeEventListener("runpod-progress",e)}},[o,d,A]);let es=async()=>{A.trim()&&(E({stage:"validating",progress:0,message:"Initializing deployment..."}),await w(A.trim(),E))};(0,r.useEffect)(()=>{if((null==s?void 0:s.recommendedSetup)==="local"&&!D){console.log("[useLocalServerManager] Initializing LocalServerManager");let e=sd.Yg.getInstance();e.setProgressCallback(e=>{console.log("[useLocalServerManager] Progress update:",e),q(e)}),O(e)}return()=>{K.current&&clearInterval(K.current)}},[s,D]),(0,r.useEffect)(()=>{if(!D)return;if(!(null!==X||(null==t?void 0:t.type)==="local"||$.current)){K.current&&(clearInterval(K.current),K.current=null);return}let e=async()=>{try{let e=await D.getServerInfo();B(e)}catch(e){console.error("[useLocalServerManager] Failed to get server info:",e)}};return e(),K.current=setInterval(e,3e3),()=>{K.current&&(clearInterval(K.current),K.current=null)}},[D,X,t]);let et=(0,r.useCallback)(async()=>{if(!D||!s){console.warn("[useLocalServerManager] Cannot setup: missing manager or hardware info");return}if($.current){console.warn("[useLocalServerManager] Setup already in progress");return}$.current=!0;try{console.log("[useLocalServerManager] Starting server setup"),await D.setupLocalServer();let e=0,t=1e3,a=async()=>{for(;e<20;){try{if((await D.getServerInfo()).isRunning){console.log("[useLocalServerManager] Server is running, checking health");let e={type:"local",url:D.getServerUrl(),current_model:null,cpu_usage:0,gpu_available:s.hasGPU,gpu_memory_usage:null,gpu_utilization:null,model_loaded:!1,ram_usage_percent:0,warmup_complete:!1,status:"checking"};if(await o(e),await d())return console.log("[useLocalServerManager] Server is healthy"),q(null),!0}}catch(s){console.warn("[useLocalServerManager] Server readiness check failed (attempt ".concat(e+1,"/").concat(20,"):"),s)}await new Promise(e=>setTimeout(e,Math.min(t,5e3))),t*=1.5,e++}return!1};if(!await a())throw Error("Server failed to become ready within expected time");console.log("[useLocalServerManager] Setup completed successfully")}catch(e){console.error("[useLocalServerManager] Setup failed:",e),q({stage:"error",progress:0,message:"Setup failed",error:e instanceof Error?e.message:"Unknown error"})}finally{$.current=!1}},[D,s,o,d]),ea=(0,r.useCallback)(async()=>{if(!D){console.warn("[useLocalServerManager] Cannot start: manager not initialized");return}try{console.log("[useLocalServerManager] Starting local server"),await D.startServer(),await new Promise(e=>setTimeout(e,2e3));let e=await D.getServerInfo();if(B(e),e.isRunning&&s){let e={type:"local",url:D.getServerUrl(),current_model:null,cpu_usage:0,gpu_available:s.hasGPU,gpu_memory_usage:null,gpu_utilization:null,model_loaded:!1,ram_usage_percent:0,warmup_complete:!1,status:"checking"};await o(e),await d(),console.log("[useLocalServerManager] Server started successfully")}}catch(e){console.error("[useLocalServerManager] Failed to start server:",e)}},[D,s,o,d]),er=(0,r.useCallback)(async()=>{if(!D){console.warn("[useLocalServerManager] Cannot stop: manager not initialized");return}try{console.log("[useLocalServerManager] Stopping local server"),await D.stopServer(),await new Promise(e=>setTimeout(e,1e3));let e=await D.getServerInfo();B(e),console.log("[useLocalServerManager] Server stopped successfully")}catch(e){console.error("[useLocalServerManager] Failed to stop server:",e)}},[D]),el=(0,r.useCallback)(async()=>{if(D)try{console.log("[useLocalServerManager] Cancelling setup"),await D.cancelSetup(),q(null),$.current=!1}catch(e){console.error("[useLocalServerManager] Failed to cancel setup:",e)}},[D]),ei=(0,r.useCallback)(async()=>{if(D){Y(!0);try{let e=await D.getServerInfo();B(e),console.log("[useLocalServerManager] Server info refreshed")}catch(e){console.error("[useLocalServerManager] Failed to refresh server info:",e)}finally{Y(!1)}}},[D]),ec=async()=>{if(!z.trim()){Z("Please enter your license key");return}_(!0),Z("");try{await N(z.trim()),v("hardware-check")}catch(e){Z("Failed to save license key. Please try again.")}finally{_(!1)}};return l?null:(0,a.jsx)(sn,{children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(u,{className:"w-full max-w-3xl bg-zinc-900 border-zinc-800 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(x,{children:[(0,a.jsxs)(h,{className:"text-white flex items-center gap-2",children:[(0,a.jsx)(eo.Z,{className:"h-5 w-5"}),"license-input"===n?"License Activation":"Server Setup"]}),(0,a.jsx)(p,{className:"text-zinc-400",children:"license-input"===n?"Enter your license key to begin setup.":"Configure your server for optimal performance."})]}),(0,a.jsxs)(g,{className:"space-y-6",children:["license-input"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"p-4 bg-blue-900/20 border border-blue-800 rounded-lg",children:(0,a.jsx)("p",{className:"text-zinc-300 text-sm",children:"Please enter your license key to activate the software. You can find the key in your purchase confirmation email."})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b,{htmlFor:"license-key",className:"text-white",children:"License Key"}),(0,a.jsx)(j,{id:"license-key",value:z,onChange:e=>{k(e.target.value),Z("")},placeholder:"XXXXXXXX-XXXXXXXX-XXXXXXXX-XXXXXXXX",className:"bg-zinc-800 border-zinc-700 text-white font-mono",autoFocus:!0,type:"password"}),C&&(0,a.jsxs)(V,{variant:"destructive",children:[(0,a.jsx)(eB.Z,{className:"h-4 w-4"}),(0,a.jsx)(G,{children:C})]})]}),(0,a.jsx)(m,{onClick:ec,disabled:!z.trim()||S,className:"w-full bg-blue-600 hover:bg-blue-700",children:S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eQ.Z,{className:"h-4 w-4 animate-spin mr-2"}),"Saving Key..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(en.Z,{className:"h-4 w-4 mr-2"}),"Save & Continue"]})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("a",{href:"https://gumroad.com/library",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline text-sm inline-flex items-center gap-1",children:[(0,a.jsx)(so.Z,{className:"h-3 w-3"}),"Find my license key"]})})]}),J&&"hardware-check"!==n&&"complete"!==n&&"license-input"!==n&&(0,a.jsxs)(V,{variant:"default",className:"border-blue-800",children:[(0,a.jsx)(eB.Z,{className:"h-4 w-4"}),(0,a.jsx)(G,{children:J})]}),"hardware-check"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eQ.Z,{className:"h-4 w-4 animate-spin text-blue-400"}),(0,a.jsx)("span",{className:"text-white",children:"Analyzing hardware capabilities..."})]}),(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"This may take a few moments while we detect your system specifications."})]}),s&&"hardware-check"!==n&&"license-input"!==n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-white font-medium",children:"Hardware Detection Results"}),(0,a.jsxs)(f,{variant:s.hasGPU?"default":"secondary",children:[null===(e=s.recommendedSetup)||void 0===e?void 0:e.toUpperCase()," SETUP"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsxs)(sl,{children:[(0,a.jsx)(si,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)(eo.Z,{className:"h-4 w-4 text-zinc-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"System"}),(0,a.jsxs)(f,{variant:"outline",children:[s.os," ",s.arch]})]})]})}),(0,a.jsx)(sc,{children:(0,a.jsx)("p",{children:"Operating system and architecture"})})]}),(0,a.jsxs)(sl,{children:[(0,a.jsx)(si,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)(ep.Z,{className:"h-4 w-4 text-zinc-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"GPUs Found"}),(0,a.jsx)(f,{variant:s.hasGPU?"default":"secondary",children:s.gpus.length})]})]})}),(0,a.jsx)(sc,{children:(0,a.jsx)("p",{children:"Number of detected graphics processing units"})})]}),(0,a.jsxs)(sl,{children:[(0,a.jsx)(si,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)(eg.Z,{className:"h-4 w-4 text-zinc-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Total VRAM"}),(0,a.jsxs)(f,{variant:s.totalVRAM>=8?"default":"secondary",children:[s.totalVRAM,"GB"]})]})]})}),(0,a.jsx)(sc,{children:(0,a.jsx)("p",{children:"Total video memory across all GPUs. Minimum 8GB recommended for local setup."})})]})]}),s.gpus.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Detected GPUs:"}),s.gpus.map((e,s)=>(0,a.jsxs)(sl,{children:[(0,a.jsx)(si,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(ev.Z,{className:"h-4 w-4 ".concat(e.isSupported?"text-green-400":"text-red-400")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:e.model}),(0,a.jsxs)("span",{className:"text-zinc-400 text-xs ml-2",children:["(",e.vendor,")"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(f,{variant:e.isSupported?"default":"secondary",children:[e.vramGB,"GB"]}),(0,a.jsx)(f,{variant:e.isSupported?"default":"destructive",children:e.isSupported?"Supported":"Insufficient"})]})]})}),(0,a.jsxs)(sc,{children:[(0,a.jsxs)("p",{children:["Performance Score: ",e.performanceScore,"/100"]}),(0,a.jsx)("p",{children:e.isSupported?"This GPU meets the minimum requirements for voice processing":"This GPU doesn't meet the minimum 8GB VRAM requirement"})]})]},s))]}),"complete"!==n&&(null==s?void 0:s.os)!=="macos"&&(0,a.jsxs)(V,{className:"border-".concat("local"===s.recommendedSetup?"green":"remote"===s.recommendedSetup?"yellow":"blue","-800"),children:[(0,a.jsx)(eB.Z,{className:"h-4 w-4"}),(0,a.jsxs)(G,{className:"text-zinc-300",children:[(0,a.jsx)("strong",{children:"Recommendation:"})," ","local"===s.recommendedSetup?"Your hardware is excellent for local voice processing. We recommend downloading the local server for optimal performance and privacy.":"remote"===s.recommendedSetup?"Your hardware can handle DeepFak3r VibeVoice but may benefit from a remote server for better performance. You can try local setup or use a custom server.":"Your hardware is insufficient for local voice processing. We recommend using RunPod cloud deployment for optimal performance with high-end GPUs."]})]})]}),"server-download"===n&&s&&(0,a.jsxs)("div",{className:"space-y-4",children:[H&&(0,a.jsxs)(u,{className:"bg-zinc-800 border-zinc-700",children:[(0,a.jsx)(x,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(h,{className:"text-sm text-white",children:"Local Server Status"}),(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:ei,disabled:W,className:"text-zinc-400 hover:text-white",children:W?(0,a.jsx)(eQ.Z,{className:"h-3 w-3 animate-spin"}):"Refresh"})]})}),(0,a.jsxs)(g,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Installation"}),(0,a.jsx)(f,{variant:H.isInstalled?"default":"secondary",children:H.isInstalled?"Installed":"Not Installed"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Status"}),(0,a.jsx)(f,{variant:H.isRunning?"default":"secondary",children:H.isRunning?"Running":"Stopped"})]}),H.version&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Version"}),(0,a.jsx)("span",{className:"text-white text-sm",children:H.version})]}),H.pid&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"PID"}),(0,a.jsx)("span",{className:"text-white text-sm",children:H.pid})]})]}),H.isInstalled&&(0,a.jsx)("div",{className:"flex gap-2",children:H.isRunning?(0,a.jsxs)(m,{variant:"destructive",size:"sm",onClick:er,className:"flex items-center gap-1",children:[(0,a.jsx)(e4.Z,{className:"h-3 w-3"}),"Stop Server"]}):(0,a.jsxs)(m,{variant:"default",size:"sm",onClick:ea,className:"flex items-center gap-1 bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(eS.Z,{className:"h-3 w-3"}),"Start Server"]})})]})]}),X&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["error"===X.stage?(0,a.jsx)(eB.Z,{className:"h-4 w-4 text-red-400"}):"complete"===X.stage?(0,a.jsx)(en.Z,{className:"h-4 w-4 text-green-400"}):(0,a.jsx)(eQ.Z,{className:"h-4 w-4 animate-spin text-blue-400"}),(0,a.jsx)("span",{className:"text-white text-sm",children:X.message})]}),"error"!==X.stage&&"complete"!==X.stage&&(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:el,className:"text-zinc-400 hover:text-red-400",children:(0,a.jsx)(y.Z,{className:"h-4 w-4"})})]}),"error"!==X.stage&&"complete"!==X.stage&&(0,a.jsx)(I,{value:X.progress,className:"w-full"}),X.error&&(0,a.jsxs)(V,{className:"border-red-800",children:[(0,a.jsx)(eB.Z,{className:"h-4 w-4"}),(0,a.jsx)(G,{className:"text-red-400",children:X.error})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(m,{onClick:et,disabled:!!X&&"error"!==X.stage&&"complete"!==X.stage&&(null==s?void 0:s.os)=="macos",className:"flex-1 bg-blue-600 hover:bg-blue-700",children:X&&"error"!==X.stage&&"complete"!==X.stage?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eQ.Z,{className:"h-4 w-4 animate-spin mr-2"}),"downloading"===X.stage?"Downloading...":"extracting"===X.stage?"Extracting...":"installing"===X.stage?"Installing...":"starting"===X.stage?"Starting...":"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(se.Z,{className:"h-4 w-4 mr-2"}),(null==H?void 0:H.isInstalled)?"Start Local Server":"Download & Setup Server"]})}),(0,a.jsx)(m,{variant:"outline",onClick:()=>v("url-input"),className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",disabled:!!X&&"error"!==X.stage&&"complete"!==X.stage,children:"Use Custom Server"}),(0,a.jsx)(m,{variant:"outline",onClick:()=>v("runpod-deploy"),className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",disabled:!!X&&"error"!==X.stage&&"complete"!==X.stage,children:"Deploy to runpod anyway"})]})]}),"url-input"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b,{htmlFor:"server-url",className:"text-white",children:"Server URL"}),(0,a.jsx)(j,{id:"server-url",value:U,onChange:e=>T(e.target.value),placeholder:"https://your-server.com:8000",className:"bg-zinc-800 border-zinc-700 text-white"}),(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Enter the URL of your DeepFak3r Vibe Voice server (e.g., http://localhost:8000 or https://remote-server.com)"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(m,{onClick:ee,disabled:!U.trim()||M,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:M?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eQ.Z,{className:"h-4 w-4 animate-spin mr-2"}),"Checking Connection..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eo.Z,{className:"h-4 w-4 mr-2"}),"Connect to Server"]})}),(0,a.jsx)(m,{variant:"outline",onClick:()=>v("runpod-deploy"),className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:"Deploy to RunPod"}),(null==s?void 0:s.recommendedSetup)==="local"&&(0,a.jsx)(m,{variant:"outline",onClick:()=>v("server-download"),className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:"Back to Local Setup"})]})]}),"runpod-deploy"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-blue-900/20 border border-blue-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(so.Z,{className:"h-4 w-4 text-blue-400"}),(0,a.jsx)("span",{className:"text-blue-400 font-medium",children:"RunPod Cloud Deployment"})]}),(0,a.jsx)("p",{className:"text-zinc-300 text-sm mb-3",children:"Rent a computer online with 24GB+ VRAM GPU (RTX 5090, RTX 4090, or similar) on RunPod. Costs approximately $0.50-2.00/hour."}),(0,a.jsxs)("a",{href:"https://www.runpod.io/console/user/settings/api-keys",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-400 hover:underline text-sm",children:[(0,a.jsx)(so.Z,{className:"h-3 w-3"}),"Get your RunPod API key here"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b,{htmlFor:"runpod-key",className:"text-white",children:"RunPod API Key"}),(0,a.jsx)(j,{id:"runpod-key",type:"password",value:A,onChange:e=>P(e.target.value),placeholder:"Enter your RunPod API key",className:"bg-zinc-800 border-zinc-700 text-white"}),(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Your API key is used to deploy and manage the server instance. It's not stored anywhere and only used for deployment."})]}),F&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["error"===F.stage?(0,a.jsx)(eB.Z,{className:"h-4 w-4 text-red-400"}):"ready"===F.stage?(0,a.jsx)(en.Z,{className:"h-4 w-4 text-green-400"}):(0,a.jsx)(eQ.Z,{className:"h-4 w-4 animate-spin text-blue-400"}),(0,a.jsx)("span",{className:"text-white text-sm",children:F.message})]}),"error"!==F.stage&&"ready"!==F.stage&&(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:el,className:"text-zinc-400 hover:text-red-400",children:(0,a.jsx)(y.Z,{className:"h-4 w-4"})})]}),"error"!==F.stage&&"ready"!==F.stage&&(0,a.jsx)(I,{value:F.progress,className:"w-full"}),F.error&&(0,a.jsxs)(V,{className:"border-red-800",children:[(0,a.jsx)(eB.Z,{className:"h-4 w-4"}),(0,a.jsx)(G,{className:"text-red-400",children:F.error})]}),F.podId&&(0,a.jsxs)("div",{className:"p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Pod ID"}),(0,a.jsx)("div",{className:"text-white font-mono text-xs break-all",children:F.podId})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(m,{onClick:es,disabled:!A.trim()||!!F&&"error"!==F.stage&&"ready"!==F.stage,className:"flex-1 bg-green-600 hover:bg-green-700",children:F&&"error"!==F.stage&&"ready"!==F.stage?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eQ.Z,{className:"h-4 w-4 animate-spin mr-2"}),F.stage.charAt(0).toUpperCase()+F.stage.slice(1),"..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ev.Z,{className:"h-4 w-4 mr-2"}),"Deploy to RunPod"]})}),(0,a.jsx)(m,{variant:"outline",onClick:()=>v("url-input"),className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",disabled:!!F&&"error"!==F.stage&&"ready"!==F.stage,children:"Use Custom Server"}),(null==s?void 0:s.recommendedSetup)==="local"&&(null==s?void 0:s.os)!=="macos"&&(0,a.jsx)(m,{variant:"outline",onClick:()=>v("server-download"),className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",disabled:!!F&&"error"!==F.stage&&"ready"!==F.stage,children:"Try Local Setup"})]}),(null==F?void 0:F.stage)==="creating"&&(0,a.jsxs)(V,{className:"border-blue-800 bg-blue-900/20",children:[(0,a.jsx)(eB.Z,{className:"h-4 w-4 text-blue-400"}),(0,a.jsxs)(G,{className:"text-blue-300",children:[(0,a.jsx)("strong",{children:"Cost Estimate:"})," High-end GPU instances cost approximately $0.50-$2.00/hour. The app will automatically terminate the instance when you close it to save costs."]})]})]}),"complete"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-green-900/20 border border-green-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(en.Z,{className:"h-5 w-5 text-green-400"}),(0,a.jsx)("span",{className:"text-green-400 font-medium text-lg",children:"Setup Complete!"})]}),(0,a.jsx)("p",{className:"text-zinc-300",children:"Your DeepFak3r VibeVoice server is now running and ready to generate speech. You can now start using voice cloning features."})]}),t&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Server Type"}),(0,a.jsx)("div",{className:"text-white font-medium",children:"local"===t.type?"Local Server":"runpod"===t.type?"RunPod Cloud":"Remote Server"})]}),(0,a.jsxs)("div",{className:"p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Status"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),(0,a.jsx)("span",{className:"text-green-400 font-medium",children:"Online"})]})]})]}),(0,a.jsxs)("div",{className:"p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400 mb-1",children:"Server URL"}),(0,a.jsx)("div",{className:"text-white font-mono text-sm bg-zinc-900 p-2 rounded break-all",children:t.url})]}),"runpod"===t.type&&(0,a.jsxs)(V,{className:"border-yellow-800 bg-yellow-900/20",children:[(0,a.jsx)(eB.Z,{className:"h-4 w-4 text-yellow-400"}),(0,a.jsxs)(G,{className:"text-yellow-300",children:[(0,a.jsx)("strong",{children:"Remember:"})," Your RunPod instance is running and incurring costs. The app will automatically terminate it when you close the application."]})]})]}),(0,a.jsx)(m,{onClick:()=>{R.m.setState({isServerSetupComplete:!0})},className:"w-full bg-blue-600 hover:bg-blue-700",children:"Start Using Voice Cloning"})]}),t&&"complete"!==n&&"license-input"!==n&&(0,a.jsxs)("div",{className:"p-4 bg-zinc-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-zinc-300 font-medium",children:"Last used Server"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(f,{variant:"online"===t.status?"default":"checking"===t.status?"secondary":"destructive",className:"online"===t.status?"bg-green-600 text-white":"checking"===t.status?"bg-yellow-600 text-white":"bg-red-600 text-white",children:["online"===t.status&&(0,a.jsx)(en.Z,{className:"h-3 w-3 mr-1"}),"checking"===t.status&&(0,a.jsx)(eQ.Z,{className:"h-3 w-3 mr-1 animate-spin"}),"offline"===t.status&&(0,a.jsx)(eB.Z,{className:"h-3 w-3 mr-1"}),t.status.toUpperCase()]}),(0,a.jsx)(f,{variant:"outline",className:"border-zinc-600 text-zinc-300",children:t.type.toUpperCase()})]})]}),(0,a.jsx)("div",{className:"text-sm text-zinc-400 font-mono bg-zinc-900 p-2 rounded break-all",children:t.url}),t.lastChecked&&(0,a.jsxs)("div",{className:"text-xs text-zinc-500 mt-1",children:["Last checked:"," ",(null==t?void 0:t.lastChecked)?new Date(t.lastChecked).toLocaleTimeString():"N/A"]})]}),((null==X?void 0:X.stage)==="error"||(null==F?void 0:F.stage)==="error")&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(V,{className:"border-red-800",children:[(0,a.jsx)(eB.Z,{className:"h-4 w-4"}),(0,a.jsxs)(G,{className:"text-red-300",children:[(0,a.jsx)("strong",{children:"Setup Failed:"})," ",(null==X?void 0:X.error)||(null==F?void 0:F.error)]})]}),(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:(0,a.jsx)("strong",{children:"Troubleshooting Options:"})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(null==X?void 0:X.stage)==="error"&&(null==s?void 0:s.os)!=="macos"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(m,{variant:"outline",onClick:et,className:"justify-start border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:[(0,a.jsx)(se.Z,{className:"h-4 w-4 mr-2"}),"Retry Local Setup"]}),(0,a.jsxs)(m,{variant:"outline",onClick:()=>v("url-input"),className:"justify-start border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:[(0,a.jsx)(eo.Z,{className:"h-4 w-4 mr-2"}),"Use Custom Server Instead"]})]}),(null==F?void 0:F.stage)==="error"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(m,{variant:"outline",onClick:()=>{E(null),P("")},className:"justify-start border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:[(0,a.jsx)(ev.Z,{className:"h-4 w-4 mr-2"}),"Retry RunPod Deployment"]}),(0,a.jsxs)(m,{variant:"outline",onClick:()=>v("url-input"),className:"justify-start border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:[(0,a.jsx)(eo.Z,{className:"h-4 w-4 mr-2"}),"Use Custom Server Instead"]})]}),(0,a.jsxs)(m,{variant:"outline",onClick:()=>v("runpod-deploy"),className:"justify-start border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:[(0,a.jsx)(so.Z,{className:"h-4 w-4 mr-2"}),"Try Different Cloud Option"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-zinc-800",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors ".concat("hardware-check"===n?"bg-blue-400":["server-download","server-start","url-input","runpod-deploy","complete"].includes(n)?"bg-green-400":"bg-zinc-600")}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors ".concat(["server-download","server-start"].includes(n)?"bg-blue-400":["url-input","runpod-deploy","complete"].includes(n)?"bg-green-400":"bg-zinc-600")}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors ".concat(["url-input","runpod-deploy"].includes(n)?"bg-blue-400":"complete"===n?"bg-green-400":"bg-zinc-600")}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors ".concat("complete"===n?"bg-green-400":"bg-zinc-600")})]}),(0,a.jsxs)("div",{className:"text-xs text-zinc-500",children:["hardware-check"===n&&"Analyzing Hardware",["server-download","server-start"].includes(n)&&"Setting up Local Server",["url-input","runpod-deploy"].includes(n)&&"Configuring Server","complete"===n&&"Setup Complete"]}),"complete"!==n&&"license-input"!==n&&(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>{R.m.setState({isServerSetupComplete:!0})},className:"text-zinc-400 hover:text-zinc-200",children:"Skip Setup"})]}),!1]})]})})})}function su(){let{isLoading:e}=(0,R.m)();return e?(0,a.jsx)("div",{className:"flex h-screen bg-background grid-pattern items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(eQ.Z,{className:"h-6 w-6 animate-spin"}),(0,a.jsx)("span",{className:"text-lg",children:"Loading DeepFak3r..."})]})}):(0,a.jsxs)("div",{className:"flex h-screen bg-background grid-pattern",children:[(0,a.jsx)(e_,{}),(0,a.jsx)("main",{className:"flex-1 p-6 overflow-y-auto",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"DeepFak3r Vibe Voice"}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["\uD83C\uDFA4 Transform"," ",(0,a.jsx)("span",{className:"font-semibold text-primary underline decoration-wavy animate-pulse",children:"any text"})," ","into"," ",(0,a.jsx)("span",{className:"font-semibold text-primary underline decoration-wavy animate-pulse",children:"any voice"}),"â€”with vibe voice! âœ¨"]})]}),(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsx)(e6,{}),(0,a.jsx)(sa,{})]})]})}),(0,a.jsx)(sm,{})]})}}},function(e){e.O(0,[982,97,971,117,744],function(){return e(e.s=5573)}),_N_E=e.O()}]);