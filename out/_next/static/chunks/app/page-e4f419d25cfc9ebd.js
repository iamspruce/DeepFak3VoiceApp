(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5573:function(e,s,t){Promise.resolve().then(t.bind(t,6266))},6266:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return sn}});var a=t(7437),r=t(2265),i=t(7053),n=t(535),l=t(1994),c=t(3335);function d(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,c.m6)((0,l.W)(s))}let o=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function m(e){let{className:s,variant:t,size:r,asChild:n=!1,...l}=e,c=n?i.g7:"button";return(0,a.jsx)(c,{"data-slot":"button",className:d(o({variant:t,size:r,className:s})),...l})}function x(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:d("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function u(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:d("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function h(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:d("leading-none font-semibold",s),...t})}function p(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:d("text-muted-foreground text-sm",s),...t})}function g(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:d("px-6",s),...t})}let v=(0,n.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function j(e){let{className:s,variant:t,asChild:r=!1,...n}=e,l=r?i.g7:"span";return(0,a.jsx)(l,{"data-slot":"badge",className:d(v({variant:t}),s),...n})}function f(e){let{className:s,type:t,...r}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:d("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...r})}var N=t(6394);function b(e){let{className:s,...t}=e;return(0,a.jsx)(N.f,{"data-slot":"label",className:d("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...t})}var w=t(9027),y=t(2489);function z(e){let{...s}=e;return(0,a.jsx)(w.fC,{"data-slot":"dialog",...s})}function k(e){let{...s}=e;return(0,a.jsx)(w.xz,{"data-slot":"dialog-trigger",...s})}function S(e){let{...s}=e;return(0,a.jsx)(w.h_,{"data-slot":"dialog-portal",...s})}function _(e){let{className:s,...t}=e;return(0,a.jsx)(w.aV,{"data-slot":"dialog-overlay",className:d("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...t})}function C(e){let{className:s,children:t,showCloseButton:r=!0,...i}=e;return(0,a.jsxs)(S,{"data-slot":"dialog-portal",children:[(0,a.jsx)(_,{}),(0,a.jsxs)(w.VY,{"data-slot":"dialog-content",className:d("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...i,children:[t,r&&(0,a.jsxs)(w.x8,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(y.Z,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function Z(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:d("flex flex-col gap-2 text-center sm:text-left",s),...t})}function U(e){let{className:s,...t}=e;return(0,a.jsx)(w.Dx,{"data-slot":"dialog-title",className:d("text-lg leading-none font-semibold",s),...t})}var T=t(2097),R=t(9397),M=t(8662),P=t(1101),A=t(7689),F=t(4501);function E(e){let{className:s}=e,{addVoice:t}=(0,T.m)(),[i,n]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[o,u]=(0,r.useState)(""),[h,p]=(0,r.useState)(null),[g,v]=(0,r.useState)([]),[N,w]=(0,r.useState)(!1),[S,_]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(0,F.Vt)().then(e=>_(e)).catch(()=>_(!1))},[S]);let E=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?c(!0):"dragleave"===e.type&&c(!1)},[]),L=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),c(!1);let s=Array.from(e.dataTransfer.files).filter(e=>"audio/mp3"===e.type||"audio/wav"===e.type||"audio/mpeg"===e.type);!(s.length>0)||h||(p(s[0]),o||u(s[0].name.replace(/\.[^/.]+$/,"")))},[h,o]),I=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(S)try{let t=await window.pywebview.api.select_audio_file();if(t&&t.success&&t.file_data){let a=atob(t.file_data),r=Array(a.length);for(let e=0;e<a.length;e++)r[e]=a.charCodeAt(e);let i=new Uint8Array(r),n=new File([i],t.filename,{type:t.mime_type});e&&s>=0?D(s,n):(p(n),o||u(t.filename.replace(/\.[^/.]+$/,"")))}}catch(e){console.error("Error selecting file:",e)}},D=(e,s)=>{v(t=>t.map((t,a)=>a===e?{...t,file:s}:t))},V=e=>{v(s=>s.filter((s,t)=>t!==e))},G=(e,s)=>{v(t=>t.map((t,a)=>a===e?{...t,name:s}:t))},O=async()=>{if(o.trim()&&h){w(!0);try{let e=URL.createObjectURL(h),s=g.filter(e=>e.name.trim()&&e.file).map((e,s)=>({id:"".concat(Date.now(),"-").concat(s),name:e.name.trim(),audioFile:e.file,audioUrl:e.file?URL.createObjectURL(e.file):null}));t({name:o.trim(),mainAudio:h,mainAudioUrl:e,emotions:s}),u(""),p(null),v([]),n(!1)}catch(e){console.error("Error uploading voice:",e)}finally{w(!1)}}},H=()=>{u(""),p(null),v([]),c(!1)};return(0,a.jsxs)(z,{open:i,onOpenChange:e=>{n(e),e||H()},children:[(0,a.jsx)(k,{asChild:!0,children:(0,a.jsxs)(m,{className:d("gap-2",s),children:[(0,a.jsx)(R.Z,{className:"h-4 w-4"}),"Upload Voice"]})}),(0,a.jsxs)(C,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(Z,{children:(0,a.jsxs)(U,{className:"flex items-center gap-2",children:[(0,a.jsx)(M.Z,{className:"h-5 w-5"}),"Upload New Voice"]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b,{htmlFor:"voice-name",children:"Voice Name"}),(0,a.jsx)(f,{id:"voice-name",value:o,onChange:e=>u(e.target.value),placeholder:"Enter a name for this voice"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b,{children:"Main Audio (Neutral)"}),(0,a.jsx)("div",{className:d("border-2 border-dashed rounded-lg p-6 text-center transition-colors",l?"border-primary bg-primary/5":"border-border",h?"border-green-500 bg-green-50 dark:bg-green-950/20":""),onDragEnter:E,onDragLeave:E,onDragOver:E,onDrop:L,children:h?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,a.jsx)(P.Z,{className:"h-8 w-8 text-green-600"}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"font-medium text-green-700 dark:text-green-400",children:h.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(h.size/1024/1024).toFixed(2)," MB"]})]}),(0,a.jsx)(m,{size:"sm",variant:"ghost",onClick:()=>p(null),className:"text-muted-foreground hover:text-destructive",children:(0,a.jsx)(y.Z,{className:"h-4 w-4"})})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)(A.Z,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Drop your audio file here"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Supports MP3 and WAV files"}),S?(0,a.jsx)(m,{variant:"outline",size:"sm",className:"mt-2 bg-transparent",onClick:()=>I(),children:"Browse Files"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"file",accept:".mp3,.wav,audio/mp3,audio/wav,audio/mpeg",onChange:e=>{let s=e.target.files;s&&s[0]&&!h&&(p(s[0]),o||u(s[0].name.replace(/\.[^/.]+$/,"")))},className:"hidden",id:"main-audio-upload"}),(0,a.jsx)(b,{htmlFor:"main-audio-upload",className:"cursor-pointer",children:(0,a.jsx)(m,{variant:"outline",size:"sm",className:"mt-2 bg-transparent",asChild:!0,children:(0,a.jsx)("span",{children:"Browse Files"})})})]})]})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(b,{children:"Emotion Variations (Optional)"}),(0,a.jsxs)(j,{variant:"secondary",className:"text-xs",children:[g.length,"/5"]})]}),g.map((e,s)=>(0,a.jsxs)(x,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)(f,{placeholder:"Emotion name (e.g., Happy, Sad, Angry)",value:e.name,onChange:e=>G(s,e.target.value),className:"flex-1"}),(0,a.jsx)(m,{size:"sm",variant:"ghost",onClick:()=>V(s),className:"text-muted-foreground hover:text-destructive",children:(0,a.jsx)(y.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"border border-dashed border-border rounded p-3 text-center",children:e.file?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{className:"text-sm text-green-700 dark:text-green-400",children:e.file.name}),(0,a.jsx)(m,{size:"sm",variant:"ghost",onClick:()=>D(s,null),className:"h-6 w-6 p-0",children:(0,a.jsx)(y.Z,{className:"h-3 w-3"})})]}):(0,a.jsx)("div",{children:S?(0,a.jsx)(m,{variant:"outline",size:"sm",onClick:()=>I(!0,s),children:(0,a.jsx)("span",{className:"text-xs",children:"Upload Audio"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"file",accept:".mp3,.wav,audio/mp3,audio/wav,audio/mpeg",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&D(s,a)},className:"hidden",id:"emotion-upload-".concat(s)}),(0,a.jsx)(b,{htmlFor:"emotion-upload-".concat(s),className:"cursor-pointer",children:(0,a.jsx)(m,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsx)("span",{className:"text-xs",children:"Upload Audio"})})})]})})})]},s)),g.length<5&&(0,a.jsxs)(m,{variant:"outline",onClick:()=>{g.length<5&&v(e=>[...e,{name:"",file:null}])},className:"w-full gap-2 bg-transparent",children:[(0,a.jsx)(R.Z,{className:"h-4 w-4"}),"Add Emotion Variation"]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(m,{onClick:()=>n(!1),variant:"outline",className:"flex-1",children:"Cancel"}),(0,a.jsx)(m,{onClick:O,disabled:!o.trim()||!h||N,className:"flex-1",children:N?"Uploading...":"Create Voice"})]})]})]})]})}var L=t(610);function I(e){let{className:s,value:t,...r}=e;return(0,a.jsx)(L.fC,{"data-slot":"progress",className:d("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...r,children:(0,a.jsx)(L.z$,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})}let D=(0,n.j)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function V(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:d(D({variant:t}),s),...r})}function G(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"alert-description",className:d("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...t})}let O=()=>(0,a.jsxs)("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("rect",{x:"2",y:"3",width:"20",height:"3",rx:"1"}),(0,a.jsx)("rect",{x:"2",y:"7",width:"20",height:"3",rx:"1"}),(0,a.jsx)("rect",{x:"2",y:"11",width:"20",height:"3",rx:"1"}),(0,a.jsx)("path",{d:"M6 3v12"})]}),H=()=>(0,a.jsxs)("svg",{className:"h-4 w-4 text-green-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("path",{d:"m9 12 2 2 4-4"}),(0,a.jsx)("circle",{cx:"12",cy:"12",r:"9"})]}),X=()=>(0,a.jsxs)("svg",{className:"h-4 w-4 text-red-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("line",{x1:"2",x2:"22",y1:"2",y2:"22"}),(0,a.jsx)("path",{d:"M8.5 16.5a5 5 0 0 1 7 0"}),(0,a.jsx)("path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65"}),(0,a.jsx)("path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76"}),(0,a.jsx)("path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68"}),(0,a.jsx)("path",{d:"M5 13a10 10 0 0 1 5.24-2.76"}),(0,a.jsx)("circle",{cx:"12",cy:"20",r:"1"})]}),B=()=>(0,a.jsxs)("svg",{className:"h-4 w-4 text-blue-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("path",{d:"m3 12 6-6-6-6"}),(0,a.jsx)("path",{d:"M21 18v-2a4 4 0 0 0-4-4H9"}),(0,a.jsx)("path",{d:"M3 6v2a4 4 0 0 0 4 4h8"})]}),W=()=>(0,a.jsx)("svg",{className:"h-3 w-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,a.jsx)("path",{d:"m22 12-4-4v3H8l-4-4v8l4-4v3h10l4-4Z"})});function q(){var e,s,t,i;let{serverConfig:n,isServerSetupComplete:l}=(0,T.m)(),[c,d]=(0,r.useState)(null),[o,p]=(0,r.useState)(!1),[v,f]=(0,r.useState)([]),[N,b]=(0,r.useState)(null),[w,y]=(0,r.useState)(null),z=(0,r.useRef)(null),k=async()=>(await new Promise(e=>setTimeout(e,1e3*Math.random()+500)),Math.random()>.1);(0,r.useEffect)(()=>{if(!l||!n){z.current&&clearInterval(z.current);return}let e=async()=>{try{let e;let s=Date.now(),t=await k(),a=Date.now()-s,r=new Date,i=null;t&&((e={cpu_usage:100*Math.random(),ram_usage_percent:100*Math.random(),gpu_utilization:100*Math.random(),gpu_memory_used:16*Math.random(),gpu_temperature:40*Math.random()+50,warmup_complete:Math.random()>.3}).warmup_complete?e.cpu_usage>90?i="High CPU usage detected - performance may be impacted":e.ram_usage_percent>95?i="High memory usage detected - server may become unstable":"number"==typeof e.gpu_utilization&&e.gpu_utilization>95&&(i="GPU is at maximum capacity - requests may be queued"):i="Server is still warming up - performance may be slower");let n={timestamp:r,status:t,responseTime:a,systemMetrics:e};b(n),d(r),y(i),f(e=>[...e.slice(-19),n])}catch(t){console.error("[v0]  health check failed:",t);let e=new Date,s={timestamp:e,status:!1,responseTime:0};b(s),d(e),y("Server connection failed"),f(e=>[...e.slice(-19),s])}};return z.current||(e(),z.current=setInterval(e,3e4)),()=>{z.current&&clearInterval(z.current),z.current=null}},[l]);let S=async()=>{if(n){p(!0);try{let e;let s=Date.now(),t=await k(),a=Date.now()-s,r=new Date;t&&(e={cpu_usage:100*Math.random(),ram_usage_percent:100*Math.random(),gpu_utilization:100*Math.random(),gpu_memory_used:16*Math.random(),warmup_complete:Math.random()>.2});let i={timestamp:r,status:t,responseTime:a,systemMetrics:e};b(i),d(r),f(e=>[...e.slice(-19),i])}catch(e){console.error("[v0] Manual  health check failed:",e),y("Manual health check failed")}finally{p(!1)}}},_=()=>{if(!N||!N.status)return 0;let e=100;if(N.responseTime>2e3?e-=30:N.responseTime>1e3&&(e-=15),N.systemMetrics){let s=N.systemMetrics;s.cpu_usage>90?e-=25:s.cpu_usage>70&&(e-=10),s.ram_usage_percent>95?e-=25:s.ram_usage_percent>80&&(e-=10),s.gpu_utilization&&s.gpu_utilization>95&&(e-=20),s.warmup_complete||(e-=40)}return Math.max(0,e)};return l&&n?(0,a.jsxs)(x,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(u,{className:"pb-3",children:(0,a.jsxs)(h,{className:"text-white flex items-center gap-2 text-sm",children:[(0,a.jsx)(O,{}),"Server Monitor"]})}),(0,a.jsxs)(g,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"online":return(0,a.jsx)(H,{});case"offline":default:return(0,a.jsx)(X,{});case"checking":return(0,a.jsx)(B,{})}})(n.status),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:"local"===n.type?"Local Server":"runpod"===n.type?"RunPod Instance":"Remote Server"}),(null==N?void 0:null===(e=N.systemMetrics)||void 0===e?void 0:e.warmup_complete)===!1&&(0,a.jsx)(j,{variant:"secondary",className:"ml-2 text-xs",children:"WARMING"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j,{className:(e=>{switch(e){case"online":return"bg-green-600";case"offline":return"bg-red-600";case"checking":return"bg-blue-600";default:return"bg-yellow-600"}})(n.status),children:n.status.toUpperCase()}),N&&N.status&&(0,a.jsxs)(j,{variant:"outline",className:"text-xs",children:[N.responseTime,"ms"]})]})]}),(0,a.jsx)("div",{className:"text-xs text-zinc-400 font-mono bg-zinc-800 p-2 rounded truncate",children:n.url}),N&&N.status&&(0,a.jsxs)("div",{className:"bg-zinc-800 p-3 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-zinc-400",children:"Performance Score"}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsxs)("span",{className:"text-white font-bold",children:[_(),"/100"]})})]}),(0,a.jsx)(I,{value:_(),className:"h-2"})]}),(null==N?void 0:N.systemMetrics)&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"bg-zinc-800 p-2 rounded text-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-1 mb-1",children:(0,a.jsx)("span",{className:"text-xs text-zinc-400",children:"CPU"})}),(0,a.jsxs)("div",{className:"text-sm font-bold text-white",children:[N.systemMetrics.cpu_usage.toFixed(0),"%"]}),(0,a.jsx)(I,{value:N.systemMetrics.cpu_usage,className:"h-1 mt-1"})]}),(0,a.jsxs)("div",{className:"bg-zinc-800 p-2 rounded text-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-1 mb-1",children:(0,a.jsx)("span",{className:"text-xs text-zinc-400",children:"RAM"})}),(0,a.jsxs)("div",{className:"text-sm font-bold text-white",children:[N.systemMetrics.ram_usage_percent.toFixed(0),"%"]}),(0,a.jsx)(I,{value:N.systemMetrics.ram_usage_percent,className:"h-1 mt-1"})]}),void 0!==N.systemMetrics.gpu_utilization&&(0,a.jsxs)("div",{className:"bg-zinc-800 p-2 rounded text-center col-span-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-1 mb-1",children:(0,a.jsx)("span",{className:"text-xs text-zinc-400",children:"GPU Utilization"})}),(0,a.jsxs)("div",{className:"text-sm font-bold text-white",children:[null===(s=N.systemMetrics.gpu_utilization)||void 0===s?void 0:s.toFixed(0),"%"]}),(0,a.jsx)(I,{value:N.systemMetrics.gpu_utilization||0,className:"h-1 mt-1"}),N.systemMetrics.gpu_temperature&&(0,a.jsxs)("div",{className:"text-xs text-zinc-500 mt-1",children:[N.systemMetrics.gpu_temperature.toFixed(0),"\xb0C"]})]})]}),v.length>0&&(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-white",children:[0===v.length?0:Math.round(v.filter(e=>e.status).length/v.length*100),"%"]}),(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Uptime"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-white",children:[(()=>{let e=v.filter(e=>e.status&&e.responseTime>0);return 0===e.length?0:Math.round(e.reduce((e,s)=>e+s.responseTime,0)/e.length)})(),"ms"]}),(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Avg Response"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:v.length}),(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Checks"})]})]}),v.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Health Timeline (Last 20 checks)"}),(0,a.jsx)("div",{className:"flex gap-1",children:v.map((e,s)=>{var t;let r=(null===(t=e.systemMetrics)||void 0===t?void 0:t.warmup_complete)===!1;return(0,a.jsx)("div",{className:"h-3 flex-1 rounded-sm ".concat(e.status?r?"bg-yellow-600":"bg-green-600":"bg-red-600"),title:"".concat(e.timestamp.toLocaleTimeString(),": ").concat(e.status?r?"Online (Warming)":"Online":"Offline"," - ").concat(e.responseTime,"ms").concat(e.systemMetrics?" | CPU: ".concat(e.systemMetrics.cpu_usage.toFixed(0),"%"):"")},s)})})]}),w&&(0,a.jsx)(V,{className:"border-yellow-800",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("svg",{className:"h-4 w-4 text-yellow-400 mt-0.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),(0,a.jsx)("path",{d:"M12 9v4"}),(0,a.jsx)("path",{d:"m12 17 .01 0"})]}),(0,a.jsx)(G,{className:"text-yellow-400 ml-2",children:w})]})}),c&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-zinc-400",children:[(0,a.jsxs)("svg",{className:"h-3 w-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("polyline",{points:"12,6 12,12 16,14"})]}),"Last checked: ",c.toLocaleTimeString(),N&&N.status&&(0,a.jsxs)("span",{className:"ml-2 text-zinc-500",children:["(",N.responseTime,"ms response)"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m,{onClick:S,disabled:o,variant:"outline",size:"sm",className:"w-full border-zinc-700 text-zinc-300 hover:bg-zinc-800 bg-transparent",children:o?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("svg",{className:"h-3 w-3 mr-2 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("path",{d:"m3 12 6-6-6-6"}),(0,a.jsx)("path",{d:"M21 18v-2a4 4 0 0 0-4-4H9"}),(0,a.jsx)("path",{d:"M3 6v2a4 4 0 0 0 4 4h8"})]}),"Checking..."]}):(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(W,{}),(0,a.jsx)("span",{className:"ml-2",children:" Health Check"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[n.url&&(0,a.jsxs)(m,{variant:"outline",size:"sm",className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800 bg-transparent text-xs",onClick:()=>window.open("".concat(n.url,"/metrics"),"_blank"),children:[(0,a.jsx)("svg",{className:"h-3 w-3 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,a.jsx)("polyline",{points:"22,12 18,12 15,21 9,3 6,12 2,12"})}),"Metrics"]}),"runpod"===n.type&&(0,a.jsxs)(m,{variant:"outline",size:"sm",className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800 bg-transparent text-xs",onClick:()=>{console.log("[v0] Opening RunPod management")},children:[(0,a.jsxs)("svg",{className:"h-3 w-3 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,a.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),"Manage"]})]})]}),N&&N.status&&80>_()&&(0,a.jsx)("div",{className:"bg-yellow-900/20 border border-yellow-800 rounded p-2",children:(0,a.jsxs)("div",{className:"text-xs text-yellow-400",children:[(0,a.jsx)("strong",{children:"Performance Tips:"}),(null===(t=N.systemMetrics)||void 0===t?void 0:t.warmup_complete)===!1&&(0,a.jsx)("div",{children:"• Wait for warmup to complete for optimal speed"}),N.responseTime>1e3&&(0,a.jsx)("div",{children:"• High network latency - check connection"}),(null===(i=N.systemMetrics)||void 0===i?void 0:i.cpu_usage)&&N.systemMetrics.cpu_usage>80&&(0,a.jsx)("div",{children:"• High CPU usage - consider upgrading server"})]})})]})]}):null}var Y=t(1312);function $(e){let{className:s,...t}=e;return(0,a.jsx)(Y.fC,{"data-slot":"tabs",className:d("flex flex-col gap-2",s),...t})}function K(e){let{className:s,...t}=e;return(0,a.jsx)(Y.aV,{"data-slot":"tabs-list",className:d("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...t})}function Q(e){let{className:s,...t}=e;return(0,a.jsx)(Y.xz,{"data-slot":"tabs-trigger",className:d("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t})}function J(e){let{className:s,...t}=e;return(0,a.jsx)(Y.VY,{"data-slot":"tabs-content",className:d("flex-1 outline-none",s),...t})}var ee=t(1671),es=t(5395),et=t(7168),ea=t(6865),er=t(6137),ei=t(4401),en=t(476),el=t(5954),ec=t(525),ed=t(6899),eo=t(4822),em=t(4428),ex=t(1239),eu=t(91),eh=t(1723),ep=t(6215);function eg(){var e,s;let{serverConfig:t,checkServerHealth:i,isServerSetupComplete:n}=(0,T.m)(),[l,c]=(0,r.useState)([]),[d,o]=(0,r.useState)(null),[v,f]=(0,r.useState)(null),[N,b]=(0,r.useState)(!1),[w,y]=(0,r.useState)(null),[z,k]=(0,r.useState)({requestsPerMinute:0,averageLatency:0,errorRate:0}),S=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!n||!t){S.current&&clearInterval(S.current);return}let e=async()=>{try{var e,s;b(!0);let a=Date.now(),r=await i(),n=Date.now()-a,l=null,d=null;if(r)try{let e=await fetch("".concat(t.url,"/system"));e.ok&&(l=await e.json());let s=await fetch("".concat(t.url,"/metrics"));s.ok&&(d=await s.json())}catch(e){console.warn("[v0] Failed to fetch detailed metrics:",e)}let m={timestamp:new Date,responseTime:n,isOnline:r,cpuUsage:(null==l?void 0:l.cpu_usage)||0,memoryUsage:l?l.ram_used/l.ram_total*100:0,gpuUsage:(null==l?void 0:l.gpu_utilization)||0,gpuMemoryUsed:(null==l?void 0:l.gpu_memory_used)||0,gpuMemoryTotal:(null==l?void 0:l.gpu_memory_total)||0,gpuTemperature:(null==l?void 0:l.gpu_temperature)||null,inferenceTime:(null==d?void 0:null===(e=d.performance_stats)||void 0===e?void 0:e.average_inference_time)||0,queueTime:(null==d?void 0:null===(s=d.performance_stats)||void 0===s?void 0:s.average_preprocessing_time)||0,totalLatency:n,requestsPerSecond:0,warmupComplete:(null==l?void 0:l.warmup_complete)||!1};if(o(m),f(l),y(new Date),null==d?void 0:d.performance_stats){let e=d.performance_stats;k({requestsPerMinute:e.total_requests||0,averageLatency:e.average_inference_time||0,errorRate:0})}c(e=>[...e.slice(-99),m]),console.log("[v0]  health check completed:",m)}catch(s){console.error("[v0]  health check failed:",s);let e={timestamp:new Date,responseTime:0,isOnline:!1};o(e),c(s=>[...s.slice(-99),e])}finally{b(!1)}};return S.current||(e(),S.current=setInterval(e,3e4)),()=>{S.current&&clearInterval(S.current),S.current=null}},[n,null==t?void 0:t.url,i]);let _=()=>0===l.length?0:Math.round(l.filter(e=>e.isOnline).length/l.length*100),C=()=>{let e=l.filter(e=>e.isOnline&&e.inferenceTime&&e.inferenceTime>0);return 0===e.length?0:(e.reduce((e,s)=>e+(s.inferenceTime||0),0)/e.length*1e3).toFixed(1)},Z=()=>{if(!d||!d.isOnline)return 0;let e=100;return d.responseTime>1e3?e-=20:d.responseTime>500&&(e-=10),d.cpuUsage&&d.cpuUsage>80&&(e-=15),d.memoryUsage&&d.memoryUsage>90&&(e-=15),d.gpuUsage&&d.gpuUsage>95&&(e-=20),d.warmupComplete||(e-=30),Math.max(0,e)},U=e=>e?"".concat((e/1024).toFixed(1)," GB"):"0 GB";return n&&t?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(x,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsx)(g,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-zinc-400 text-sm",children:"Server Status"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(e=>{switch(e){case"online":return(0,a.jsx)(ee.Z,{className:"h-4 w-4 text-green-400"});case"offline":return(0,a.jsx)(es.Z,{className:"h-4 w-4 text-red-400"});case"checking":return(0,a.jsx)(et.Z,{className:"h-4 w-4 text-blue-400 animate-spin"});default:return(0,a.jsx)(ea.Z,{className:"h-4 w-4 text-yellow-400"})}})(t.status),(0,a.jsx)("span",{className:"font-medium ".concat((e=>{switch(e){case"online":return"text-green-400";case"offline":return"text-red-400";case"checking":return"text-blue-400";default:return"text-yellow-400"}})(t.status)),children:t.status.toUpperCase()})]}),(null==d?void 0:d.warmupComplete)===!1&&(0,a.jsx)(j,{variant:"secondary",className:"mt-1 text-xs",children:"WARMING UP"})]}),(0,a.jsx)(ei.Z,{className:"h-8 w-8 text-zinc-600"})]})})}),(0,a.jsx)(x,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsx)(g,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-zinc-400 text-sm",children:"Performance Score"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:Z()}),(0,a.jsx)("span",{className:"text-sm text-zinc-400",children:"/100"})]})]}),(0,a.jsx)(en.Z,{className:"h-8 w-8 text-zinc-600"})]})})}),(0,a.jsx)(x,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsx)(g,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-zinc-400 text-sm",children:"Avg Inference"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-white",children:[C(),"ms"]}),(0,a.jsx)("p",{className:"text-xs text-zinc-500",children:"Last 10 requests"})]}),(0,a.jsx)(el.Z,{className:"h-8 w-8 text-zinc-600"})]})})}),(0,a.jsx)(x,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsx)(g,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-zinc-400 text-sm",children:"Uptime"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-white",children:[_(),"%"]}),(0,a.jsxs)("p",{className:"text-xs text-zinc-500",children:[l.length," checks"]})]}),(0,a.jsx)(ec.Z,{className:"h-8 w-8 text-zinc-600"})]})})})]}),(0,a.jsxs)($,{defaultValue:"overview",className:"w-full",children:[(0,a.jsxs)(K,{className:"grid w-full grid-cols-4 bg-zinc-800",children:[(0,a.jsx)(Q,{value:"overview",className:"text-zinc-300",children:"Overview"}),(0,a.jsx)(Q,{value:"performance",className:"text-zinc-300",children:"Performance"}),(0,a.jsx)(Q,{value:"resources",className:"text-zinc-300",children:"Resources"}),(0,a.jsx)(Q,{value:"history",className:"text-zinc-300",children:"History"})]}),(0,a.jsx)(J,{value:"overview",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,a.jsxs)(x,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(u,{children:(0,a.jsxs)(h,{className:"text-white flex items-center gap-2",children:[(0,a.jsx)(er.Z,{className:"h-4 w-4"}),"Server Information"]})}),(0,a.jsxs)(g,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"Type:"}),(0,a.jsx)(j,{variant:"outline",children:"local"===t.type?"Local Server":"runpod"===t.type?"RunPod Instance":"Remote Server"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"URL:"}),(0,a.jsx)("span",{className:"text-white font-mono text-sm truncate max-w-48",children:t.url})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"Last Check:"}),(0,a.jsx)("span",{className:"text-white text-sm",children:w?w.toLocaleTimeString():"Never"})]}),(null==v?void 0:v.gpu_name)&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"GPU:"}),(0,a.jsx)("span",{className:"text-white text-sm",children:v.gpu_name})]})]})]}),d&&d.isOnline&&(0,a.jsxs)(x,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(u,{children:(0,a.jsxs)(h,{className:"text-white flex items-center gap-2",children:[(0,a.jsx)(ei.Z,{className:"h-4 w-4"}),"Real-time Metrics"]})}),(0,a.jsxs)(g,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-white",children:[d.responseTime,"ms"]}),(0,a.jsx)("p",{className:"text-xs text-zinc-400",children:"Response Time"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-white",children:[d.inferenceTime?(1e3*d.inferenceTime).toFixed(0):"N/A","ms"]}),(0,a.jsx)("p",{className:"text-xs text-zinc-400",children:"Inference Time"})]})]}),d.gpuTemperature&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ed.Z,{className:"h-4 w-4 text-zinc-400"}),(0,a.jsxs)("span",{className:"text-white",children:[d.gpuTemperature,"\xb0C"]}),(0,a.jsx)("span",{className:"text-zinc-400 text-sm",children:"GPU Temp"})]}),!d.warmupComplete&&(0,a.jsxs)(V,{className:"border-yellow-800",children:[(0,a.jsx)(ea.Z,{className:"h-4 w-4"}),(0,a.jsx)(G,{className:"text-yellow-400",children:"Server is still warming up. Performance may be slower than usual."})]})]})]})]})}),(0,a.jsx)(J,{value:"performance",className:"space-y-4",children:(null==v?void 0:v.performance_stats)&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)(x,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(u,{children:(0,a.jsx)(h,{className:"text-white text-sm",children:"Request Statistics"})}),(0,a.jsxs)(g,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-zinc-400 text-sm",children:"Total Requests:"}),(0,a.jsx)("span",{className:"text-white font-bold",children:v.performance_stats.total_requests})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-zinc-400 text-sm",children:"Cache Hit Rate:"}),(0,a.jsxs)("span",{className:"text-white font-bold",children:[v.performance_stats.cache_hits+v.performance_stats.cache_misses>0?Math.round(v.performance_stats.cache_hits/(v.performance_stats.cache_hits+v.performance_stats.cache_misses)*100):0,"%"]})]})]})]}),(0,a.jsxs)(x,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(u,{children:(0,a.jsx)(h,{className:"text-white text-sm",children:"Processing Times"})}),(0,a.jsxs)(g,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"Inference:"}),(0,a.jsxs)("span",{className:"text-white",children:[(1e3*v.performance_stats.average_inference_time).toFixed(1),"ms"]})]}),(0,a.jsx)(I,{value:Math.min(100*v.performance_stats.average_inference_time,100),className:"h-2"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"Preprocessing:"}),(0,a.jsxs)("span",{className:"text-white",children:[(1e3*v.performance_stats.average_preprocessing_time).toFixed(1),"ms"]})]}),(0,a.jsx)(I,{value:Math.min(100*v.performance_stats.average_preprocessing_time,100),className:"h-2"})]})]})]}),(0,a.jsxs)(x,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(u,{children:(0,a.jsx)(h,{className:"text-white text-sm",children:"Memory Usage"})}),(0,a.jsxs)(g,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xl font-bold text-white",children:U(v.performance_stats.peak_memory_usage)}),(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Peak GPU Memory"})]}),v.gpu_memory_total&&(0,a.jsx)(I,{value:v.performance_stats.peak_memory_usage/1024/v.gpu_memory_total*100,className:"h-3"})]})]})]})}),(0,a.jsxs)(J,{value:"resources",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)(x,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(u,{children:(0,a.jsxs)(h,{className:"text-white flex items-center gap-2 text-sm",children:[(0,a.jsx)(eo.Z,{className:"h-4 w-4"}),"CPU Usage"]})}),(0,a.jsx)(g,{children:(null==d?void 0:d.cpuUsage)?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-white mb-2",children:[d.cpuUsage.toFixed(1),"%"]}),(0,a.jsx)(I,{value:d.cpuUsage,className:"h-3 mb-2"}),(null==v?void 0:v.cpu_count)&&(0,a.jsxs)("div",{className:"text-xs text-zinc-400",children:[v.cpu_count," cores"]})]}):(0,a.jsx)("div",{className:"text-center text-zinc-400",children:"No data"})})]}),(0,a.jsxs)(x,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(u,{children:(0,a.jsxs)(h,{className:"text-white flex items-center gap-2 text-sm",children:[(0,a.jsx)(em.Z,{className:"h-4 w-4"}),"RAM Usage"]})}),(0,a.jsx)(g,{children:v&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-white mb-2",children:[(v.ram_used/v.ram_total*100).toFixed(1),"%"]}),(0,a.jsx)(I,{value:v.ram_used/v.ram_total*100,className:"h-3 mb-2"}),(0,a.jsxs)("div",{className:"text-xs text-zinc-400",children:[U(1024*v.ram_used)," /"," ",U(1024*v.ram_total)]})]})})]}),(0,a.jsxs)(x,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(u,{children:(0,a.jsxs)(h,{className:"text-white flex items-center gap-2 text-sm",children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4"}),"GPU Usage"]})}),(0,a.jsx)(g,{children:(null==d?void 0:d.gpuUsage)?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-white mb-2",children:[d.gpuUsage.toFixed(1),"%"]}),(0,a.jsx)(I,{value:d.gpuUsage,className:"h-3 mb-2"}),(0,a.jsxs)("div",{className:"text-xs text-zinc-400",children:["VRAM: ",U(d.gpuMemoryUsed)," /"," ",U(d.gpuMemoryTotal)]})]}):(0,a.jsx)("div",{className:"text-center text-zinc-400",children:(null==v?void 0:v.gpu_available)?"No data":"No GPU"})})]})]}),(null==v?void 0:v.gpu_available)&&(0,a.jsxs)(x,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsx)(u,{children:(0,a.jsxs)(h,{className:"text-white flex items-center gap-2",children:[(0,a.jsx)(eu.Z,{className:"h-4 w-4"}),"GPU Memory Breakdown"]})}),(0,a.jsx)(g,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:U(v.gpu_memory_total)}),(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Total VRAM"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:U(v.gpu_memory_used)}),(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Used VRAM"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:U(v.gpu_memory_available)}),(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Available VRAM"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-zinc-400",children:"VRAM Utilization"}),(0,a.jsxs)("span",{className:"text-white",children:[v.gpu_memory_total?((null!==(e=v.gpu_memory_used)&&void 0!==e?e:0)/v.gpu_memory_total*100).toFixed(1):0,"%"]})]}),(0,a.jsx)(I,{value:v.gpu_memory_total?(null!==(s=v.gpu_memory_used)&&void 0!==s?s:0/v.gpu_memory_total)*100:0,className:"h-4"})]})]})})]})]}),(0,a.jsx)(J,{value:"history",className:"space-y-4",children:(0,a.jsxs)(x,{className:"bg-zinc-900 border-zinc-800",children:[(0,a.jsxs)(u,{children:[(0,a.jsxs)(h,{className:"text-white flex items-center gap-2",children:[(0,a.jsx)(eh.Z,{className:"h-4 w-4"}),"Performance History"]}),(0,a.jsxs)(p,{className:"text-zinc-400",children:["Last ",l.length," health checks with detailed metrics"]})]}),(0,a.jsx)(g,{children:l.length>0?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Status Timeline (Last 50 checks)"}),(0,a.jsx)("div",{className:"flex gap-1",children:l.slice(-50).map((e,s)=>{let t=e.isOnline?e.warmupComplete?"opacity-100":"opacity-70":"opacity-100";return(0,a.jsx)("div",{className:"h-4 flex-1 rounded-sm ".concat(e.isOnline?e.warmupComplete?"bg-green-600":"bg-yellow-600":"bg-red-600"," ").concat(t),title:"".concat(e.timestamp.toLocaleTimeString(),": ").concat(e.isOnline?e.warmupComplete?"Online (Ready)":"Online (Warming)":"Offline"," - ").concat(e.responseTime,"ms").concat(e.inferenceTime?" | Inf: ".concat((1e3*e.inferenceTime).toFixed(0),"ms"):"")},s)})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-zinc-800 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400 mb-1",children:"Avg Response Time"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-white",children:[(()=>{let e=l.filter(e=>e.isOnline&&e.responseTime>0);return 0===e.length?0:Math.round(e.reduce((e,s)=>e+s.responseTime,0)/e.length)})(),"ms"]}),(0,a.jsx)("div",{className:"text-xs text-zinc-500",children:"Network latency"})]}),(0,a.jsxs)("div",{className:"bg-zinc-800 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400 mb-1",children:"Avg Inference Time"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-white",children:[C(),"ms"]}),(0,a.jsx)("div",{className:"text-xs text-zinc-500",children:"Model processing"})]}),(0,a.jsxs)("div",{className:"bg-zinc-800 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400 mb-1",children:"Reliability"}),(0,a.jsxs)("div",{className:"text-xl font-bold text-white",children:[_(),"%"]}),(0,a.jsx)("div",{className:"text-xs text-zinc-500",children:"Uptime ratio"})]})]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400 mb-2",children:"Recent Health Checks"}),l.slice(-15).reverse().map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-zinc-800 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.isOnline?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ee.Z,{className:"h-3 w-3 text-green-400"}),!e.warmupComplete&&(0,a.jsx)(j,{variant:"secondary",className:"text-xs px-1 py-0",children:"WARM"})]}):(0,a.jsx)(es.Z,{className:"h-3 w-3 text-red-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-white text-sm",children:e.timestamp.toLocaleTimeString()}),e.gpuTemperature&&(0,a.jsxs)("div",{className:"text-xs text-zinc-400 flex items-center gap-1",children:[(0,a.jsx)(ed.Z,{className:"h-3 w-3"}),e.gpuTemperature,"\xb0C"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-zinc-400",children:[(0,a.jsxs)("span",{children:[e.responseTime,"ms"]}),e.inferenceTime&&(0,a.jsxs)("span",{children:["Inf: ",(1e3*e.inferenceTime).toFixed(0),"ms"]}),e.cpuUsage&&(0,a.jsxs)("span",{children:["CPU: ",e.cpuUsage.toFixed(1),"%"]}),e.gpuUsage&&(0,a.jsxs)("span",{children:["GPU: ",e.gpuUsage.toFixed(1),"%"]})]})]},s))]})]}):(0,a.jsx)("div",{className:"text-center text-zinc-400 py-8",children:"No health data available yet"})})]})})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsx)(m,{onClick:async()=>{b(!0);try{await i()}finally{b(!1)}},disabled:N,variant:"outline",className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(et.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Checking..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(et.Z,{className:"h-4 w-4 mr-2"}),"Manual Health Check"]})}),t.url&&(0,a.jsxs)(m,{onClick:()=>window.open("".concat(t.url,"/metrics"),"_blank"),variant:"outline",className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:[(0,a.jsx)(ep.Z,{className:"h-4 w-4 mr-2"}),"View Raw Metrics"]})]}),d&&d.isOnline&&70>Z()&&(0,a.jsxs)(V,{className:"border-yellow-800",children:[(0,a.jsx)(ea.Z,{className:"h-4 w-4"}),(0,a.jsxs)(G,{className:"text-yellow-400",children:[(0,a.jsx)("strong",{children:"Performance Warning:"})," Server performance is below optimal levels.",!d.warmupComplete&&" Server is still warming up.",d.responseTime>1e3&&" High response times detected.",d.cpuUsage&&d.cpuUsage>80&&" High CPU usage detected."]})]})]}):(0,a.jsx)(x,{className:"bg-zinc-900 border-zinc-800",children:(0,a.jsxs)(g,{className:"p-6 text-center",children:[(0,a.jsx)(er.Z,{className:"h-12 w-12 text-zinc-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-zinc-400",children:"No server configured"}),(0,a.jsx)("p",{className:"text-zinc-500 text-sm",children:"Complete server setup to view health dashboard"})]})})}var ev=t(407),ej=t(2451),ef=t(8930),eN=t(9227),eb=t(3276);function ew(){let{voices:e,selectedVoiceId:s,selectedEmotionId:t,setSelectedVoice:i,setSelectedEmotion:n,deleteVoice:l}=(0,T.m)(),[c,d]=(0,r.useState)(null),[o,u]=(0,r.useState)(!1),[h,p]=(0,r.useState)("server"),[g,v]=(0,r.useState)(!1),f=e=>{s===e?i(null):i(e),n(null)},N=e=>{t===e?n(null):n(e)},b=(e,s)=>{if(c===s){d(null);return}let t=new Audio(e);d(s),t.onended=()=>d(null),t.onerror=()=>d(null),t.play().catch(()=>d(null))};return(0,a.jsxs)("div",{className:"bg-sidebar border-r border-sidebar-border flex flex-col h-full transition-all duration-300 ease-in-out ".concat(g?"w-12":"w-80"),children:[(0,a.jsxs)("div",{className:"flex-shrink-0 relative transition-all duration-300 ".concat(g?"p-2 pt-4":"p-6 pb-0"),children:[(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>{v(!g)},className:"absolute top-4 right-2 h-8 w-8 p-0 text-muted-foreground hover:text-foreground z-10",children:g?(0,a.jsx)(ev.Z,{className:"h-4 w-4"}):(0,a.jsx)(ej.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex border-b border-zinc-700 transition-opacity duration-300 ".concat(g?"opacity-0 pointer-events-none":"opacity-100"),children:[(0,a.jsx)("button",{onClick:()=>p("server"),className:"flex-1 pb-2 text-sm font-medium transition-colors ".concat("server"===h?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"),children:"Server"}),(0,a.jsx)("button",{onClick:()=>p("voices"),className:"flex-1 pb-2 text-sm font-medium transition-colors ".concat("voices"===h?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"),children:"Manage Voices"})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto transition-all duration-300 ".concat(g?"hidden":"p-6"),children:["server"===h&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q,{}),(0,a.jsxs)(m,{variant:"outline",size:"sm",className:"w-full border-zinc-700 text-zinc-300 hover:bg-zinc-800 bg-transparent",onClick:()=>u(!0),children:[(0,a.jsx)(ep.Z,{className:"h-3 w-3 mr-2"}),"View Full Dashboard"]})]})}),"voices"===h&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-sm font-medium text-sidebar-foreground",children:"Voices"}),(0,a.jsx)(E,{})]}),0===e.length?(0,a.jsxs)(x,{className:"p-4 text-center",children:[(0,a.jsx)(M.Z,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No voices uploaded yet"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Upload your first voice sample to get started"})]}):(0,a.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,a.jsxs)(x,{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("button",{onClick:()=>f(e.id),className:"text-sm font-medium text-left flex-1 ".concat(s===e.id?"text-primary":"text-foreground"),children:e.name}),(0,a.jsx)(m,{size:"sm",variant:"ghost",onClick:()=>l(e.id),className:"h-6 w-6 p-0 text-muted-foreground hover:text-destructive",children:(0,a.jsx)(ef.Z,{className:"h-3 w-3"})})]}),s===e.id&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>N("neutral"),className:"flex-1 text-left px-2 py-1 rounded text-xs ".concat("neutral"!==t&&(t||s!==e.id)?"bg-muted text-muted-foreground hover:bg-accent":"bg-primary text-primary-foreground"),children:"Neutral (Main)"}),e.mainAudioUrl&&(0,a.jsx)(m,{size:"sm",variant:"ghost",onClick:()=>b(e.mainAudioUrl,"".concat(e.id,"-main")),className:"h-6 w-6 p-0",children:c==="".concat(e.id,"-main")?(0,a.jsx)(eN.Z,{className:"h-3 w-3"}):(0,a.jsx)(eb.Z,{className:"h-3 w-3"})})]}),e.emotions.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>N(e.id),className:"flex-1 text-left px-2 py-1 rounded text-xs ".concat(t===e.id?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-accent"),children:e.name}),e.audioUrl&&(0,a.jsx)(m,{size:"sm",variant:"ghost",onClick:()=>b(e.audioUrl,e.id),className:"h-6 w-6 p-0",children:c===e.id?(0,a.jsx)(eN.Z,{className:"h-3 w-3"}):(0,a.jsx)(eb.Z,{className:"h-3 w-3"})})]},e.id))]}),(0,a.jsx)("div",{className:"flex gap-1 mt-2",children:(0,a.jsxs)(j,{variant:"secondary",className:"text-xs",children:[e.emotions.length+1," variants"]})})]},e.id))})]})]}),o&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Server Health Dashboard"}),(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>u(!1),className:"text-zinc-400 hover:text-white",children:"✕"})]}),(0,a.jsx)(eg,{})]})})})]})}var ey=t(2926);function ez(){let{serverConfig:e,isServerSetupComplete:s}=(0,T.m)();return s&&e?(0,a.jsxs)(j,{className:(()=>{switch(e.status){case"online":return"bg-green-600 hover:bg-green-700";case"offline":return"bg-red-600 hover:bg-red-700";case"checking":return"bg-blue-600 hover:bg-blue-700";default:return"bg-yellow-600 hover:bg-yellow-700"}})(),children:[(()=>{switch(e.status){case"online":return(0,a.jsx)(ey.Z,{className:"h-3 w-3 mr-1 text-green-400"});case"offline":return(0,a.jsx)(es.Z,{className:"h-3 w-3 mr-1 text-red-400"});case"checking":return(0,a.jsx)(et.Z,{className:"h-3 w-3 mr-1 text-blue-400 animate-spin"});default:return(0,a.jsx)(ea.Z,{className:"h-3 w-3 mr-1 text-yellow-400"})}})(),e.status.charAt(0).toUpperCase()+e.status.slice(1)]}):(0,a.jsxs)(j,{variant:"secondary",className:"bg-zinc-800 text-zinc-400",children:[(0,a.jsx)(ea.Z,{className:"h-3 w-3 mr-1"}),"No Server"]})}function ek(e){let{className:s,...t}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:d("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}var eS=t(721);function e_(e){let{className:s,...t}=e;return(0,a.jsx)(eS.fC,{"data-slot":"switch",className:d("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:(0,a.jsx)(eS.bU,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}var eC=t(6873),eZ=t(875),eU=t(401),eT=t(2135);function eR(e){let{...s}=e;return(0,a.jsx)(eC.fC,{"data-slot":"select",...s})}function eM(e){let{...s}=e;return(0,a.jsx)(eC.B4,{"data-slot":"select-value",...s})}function eP(e){let{className:s,size:t="default",children:r,...i}=e;return(0,a.jsxs)(eC.xz,{"data-slot":"select-trigger","data-size":t,className:d("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...i,children:[r,(0,a.jsx)(eC.JO,{asChild:!0,children:(0,a.jsx)(eZ.Z,{className:"size-4 opacity-50"})})]})}function eA(e){let{className:s,children:t,position:r="popper",...i}=e;return(0,a.jsx)(eC.h_,{children:(0,a.jsxs)(eC.VY,{"data-slot":"select-content",className:d("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...i,children:[(0,a.jsx)(eE,{}),(0,a.jsx)(eC.l_,{className:d("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(eL,{})]})})}function eF(e){let{className:s,children:t,...r}=e;return(0,a.jsxs)(eC.ck,{"data-slot":"select-item",className:d("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...r,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(eC.wU,{children:(0,a.jsx)(eU.Z,{className:"size-4"})})}),(0,a.jsx)(eC.eT,{children:t})]})}function eE(e){let{className:s,...t}=e;return(0,a.jsx)(eC.u_,{"data-slot":"select-scroll-up-button",className:d("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(eT.Z,{className:"size-4"})})}function eL(e){let{className:s,...t}=e;return(0,a.jsx)(eC.$G,{"data-slot":"select-scroll-down-button",className:d("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(eZ.Z,{className:"size-4"})})}var eI=t(2883),eD=t(5368),eV=t(2934),eG=t(9322),eO=t(1706),eH=t(5805),eX=t(5287),eB=t(4743),eW=t(7806),eq=t(1817),eY=t(9388),e$=t(1094),eK=t(105),eQ=t(3643);function eJ(e){let{className:s,children:t,...r}=e;return(0,a.jsxs)(eQ.fC,{"data-slot":"scroll-area",className:d("relative",s),...r,children:[(0,a.jsx)(eQ.l_,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),(0,a.jsx)(e0,{}),(0,a.jsx)(eQ.Ns,{})]})}function e0(e){let{className:s,orientation:t="vertical",...r}=e;return(0,a.jsx)(eQ.gb,{"data-slot":"scroll-area-scrollbar",orientation:t,className:d("flex touch-none p-px transition-colors select-none","vertical"===t&&"h-full w-2.5 border-l border-l-transparent","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent",s),...r,children:(0,a.jsx)(eQ.q4,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}let e4=[{title:"Multi-Speaker Dialogue",examples:[{text:"Speaker 1: Hello, how are you?\nSpeaker 2: I'm doing well, thanks!",description:"Use 'Speaker X:' labels and new lines to assign text."},{text:"Speaker 1: I'll start.\nSpeaker 2: Then I will continue.\nSpeaker 1: And I will finish.",description:"The order of speakers in the text must match the order you selected them in the UI."}]},{title:"Pauses and Timing",examples:[{text:"Hello... world",description:"Short pause (0.5s)"},{text:"Hello...... world",description:"Medium pause (1s)"},{text:"Hello.......... world",description:"Long pause (2s)"},{text:"Hello, world",description:"Natural comma pause"},{text:"Hello. World.",description:"Sentence break pause"}]},{title:"Emphasis and Tone",examples:[{text:"*Hello* world",description:"Emphasis on 'Hello'"},{text:"**IMPORTANT** message",description:"Strong emphasis"},{text:"Hello ~world~",description:"Whispered tone"},{text:"Hello WORLD!",description:"Louder/excited tone"}]},{title:"Speech Patterns",examples:[{text:"Um... let me think",description:"Natural hesitation"},{text:"Well, you know...",description:"Conversational filler"},{text:"Question mark tone?",description:"Rising intonation"},{text:"Exclamation point!",description:"Excited delivery"}]},{title:"Pronunciation Guide",examples:[{text:"Dr. Smith",description:"Abbreviations"},{text:"NASA (NAH-sah)",description:"Phonetic spelling"},{text:"2023 (twenty twenty-three)",description:"Number pronunciation"},{text:"AI (A-I)",description:"Letter-by-letter"}]}];function e2(){let{currentText:e,setText:s,selectedVoiceId:t,selectedEmotionId:i,voices:n,isProcessing:l,setProcessing:c,addGeneratedAudio:d,isServerSetupComplete:o,getVoiceSampleBlob:u,serverConfig:h}=(0,T.m)(),[p,g]=(0,r.useState)("single"),[v,f]=(0,r.useState)([]),[N,w]=(0,r.useState)(!1),[S,_]=(0,r.useState)(""),[R,M]=(0,r.useState)(0),[P,A]=(0,r.useState)(""),[F,E]=(0,r.useState)(null),[L,D]=(0,r.useState)(null),[O,H]=(0,r.useState)("generate"),[X,B]=(0,r.useState)(!1),[W,q]=(0,r.useState)(!1),[Y,$]=(0,r.useState)(0),[K,Q]=(0,r.useState)(!0),[J,ee]=(0,r.useState)(!1),es=(0,r.useRef)(null);(0,r.useRef)([]),(0,r.useRef)(!1);let et=(0,r.useRef)(null),ea=(0,r.useRef)({totalRequests:0,successfulRequests:0,failedRequests:0,failureStages:{},averageGenerationTime:0}),er=n.find(e=>e.id===t),ei=null==er?void 0:er.emotions.find(e=>e.id===i),en=S.trim()&&("single"===p?!!t:v.length>1)&&!l&&!X&&o&&!J,el=e=>{f(v.filter(s=>s.id!==e))},ec=(e,s,t)=>{let a=ea.current;s?(a.successfulRequests++,t&&(a.averageGenerationTime=(a.averageGenerationTime*(a.successfulRequests-1)+t)/a.successfulRequests)):(a.failedRequests++,a.failureStages[e]=(a.failureStages[e]||0)+1)},ed=e=>{let s=e.trim();return s?s.length>1e4?{valid:!1,error:"Text is too long (".concat(s.length," characters). Maximum is ").concat(1e4," characters.")}:{valid:!0}:{valid:!1,error:"Text cannot be empty"}},eo=e=>new Promise(s=>setTimeout(s,e)),em=e=>["Failed to fetch","Network error","timeout","503","502","504","ECONNREFUSED"].some(s=>e.message.toLowerCase().includes(s.toLowerCase())),ex=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1?arguments[1]:void 0,a=Date.now();$(e);try{let r;let n=ed(s);if(!n.valid)throw ec("validation",!1),Error(n.error);A("Fetching voice samples..."),M(20);let l=new FormData;if(l.append("text",s),"single"===p){let e=await u(t,i);if(!e)throw Error("Could not find the selected voice audio sample.");l.append("voice_file",new File([e],"voice_sample.wav")),r="".concat(h.url,"/single-speaker")}else(await Promise.all(v.map(e=>u(e.id,null)))).forEach((e,s)=>{if(!e)throw Error("Could not find audio sample for speaker ".concat(s+1,": ").concat(v[s].name,"."));l.append("voice_files",new File([e],"speaker_".concat(s+1,".wav")))}),r="".concat(h.url,"/multi-speaker");M(40),A(e>1?"Generating speech (attempt ".concat(e,")..."):"Generating speech..."),M(60),et.current=new AbortController;let c=setTimeout(()=>{var e;return null===(e=et.current)||void 0===e?void 0:e.abort()},12e4),d=await fetch(r,{method:"POST",body:l,signal:et.current.signal});if(clearTimeout(c),!d.ok){let e="Server error: ".concat(d.status);try{let s=await d.json();e=s.detail||s.message||e}catch(s){e=await d.text()||e}throw ec("server_response",!1),Error(e)}A("Processing audio..."),M(70);let o=await d.blob();if(!o||0===o.size)throw ec("audio_blob_processing",!1),Error("Received empty audio data from server");if(A("Saving audio..."),M(80),!await eh(o,s))throw ec("audio_save",!1),Error("Failed to save generated audio to storage");let m=Date.now()-a;return ec("complete",!0,m),M(100),o}catch(a){let t=a instanceof Error?a:Error(String(a));if("AbortError"===t.name&&W)throw Error("Generation cancelled by user");if("AbortError"===t.name){let t=Error("Request timed out.");if(ec("timeout",!1),e<3)return await eo(2e3*e),ex(e+1,s);throw t}if(e<3&&em(t))return await eo(2e3*e),ex(e+1,s);throw ec("unknown",!1),t}},eu=async e=>{if(h&&("single"!==p||t)&&("multi"!==p||!(v.length<2))){c(!0),B(!0),q(!1),E(null),D(null),A("Preparing voice model..."),M(10),$(0),ea.current.totalRequests++;try{await ex(1,e)&&!W&&(D("Audio generated and saved successfully!"),setTimeout(()=>D(null),3e3))}catch(e){console.error("Audio generation failed:",e),E(e instanceof Error?e.message:"Failed to generate audio"),setTimeout(()=>E(null),5e3)}finally{c(!1),B(!1),M(0),A(""),$(0),et.current=null}}},eh=async function(e,s){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{A("Finalizing audio..."),M(80);let r={id:crypto.randomUUID(),text:s,voiceId:"single"===p?t:v.map(e=>e.id).join(","),emotionId:"single"===p&&null!=i?i:void 0,audioUrl:eK.C.createObjectURL(e),createdAt:new Date};return await d(r,e),A("Complete!"),M(100),D("Audio ".concat(a?"streamed":"generated"," successfully!")),setTimeout(()=>D(null),3e3),!0}catch(e){return console.error("Failed to save audio:",e),!1}},ep=(0,r.useRef)(0),eg=(e,s)=>{let t=es.current;if(!t)return;let a=new Int16Array(e.buffer,e.byteOffset,e.byteLength/2),r=new Float32Array(a.length);for(let e=0;e<a.length;e++)r[e]=a[e]/32768;let i=t.createBuffer(1,r.length,s);i.getChannelData(0).set(r);let n=t.createBufferSource();n.buffer=i,n.connect(t.destination);let l=Math.max(t.currentTime,ep.current);n.start(l),ep.current=l+i.duration,n.onended=()=>{n.disconnect()}},ev=(e,s)=>{let t=e.reduce((e,s)=>e+s.length,0),a=new ArrayBuffer(44+t),r=new DataView(a),i=(e,s)=>{for(let t=0;t<s.length;t++)r.setUint8(e+t,s.charCodeAt(t))};i(0,"RIFF"),r.setUint32(4,36+t,!0),i(8,"WAVE"),i(12,"fmt "),r.setUint32(16,16,!0),r.setUint16(20,1,!0),r.setUint16(22,1,!0),r.setUint32(24,s,!0),r.setUint32(28,2*s,!0),r.setUint16(32,2,!0),r.setUint16(34,16,!0),i(36,"data"),r.setUint32(40,t,!0);let n=44,l=new Uint8Array(a);for(let s of e)l.set(s,n),n+=s.length;return new Blob([a],{type:"audio/wav"})},ej=async e=>{if(!h||"single"===p&&!t||"multi"===p&&v.length<2)return;E(null),D(null),ee(!0),A("Initializing audio context..."),ep.current=0,es.current&&es.current.close();let s=window.AudioContext||window.webkitAudioContext;es.current=new s,"suspended"===es.current.state&&await es.current.resume();let a=24e3,r=[],n=!0;try{let s;let l=new FormData;if(l.append("text",e),A("Preparing voice samples..."),"single"===p){let e=await u(t,i);if(!e)throw Error("Voice sample not found.");l.append("voice_file",new File([e],"voice_sample.wav")),s="".concat(h.url,"/single-speaker-stream")}else(await Promise.all(v.map(e=>u(e.id,null)))).forEach((e,s)=>{if(!e)throw Error("Could not find audio sample for speaker ".concat(s+1,"."));l.append("voice_files",new File([e],"speaker_".concat(s+1,".wav")))}),s="".concat(h.url,"/multi-speaker-stream");A("Connecting to server...");let c=await fetch(s,{method:"POST",body:l,cache:"no-cache"});if(!c.ok)throw Error("Server error: ".concat(c.status));if(!c.body)throw Error("No response body");let d=c.body.getReader(),o=new TextDecoder,m="";for(A("Streaming audio...");;){let{done:s,value:t}=await d.read();if(s)break;let i=(m+=o.decode(t,{stream:!0})).split("\n\n");for(let s of(m=i.pop()||"",i)){if(!s.trim())continue;let t=s.split("\n"),i="message",l="";for(let e of t)e.startsWith("event:")?i=e.substring(6).trim():e.startsWith("data:")&&(l=e.substring(5).trim());if(l)try{let s=JSON.parse(l);if(console.log("SSE event:",i,s),"audio_chunk"===i&&s.audio_data){let e=s.audio_data,t=new Uint8Array(e.match(/.{1,2}/g).map(e=>parseInt(e,16)));r.push(t),a=s.sample_rate||a,n&&es.current&&(ep.current=es.current.currentTime+.15,n=!1),eg(t,a)}else if("complete"===i){if(A("Finalizing audio..."),es.current){let e=ep.current-es.current.currentTime;e>0&&await new Promise(s=>setTimeout(s,1e3*e+200))}let s=ev(r,a);console.log("wave blob"),s.size>44&&await eh(s,e,!0),ef();return}else if("error"===i)throw Error(s.message||"Streaming error")}catch(e){console.error("Failed to parse SSE data:",e)}}}}catch(e){console.error("Streaming error:",e),E(e instanceof Error?e.message:"Streaming failed"),ef()}},ef=()=>{es.current&&(es.current.close(),es.current=null),ee(!1),A(""),F||(D("Stream completed successfully"),setTimeout(()=>D(null),3e3))},eN=()=>{en&&(s(S),"generate"===O?eu(S):ej(S))};return(0,a.jsxs)(x,{className:"p-6 w-full border-2 shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center flex-wrap gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,a.jsx)(eI.Z,{className:"h-5 w-5 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Audio Generation"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Create speech with AI voices"})]}),(0,a.jsxs)(z,{open:N,onOpenChange:w,children:[(0,a.jsx)(k,{asChild:!0,children:(0,a.jsxs)(m,{variant:"outline",size:"sm",className:"gap-2 hover:bg-primary/5",children:[(0,a.jsx)(eD.Z,{className:"h-4 w-4"}),"Formatting Guide"]})}),(0,a.jsxs)(C,{className:"max-w-3xl max-h-[80vh]",children:[(0,a.jsx)(Z,{children:(0,a.jsxs)(U,{className:"flex items-center gap-2",children:[(0,a.jsx)(eD.Z,{className:"h-5 w-5"})," Text Formatting Guide"]})}),(0,a.jsx)(eJ,{className:"max-h-[60vh]",children:(0,a.jsxs)("div",{className:"space-y-6 pr-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-primary/10 to-primary/5 p-4 rounded-lg border border-primary/20",children:[(0,a.jsxs)("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[(0,a.jsx)(eV.Z,{className:"h-4 w-4 text-primary"}),"Quick Tips"]}),(0,a.jsxs)("ul",{className:"text-sm space-y-2 text-muted-foreground",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-primary mt-0.5",children:"•"}),"Use natural punctuation for realistic speech patterns"]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-primary mt-0.5",children:"•"}),"Add pauses with dots (...) for dramatic effect"]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-primary mt-0.5",children:"•"}),"Use *asterisks* for emphasis and ~tildes~ for whispers"]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-primary mt-0.5",children:"•"}),'For multi-speaker, use "Speaker 1:", "Speaker 2:", etc.']})]})]}),e4.map((e,s)=>(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-1 w-1 rounded-full bg-primary"}),e.title]}),(0,a.jsx)("div",{className:"grid gap-3",children:e.examples.map((e,s)=>(0,a.jsxs)("div",{className:"bg-card border rounded-lg p-3 hover:border-primary/50 transition-colors",children:[(0,a.jsx)("div",{className:"font-mono text-sm bg-muted/70 p-3 rounded-md mb-2 border",children:e.text}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-primary mt-0.5",children:"→"}),e.description]})]},s))})]},s))]})})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-muted/50 rounded-lg border",children:[(0,a.jsx)(ey.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(ez,{})]})]}),F&&(0,a.jsxs)(V,{className:"mb-4 border-destructive/50 bg-destructive/10 text-destructive dark:border-destructive animate-in fade-in slide-in-from-top-2 duration-300",children:[(0,a.jsx)(eG.Z,{className:"h-4 w-4"}),(0,a.jsx)(G,{className:"font-medium",children:F})]}),L&&(0,a.jsxs)(V,{className:"mb-4 border-green-500/50 bg-green-500/10 text-green-700 dark:text-green-400 dark:border-green-500 animate-in fade-in slide-in-from-top-2 duration-300",children:[(0,a.jsx)(eV.Z,{className:"h-4 w-4"}),(0,a.jsx)(G,{className:"font-medium",children:L})]}),!o&&(0,a.jsxs)(V,{className:"mb-4 border-yellow-500/50 bg-yellow-500/10 text-yellow-700 dark:text-yellow-400 dark:border-yellow-500",children:[(0,a.jsx)(eG.Z,{className:"h-4 w-4"}),(0,a.jsx)(G,{className:"font-medium",children:"Server setup required to generate audio."})]}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(eO.Z,{className:"h-4 w-4 text-primary"}),"Generation Type"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(m,{variant:"single"===p?"default":"outline",size:"sm",onClick:()=>g("single"),disabled:l||J||X,className:"flex-1 transition-all",children:[(0,a.jsx)(eO.Z,{className:"h-4 w-4 mr-2"})," Single"]}),(0,a.jsxs)(m,{variant:"multi"===p?"default":"outline",size:"sm",onClick:()=>g("multi"),disabled:l||J||X,className:"flex-1 transition-all",children:[(0,a.jsx)(eH.Z,{className:"h-4 w-4 mr-2"})," Multi"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(eI.Z,{className:"h-4 w-4 text-primary"}),"Generation Mode"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(m,{variant:"generate"===O?"default":"outline",size:"sm",onClick:()=>H("generate"),disabled:l||J||X,className:"flex-1 transition-all",children:[(0,a.jsx)(eI.Z,{className:"h-4 w-4 mr-2"})," File"]}),(0,a.jsxs)(m,{variant:"stream"===O?"default":"outline",size:"sm",onClick:()=>H("stream"),disabled:l||J||X,className:"flex-1 transition-all",children:[(0,a.jsx)(eX.Z,{className:"h-4 w-4 mr-2"})," Live"]})]})]})]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)(ek,{value:S,onChange:e=>_(e.target.value),onKeyDown:e=>{K&&"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),eN())},placeholder:"multi"===p?"Enter dialogue with speaker labels (e.g., 'Speaker 1: Hello!')":er?"Enter text for ".concat(er.name,"'s voice..."):"Select a voice, then enter text...",className:"pr-14 py-4 min-h-[140px] resize-none border-2 focus:border-primary transition-colors",disabled:l||J||X}),(0,a.jsx)("div",{className:"absolute bottom-3 right-3",children:(0,a.jsx)(m,{size:"icon",onClick:eN,disabled:!en,className:"shadow-lg hover:scale-105 transition-transform",children:(0,a.jsx)(eB.Z,{className:"w-4 h-4"})})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center px-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(e_,{id:"enter-to-send",checked:K,onCheckedChange:Q,disabled:l||J||X}),(0,a.jsx)(b,{htmlFor:"enter-to-send",className:"text-xs text-muted-foreground cursor-pointer",children:"Press Enter to generate"})]}),(0,a.jsxs)("p",{className:"text-xs font-medium transition-colors ".concat(S.length>9e3?"text-destructive":S.length>7e3?"text-yellow-600":"text-muted-foreground"),children:[S.length," / ",1e4]})]})]}),(0,a.jsx)("div",{className:"space-y-4 my-6",children:"single"===p?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(eO.Z,{className:"h-4 w-4 text-primary"}),"Selected Voice"]}),(0,a.jsx)("div",{className:"p-4 bg-gradient-to-r from-muted/50 to-muted/30 rounded-lg border-2 border-muted hover:border-primary/50 transition-colors",children:er?(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-primary/10 rounded-full",children:(0,a.jsx)(eO.Z,{className:"h-4 w-4 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:er.name}),ei&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[ei.name," emotion"]})]})]}),ei&&(0,a.jsx)(j,{variant:"secondary",className:"ml-auto",children:ei.name})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(eG.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:"No voice selected"})]})})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(eH.Z,{className:"h-4 w-4 text-primary"}),"Selected Speakers (",v.length,")"]}),(0,a.jsxs)("div",{className:"p-4 bg-gradient-to-r from-muted/50 to-muted/30 rounded-lg border-2 border-muted space-y-3",children:[v.length>0?(0,a.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:v.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-background/80 backdrop-blur-sm p-3 rounded-lg border hover:border-primary/50 transition-all group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(j,{variant:"default",className:"min-w-[90px]",children:["Speaker ",s+1]}),(0,a.jsx)("span",{className:"font-medium text-sm",children:e.name})]}),(0,a.jsx)(m,{variant:"ghost",size:"icon",className:"h-7 w-7 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-destructive/10 hover:text-destructive",onClick:()=>el(e.id),disabled:l||J||X,children:(0,a.jsx)(y.Z,{className:"h-4 w-4"})})]},e.id))}):(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground py-2",children:[(0,a.jsx)(eG.Z,{className:"h-4 w-4"}),(0,a.jsx)("p",{className:"text-sm",children:"Add at least 2 speakers to begin."})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2 border-t",children:[(0,a.jsxs)(eR,{onValueChange:e=>{let s=n.find(s=>s.id===e);s&&!v.find(s=>s.id===e)&&f([...v,{id:s.id,name:s.name}])},disabled:l||J||X,children:[(0,a.jsx)(eP,{className:"flex-1 border-2 hover:border-primary/50 transition-colors",children:(0,a.jsx)(eM,{placeholder:"Add a speaker..."})}),(0,a.jsx)(eA,{children:n.filter(e=>!v.some(s=>s.id===e.id)).map(e=>(0,a.jsx)(eF,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eO.Z,{className:"h-3 w-3"}),e.name]})},e.id))})]}),(0,a.jsx)(m,{variant:"outline",size:"icon",className:"shrink-0",disabled:n.length===v.length||l||J||X,children:(0,a.jsx)(eW.Z,{className:"h-4 w-4"})})]})]})]})}),(l||J||X)&&(0,a.jsxs)("div",{className:"space-y-4 mb-6 p-4 bg-gradient-to-r from-primary/5 to-primary/10 rounded-lg border-2 border-primary/20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(eq.Z,{className:"h-5 w-5 animate-spin text-primary"}),J&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full animate-pulse"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold",children:P}),Y>1&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Attempt ",Y," of ",3]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[J&&(0,a.jsxs)(j,{variant:"destructive",className:"animate-pulse",children:[(0,a.jsx)(eX.Z,{className:"h-3 w-3 mr-1"}),"LIVE"]}),Y>1&&(0,a.jsxs)(j,{variant:"secondary",children:["Retry ",Y,"/",3]})]})]}),(l||X)&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(I,{value:R,className:"h-2"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground text-center",children:[Math.round(R),"% complete"]})]}),J&&(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("div",{className:"h-8 w-1 bg-primary/60 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),(0,a.jsx)("div",{className:"h-8 w-1 bg-primary/60 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),(0,a.jsx)("div",{className:"h-8 w-1 bg-primary/60 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),(0,a.jsx)("span",{children:"Audio is playing live..."})]})]}),(X||J)&&(0,a.jsx)("div",{className:"flex gap-3 mb-6",children:"generate"===O?(0,a.jsxs)(m,{onClick:()=>{et.current&&(et.current.abort(),q(!0),c(!1),B(!1),M(0),A(""),$(0),E("Generation cancelled by user"),setTimeout(()=>E(null),3e3))},variant:"destructive",size:"lg",className:"flex-1 hover:scale-[1.02] transition-transform",children:[(0,a.jsx)(eY.Z,{className:"h-4 w-4 mr-2"})," Cancel Generation"]}):(0,a.jsxs)(m,{onClick:ef,variant:"destructive",className:"flex-1 gap-2 hover:scale-[1.02] transition-transform",size:"lg",children:[(0,a.jsx)(e$.Z,{className:"h-4 w-4"})," Stop Streaming"]})}),!en&&!l&&!J&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-muted/30 rounded-lg border-2 border-dashed border-muted-foreground/30",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,a.jsx)(eG.Z,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold mb-1",children:"Requirements Checklist"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Complete all requirements to generate audio"})]})]}),(0,a.jsxs)("ul",{className:"space-y-2",children:[(0,a.jsxs)("li",{className:"flex items-center gap-3 p-2 rounded transition-colors ".concat(S.trim()?"bg-green-500/10":"bg-muted/50"),children:[(0,a.jsx)("div",{className:"w-5 h-5 rounded-full flex items-center justify-center ".concat(S.trim()?"bg-green-500":"bg-muted-foreground/30"),children:S.trim()&&(0,a.jsx)(eV.Z,{className:"h-3 w-3 text-white"})}),(0,a.jsx)("span",{className:"text-sm ".concat(S.trim()?"text-green-700 dark:text-green-400 font-medium":"text-muted-foreground"),children:"Enter text to convert"})]}),"single"===p?(0,a.jsxs)("li",{className:"flex items-center gap-3 p-2 rounded transition-colors ".concat(t?"bg-green-500/10":"bg-muted/50"),children:[(0,a.jsx)("div",{className:"w-5 h-5 rounded-full flex items-center justify-center ".concat(t?"bg-green-500":"bg-muted-foreground/30"),children:t&&(0,a.jsx)(eV.Z,{className:"h-3 w-3 text-white"})}),(0,a.jsx)("span",{className:"text-sm ".concat(t?"text-green-700 dark:text-green-400 font-medium":"text-muted-foreground"),children:"Select a voice from sidebar"})]}):(0,a.jsxs)("li",{className:"flex items-center gap-3 p-2 rounded transition-colors ".concat(v.length>=2?"bg-green-500/10":"bg-muted/50"),children:[(0,a.jsx)("div",{className:"w-5 h-5 rounded-full flex items-center justify-center ".concat(v.length>=2?"bg-green-500":"bg-muted-foreground/30"),children:v.length>=2&&(0,a.jsx)(eV.Z,{className:"h-3 w-3 text-white"})}),(0,a.jsx)("span",{className:"text-sm ".concat(v.length>=2?"text-green-700 dark:text-green-400 font-medium":"text-muted-foreground"),children:"Select at least 2 speakers"})]}),(0,a.jsxs)("li",{className:"flex items-center gap-3 p-2 rounded transition-colors ".concat(o?"bg-green-500/10":"bg-muted/50"),children:[(0,a.jsx)("div",{className:"w-5 h-5 rounded-full flex items-center justify-center ".concat(o?"bg-green-500":"bg-muted-foreground/30"),children:o&&(0,a.jsx)(eV.Z,{className:"h-3 w-3 text-white"})}),(0,a.jsx)("span",{className:"text-sm ".concat(o?"text-green-700 dark:text-green-400 font-medium":"text-muted-foreground"),children:"Complete server setup"})]})]})]})]})}var e1=t(8846);function e3(e){let{className:s,defaultValue:t,value:i,min:n=0,max:l=100,...c}=e,o=r.useMemo(()=>Array.isArray(i)?i:Array.isArray(t)?t:[n,l],[i,t,n,l]);return(0,a.jsxs)(e1.fC,{"data-slot":"slider",defaultValue:t,value:i,min:n,max:l,className:d("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",s),...c,children:[(0,a.jsx)(e1.fQ,{"data-slot":"slider-track",className:"bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5",children:(0,a.jsx)(e1.e6,{"data-slot":"slider-range",className:"bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full"})}),Array.from({length:o.length},(e,s)=>(0,a.jsx)(e1.bU,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},s))]})}var e5=t(2735);function e6(e){let{audioUrl:s,audioId:t,text:i,className:n}=e,[l,c]=(0,r.useState)(!1),[o,u]=(0,r.useState)(0),[h,p]=(0,r.useState)(0),[g,v]=(0,r.useState)([1]),[j,f]=(0,r.useState)(Array(32).fill(0)),N=(0,r.useRef)(null),b=(0,r.useRef)();(0,r.useEffect)(()=>{let e=N.current;if(!e)return;let s=()=>p(e.duration),t=()=>u(e.currentTime),a=()=>c(!1),r=()=>c(!0),i=()=>c(!1);return e.addEventListener("loadedmetadata",s),e.addEventListener("timeupdate",t),e.addEventListener("ended",a),e.addEventListener("play",r),e.addEventListener("pause",i),()=>{e.removeEventListener("loadedmetadata",s),e.removeEventListener("timeupdate",t),e.removeEventListener("ended",a),e.removeEventListener("play",r),e.removeEventListener("pause",i)}},[]),(0,r.useEffect)(()=>{if(l){let e=()=>{f(Array.from({length:32},()=>100*Math.random())),b.current=requestAnimationFrame(e)};e()}else b.current&&cancelAnimationFrame(b.current),f(Array(32).fill(0));return()=>{b.current&&cancelAnimationFrame(b.current)}},[l]);let w=async()=>{let e=N.current;if(e){if(l)e.pause();else try{await e.play()}catch(e){console.error("Failed to play audio:",e)}}},y=e=>"".concat(Math.floor(e/60),":").concat(Math.floor(e%60).toString().padStart(2,"0"));return(0,a.jsxs)(x,{className:d("p-4",n),children:[(0,a.jsx)("audio",{ref:N,src:s,preload:"metadata"}),(0,a.jsx)("div",{className:"mb-4 p-3 bg-muted/50 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm font-mono leading-relaxed line-clamp-2",children:i})}),(0,a.jsxs)("div",{className:"mb-4 p-4 bg-black/5 dark:bg-white/5 rounded-lg",children:[(0,a.jsx)("div",{className:"flex items-center gap-1 h-16 justify-center",children:j.map((e,s)=>(0,a.jsx)("div",{className:"bg-primary/70 rounded-sm transition-all duration-75 ease-out",style:{width:"4px",height:"".concat(Math.max(2,.6*e),"px"),opacity:l?1:.3}},s))}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-2",children:[(0,a.jsx)(ep.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:l?"Playing":"Ready"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(e3,{value:[h>0?o/h*100:0],onValueChange:e=>{let s=N.current;if(!s)return;let t=e[0]/100*h;s.currentTime=t,u(t)},max:100,step:.1,className:"w-full",disabled:0===h}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:y(o)}),(0,a.jsx)("span",{children:y(h)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(m,{onClick:w,disabled:0===h,size:"sm",className:"gap-2",children:[l?(0,a.jsx)(eN.Z,{className:"h-4 w-4"}):(0,a.jsx)(eb.Z,{className:"h-4 w-4"}),l?"Pause":"Play"]}),(0,a.jsxs)(m,{onClick:()=>{let e=document.createElement("a");e.href=s,e.download="tts-audio-".concat(t,".wav"),document.body.appendChild(e),e.click(),document.body.removeChild(e)},variant:"outline",size:"sm",className:"gap-2 bg-transparent",children:[(0,a.jsx)(e5.Z,{className:"h-4 w-4"}),"Download"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[(0,a.jsx)(eO.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(e3,{value:g,onValueChange:e=>{let s=N.current;s&&(v(e),s.volume=e[0])},max:1,step:.1,className:"w-20"})]})]})]})]})}var e8=t(5621);function e9(){let{generatedAudios:e,voices:s,removeGeneratedAudio:t}=(0,T.m)(),r=async e=>{if(confirm("Are you sure you want to delete this audio?"))try{await t(e)}catch(e){console.error("Failed to delete audio:",e)}};return 0===e.length?(0,a.jsxs)(x,{className:"p-6 text-center",children:[(0,a.jsx)(e8.Z,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No generated audio yet"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Generated audio will appear here"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(e8.Z,{className:"h-5 w-5"}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Generated Audio"}),(0,a.jsx)(j,{variant:"secondary",children:e.length})]}),e.length>1&&(0,a.jsxs)(m,{onClick:()=>{e.forEach(e=>{let s=document.createElement("a");s.href=e.audioUrl,s.download="tts-".concat(e.id,".wav"),document.body.appendChild(s),s.click(),document.body.removeChild(s)})},variant:"outline",size:"sm",className:"gap-2",children:[(0,a.jsx)(e5.Z,{className:"h-4 w-4"}),"Download All"]})]}),(0,a.jsx)("div",{className:"space-y-4",children:e.slice().reverse().map(e=>{let t=s.find(s=>s.id===e.voiceId),i=null==t?void 0:t.emotions.find(s=>s.id===e.emotionId);return(0,a.jsxs)("div",{className:"space-y-2 p-4 rounded-lg border bg-background",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eO.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:(null==t?void 0:t.name)||"Unknown Voice"}),i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:i.name})]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:new Date(e.createdAt).toLocaleString()})]}),(0,a.jsx)(m,{onClick:()=>r(e.id),variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-muted-foreground hover:text-destructive",children:(0,a.jsx)(ef.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)(e6,{audioUrl:e.audioUrl,audioId:e.id,text:e.text})]},e.id)})}),e.length>0&&(0,a.jsx)(x,{className:"p-4 bg-muted/50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{children:["Total: ",e.length," audio files"]}),(0,a.jsxs)("span",{children:["Storage: ~",Math.round(1.2*e.length),"MB estimated"]})]})})]})}var e7=t(7845);function se(e){let{delayDuration:s=0,...t}=e;return(0,a.jsx)(e7.zt,{"data-slot":"tooltip-provider",delayDuration:s,...t})}function ss(e){let{...s}=e;return(0,a.jsx)(se,{children:(0,a.jsx)(e7.fC,{"data-slot":"tooltip",...s})})}function st(e){let{...s}=e;return(0,a.jsx)(e7.xz,{"data-slot":"tooltip-trigger",...s})}function sa(e){let{className:s,sideOffset:t=0,children:r,...i}=e;return(0,a.jsx)(e7.h_,{children:(0,a.jsxs)(e7.VY,{"data-slot":"tooltip-content",sideOffset:t,className:d("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",s),...i,children:[r,(0,a.jsx)(e7.Eh,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var sr=t(6362);function si(){var e;let{hardwareInfo:s,serverConfig:i,serverSetupStep:n,isServerSetupComplete:l,licenseKey:c,checkHardware:d,setServerConfig:o,checkServerHealth:v,setServerSetupStep:N,setLicenseKey:w,deployToRunPod:z}=(0,T.m)(),[k,S]=(0,r.useState)(c||""),[_,C]=(0,r.useState)(!1),[Z,U]=(0,r.useState)(""),[R,M]=(0,r.useState)(""),[P,A]=(0,r.useState)(""),[F,E]=(0,r.useState)(!1),[L,D]=(0,r.useState)(null),[O,H]=(0,r.useState)(null),[X,B]=(0,r.useState)(null),[W,q]=(0,r.useState)(null),[Y,$]=(0,r.useState)(!1),[K,Q]=(0,r.useState)("");(0,r.useEffect)(()=>{c?N("hardware-check"):(console.log("No stored license key found."),N("license-input"),console.log("Set server setup step to license-input",n))},[c,N]),(0,r.useEffect)(()=>{console.log("Server setup step changed:",n)},[n]),(0,r.useEffect)(()=>{if("hardware-check"===n){if(s){let e=s.recommendedSetup;"local"===e&&"windows"!==s.os&&(Q("Local Server setup is currently only supported on Windows. We recommend using RunPod for the best performance on your system."),e="runpod"),N({local:"server-download",remote:"url-input",runpod:"runpod-deploy"}[e]||"url-input")}else d()}},[s,n,d,N]),(0,r.useEffect)(()=>{if(s&&!X){let e=new(t(2682)).Yg;e.setProgressCallback(D),B(e)}},[s,X]),(0,r.useEffect)(()=>{let e;if(X&&(L||(null==i?void 0:i.type)==="local")){let s=async()=>{try{let e=await X.getServerInfo();q(e)}catch(e){console.error("Failed to get server info:",e)}};s(),e=setInterval(s,3e3)}return()=>{e&&clearInterval(e)}},[X,L,i]);let J=async()=>{if(!R.trim())return;let e=function(e){try{let s=new URL(e);if(!["http:","https:"].includes(s.protocol))return{isValid:!1,error:"URL must use HTTP or HTTPS protocol"};if(!s.hostname)return{isValid:!1,error:"URL must have a valid hostname"};let t="".concat(s.protocol,"//").concat(s.hostname).concat(s.port?":".concat(s.port):"");return{isValid:!0,normalizedUrl:t}}catch(e){return{isValid:!1,error:"Invalid URL format"}}}(R.trim());if(!e.isValid){alert(e.error||"Invalid URL format. Please enter a valid HTTP/HTTPS URL.");return}E(!0);try{let s={type:"remote",url:e.normalizedUrl,status:"checking"};await o(s),await v()?T.m.setState({isServerSetupComplete:!0,serverSetupStep:"complete"}):alert("Server is not reachable or license is invalid. Please check the URL, server status, and your license key.")}catch(e){alert("Failed to connect: ".concat(e.message))}finally{E(!1)}};(0,r.useEffect)(()=>{let e=async e=>{let s=e.detail;if(H(s),"ready"===s.stage&&s.url&&s.podId){var t,a;if(null===(a=window.pywebview)||void 0===a?void 0:null===(t=a.api)||void 0===t?void 0:t.set_active_runpod_instance){let e=P.trim();await window.pywebview.api.set_active_runpod_instance(e,s.podId)}let e={type:"runpod",url:s.url,status:"checking"};await o(e),await v()?T.m.setState({isServerSetupComplete:!0,serverSetupStep:"complete"}):H({...s,stage:"error",error:"RunPod server deployed but is not healthy or license is invalid."})}};return window.addEventListener("runpod-progress",e),()=>{window.removeEventListener("runpod-progress",e)}},[o,v,P]);let es=async()=>{P.trim()&&(H({stage:"validating",progress:0,message:"Initializing deployment..."}),await z(P.trim(),H))},et=async()=>{if(X&&s)try{await X.setupLocalServer();let e=async()=>{if((await X.getServerInfo()).isRunning){let e={type:"local",url:X.getServerUrl(),status:"checking"};await o(e),await v()&&(T.m.setState({isServerSetupComplete:!0,serverSetupStep:"complete"}),D(null))}};setTimeout(e,2e3)}catch(e){console.error("Local server setup failed:",e),D({stage:"error",progress:0,message:"Setup failed",error:e instanceof Error?e.message:"Unknown error"})}},ea=async()=>{if(X)try{await X.startServer(),setTimeout(async()=>{let e=await X.getServerInfo();if(q(e),e.isRunning){let e={type:"local",url:X.getServerUrl(),status:"checking"};await o(e),await v()}},1e3)}catch(e){console.error("Failed to start local server:",e)}},ei=async()=>{if(X)try{await X.stopServer(),setTimeout(async()=>{let e=await X.getServerInfo();q(e)},1e3)}catch(e){console.error("Failed to stop local server:",e)}},en=()=>{X&&(X.cancelSetup(),D(null)),O&&"error"!==O.stage&&H(null)},el=async()=>{if(X){$(!0);try{let e=await X.getServerInfo();q(e)}catch(e){console.error("Failed to refresh server info:",e)}finally{$(!1)}}},ec=async()=>{if(!k.trim()){U("Please enter your license key");return}C(!0),U("");try{await w(k.trim()),N("hardware-check")}catch(e){U("Failed to save license key. Please try again.")}finally{C(!1)}};return l?null:(0,a.jsx)(se,{children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(x,{className:"w-full max-w-3xl bg-zinc-900 border-zinc-800 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(u,{children:[(0,a.jsxs)(h,{className:"text-white flex items-center gap-2",children:[(0,a.jsx)(er.Z,{className:"h-5 w-5"}),"license-input"===n?"License Activation":"Server Setup"]}),(0,a.jsx)(p,{className:"text-zinc-400",children:"license-input"===n?"Enter your license key to begin setup.":"Configure your server for optimal performance."})]}),(0,a.jsxs)(g,{className:"space-y-6",children:["license-input"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"p-4 bg-blue-900/20 border border-blue-800 rounded-lg",children:(0,a.jsx)("p",{className:"text-zinc-300 text-sm",children:"Please enter your Gumroad license key to activate the software. You can find the key in your purchase confirmation email."})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b,{htmlFor:"license-key",className:"text-white",children:"License Key"}),(0,a.jsx)(f,{id:"license-key",value:k,onChange:e=>{S(e.target.value),U("")},placeholder:"XXXXXXXX-XXXXXXXX-XXXXXXXX-XXXXXXXX",className:"bg-zinc-800 border-zinc-700 text-white font-mono",autoFocus:!0}),Z&&(0,a.jsxs)(V,{variant:"destructive",children:[(0,a.jsx)(eG.Z,{className:"h-4 w-4"}),(0,a.jsx)(G,{children:Z})]})]}),(0,a.jsx)(m,{onClick:ec,disabled:!k.trim()||_,className:"w-full bg-blue-600 hover:bg-blue-700",children:_?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eq.Z,{className:"h-4 w-4 animate-spin mr-2"}),"Saving Key..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ee.Z,{className:"h-4 w-4 mr-2"}),"Save & Continue"]})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("a",{href:"https://gumroad.com/library",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline text-sm inline-flex items-center gap-1",children:[(0,a.jsx)(sr.Z,{className:"h-3 w-3"}),"Find my license key"]})})]}),K&&"hardware-check"!==n&&(0,a.jsxs)(V,{variant:"default",className:"border-blue-800",children:[(0,a.jsx)(eG.Z,{className:"h-4 w-4"}),(0,a.jsx)(G,{children:K})]}),"hardware-check"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eq.Z,{className:"h-4 w-4 animate-spin text-blue-400"}),(0,a.jsx)("span",{className:"text-white",children:"Analyzing hardware capabilities..."})]}),(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"This may take a few moments while we detect your system specifications."})]}),s&&"hardware-check"!==n&&"license-input"!==n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-white font-medium",children:"Hardware Detection Results"}),(0,a.jsxs)(j,{variant:s.hasGPU?"default":"secondary",children:[null===(e=s.recommendedSetup)||void 0===e?void 0:e.toUpperCase()," SETUP"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsxs)(ss,{children:[(0,a.jsx)(st,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)(er.Z,{className:"h-4 w-4 text-zinc-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"System"}),(0,a.jsxs)(j,{variant:"outline",children:[s.os," ",s.arch]})]})]})}),(0,a.jsx)(sa,{children:(0,a.jsx)("p",{children:"Operating system and architecture"})})]}),(0,a.jsxs)(ss,{children:[(0,a.jsx)(st,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)(eo.Z,{className:"h-4 w-4 text-zinc-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"GPUs Found"}),(0,a.jsx)(j,{variant:s.hasGPU?"default":"secondary",children:s.gpus.length})]})]})}),(0,a.jsx)(sa,{children:(0,a.jsx)("p",{children:"Number of detected graphics processing units"})})]}),(0,a.jsxs)(ss,{children:[(0,a.jsx)(st,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)(em.Z,{className:"h-4 w-4 text-zinc-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Total VRAM"}),(0,a.jsxs)(j,{variant:s.totalVRAM>=8?"default":"secondary",children:[s.totalVRAM,"GB"]})]})]})}),(0,a.jsx)(sa,{children:(0,a.jsx)("p",{children:"Total video memory across all GPUs. Minimum 8GB recommended for local setup."})})]})]}),s.gpus.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Detected GPUs:"}),s.gpus.map((e,s)=>(0,a.jsxs)(ss,{children:[(0,a.jsx)(st,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4 ".concat(e.isSupported?"text-green-400":"text-red-400")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:e.model}),(0,a.jsxs)("span",{className:"text-zinc-400 text-xs ml-2",children:["(",e.vendor,")"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(j,{variant:e.isSupported?"default":"secondary",children:[e.vramGB,"GB"]}),(0,a.jsx)(j,{variant:e.isSupported?"default":"destructive",children:e.isSupported?"Supported":"Insufficient"})]})]})}),(0,a.jsxs)(sa,{children:[(0,a.jsxs)("p",{children:["Performance Score: ",e.performanceScore,"/100"]}),(0,a.jsx)("p",{children:e.isSupported?"This GPU meets the minimum requirements for voice processing":"This GPU doesn't meet the minimum 8GB VRAM requirement"})]})]},s))]}),(0,a.jsxs)(V,{className:"border-".concat("local"===s.recommendedSetup?"green":"remote"===s.recommendedSetup?"yellow":"blue","-800"),children:[(0,a.jsx)(eG.Z,{className:"h-4 w-4"}),(0,a.jsxs)(G,{className:"text-zinc-300",children:[(0,a.jsx)("strong",{children:"Recommendation:"})," ","local"===s.recommendedSetup?"Your hardware is excellent for local voice processing. We recommend downloading the local server for optimal performance and privacy.":"remote"===s.recommendedSetup?"Your hardware can handle TTS but may benefit from a remote server for better performance. You can try local setup or use a custom server.":"Your hardware is insufficient for local voice processing. We recommend using RunPod cloud deployment for optimal performance with high-end GPUs."]})]})]}),"server-download"===n&&s&&(0,a.jsxs)("div",{className:"space-y-4",children:[W&&(0,a.jsxs)(x,{className:"bg-zinc-800 border-zinc-700",children:[(0,a.jsx)(u,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(h,{className:"text-sm text-white",children:"Local Server Status"}),(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:el,disabled:Y,className:"text-zinc-400 hover:text-white",children:Y?(0,a.jsx)(eq.Z,{className:"h-3 w-3 animate-spin"}):"Refresh"})]})}),(0,a.jsxs)(g,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Installation"}),(0,a.jsx)(j,{variant:W.isInstalled?"default":"secondary",children:W.isInstalled?"Installed":"Not Installed"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Status"}),(0,a.jsx)(j,{variant:W.isRunning?"default":"secondary",children:W.isRunning?"Running":"Stopped"})]}),W.version&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Version"}),(0,a.jsx)("span",{className:"text-white text-sm",children:W.version})]}),W.pid&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"PID"}),(0,a.jsx)("span",{className:"text-white text-sm",children:W.pid})]})]}),W.isInstalled&&(0,a.jsx)("div",{className:"flex gap-2",children:W.isRunning?(0,a.jsxs)(m,{variant:"destructive",size:"sm",onClick:ei,className:"flex items-center gap-1",children:[(0,a.jsx)(e$.Z,{className:"h-3 w-3"}),"Stop Server"]}):(0,a.jsxs)(m,{variant:"default",size:"sm",onClick:ea,className:"flex items-center gap-1 bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(eb.Z,{className:"h-3 w-3"}),"Start Server"]})})]})]}),L&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["error"===L.stage?(0,a.jsx)(eG.Z,{className:"h-4 w-4 text-red-400"}):"complete"===L.stage?(0,a.jsx)(ee.Z,{className:"h-4 w-4 text-green-400"}):(0,a.jsx)(eq.Z,{className:"h-4 w-4 animate-spin text-blue-400"}),(0,a.jsx)("span",{className:"text-white text-sm",children:L.message})]}),"error"!==L.stage&&"complete"!==L.stage&&(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:en,className:"text-zinc-400 hover:text-red-400",children:(0,a.jsx)(y.Z,{className:"h-4 w-4"})})]}),"error"!==L.stage&&"complete"!==L.stage&&(0,a.jsx)(I,{value:L.progress,className:"w-full"}),L.error&&(0,a.jsxs)(V,{className:"border-red-800",children:[(0,a.jsx)(eG.Z,{className:"h-4 w-4"}),(0,a.jsx)(G,{className:"text-red-400",children:L.error})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(m,{onClick:et,disabled:!!L&&"error"!==L.stage&&"complete"!==L.stage,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:L&&"error"!==L.stage&&"complete"!==L.stage?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eq.Z,{className:"h-4 w-4 animate-spin mr-2"}),"downloading"===L.stage?"Downloading...":"extracting"===L.stage?"Extracting...":"installing"===L.stage?"Installing...":"starting"===L.stage?"Starting...":"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e5.Z,{className:"h-4 w-4 mr-2"}),(null==W?void 0:W.isInstalled)?"Start Local Server":"Download & Setup Server"]})}),(0,a.jsx)(m,{variant:"outline",onClick:()=>N("url-input"),className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",disabled:!!L&&"error"!==L.stage&&"complete"!==L.stage,children:"Use Custom Server"})]})]}),"url-input"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[s&&(!s.hasGPU||s.totalVRAM<8)&&(0,a.jsxs)("div",{className:"p-4 bg-yellow-900/20 border border-yellow-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(eG.Z,{className:"h-4 w-4 text-yellow-400"}),(0,a.jsx)("span",{className:"text-yellow-400 font-medium",children:"Hardware Insufficient"})]}),(0,a.jsx)("p",{className:"text-zinc-300 text-sm",children:"Your system doesn't meet the minimum requirements (GPU with 8GB+ VRAM). Please provide a server URL or deploy to RunPod."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b,{htmlFor:"server-url",className:"text-white",children:"Server URL"}),(0,a.jsx)(f,{id:"server-url",value:R,onChange:e=>M(e.target.value),placeholder:"https://your-server.com:8000",className:"bg-zinc-800 border-zinc-700 text-white"}),(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Enter the URL of your TTS server (e.g., http://localhost:8000 or https://remote-server.com)"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(m,{onClick:J,disabled:!R.trim()||F,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:F?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eq.Z,{className:"h-4 w-4 animate-spin mr-2"}),"Checking Connection..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(er.Z,{className:"h-4 w-4 mr-2"}),"Connect to Server"]})}),(0,a.jsx)(m,{variant:"outline",onClick:()=>N("runpod-deploy"),className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:"Deploy to RunPod"}),(null==s?void 0:s.recommendedSetup)==="local"&&(0,a.jsx)(m,{variant:"outline",onClick:()=>N("server-download"),className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:"Back to Local Setup"})]})]}),"runpod-deploy"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-blue-900/20 border border-blue-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(sr.Z,{className:"h-4 w-4 text-blue-400"}),(0,a.jsx)("span",{className:"text-blue-400 font-medium",children:"RunPod Cloud Deployment"})]}),(0,a.jsx)("p",{className:"text-zinc-300 text-sm mb-3",children:"Deploy a high-performance TTS server with 24GB+ VRAM GPU (RTX 5090, RTX 4090, or similar) on RunPod. Costs approximately $0.50-2.00/hour."}),(0,a.jsxs)("a",{href:"https://www.runpod.io/console/user/settings/api-keys",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-400 hover:underline text-sm",children:[(0,a.jsx)(sr.Z,{className:"h-3 w-3"}),"Get your RunPod API key here"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b,{htmlFor:"runpod-key",className:"text-white",children:"RunPod API Key"}),(0,a.jsx)(f,{id:"runpod-key",type:"password",value:P,onChange:e=>A(e.target.value),placeholder:"Enter your RunPod API key",className:"bg-zinc-800 border-zinc-700 text-white"}),(0,a.jsx)("div",{className:"text-xs text-zinc-400",children:"Your API key is used to deploy and manage the server instance. It's stored securely and only used for deployment."})]}),O&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["error"===O.stage?(0,a.jsx)(eG.Z,{className:"h-4 w-4 text-red-400"}):"ready"===O.stage?(0,a.jsx)(ee.Z,{className:"h-4 w-4 text-green-400"}):(0,a.jsx)(eq.Z,{className:"h-4 w-4 animate-spin text-blue-400"}),(0,a.jsx)("span",{className:"text-white text-sm",children:O.message})]}),"error"!==O.stage&&"ready"!==O.stage&&(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:en,className:"text-zinc-400 hover:text-red-400",children:(0,a.jsx)(y.Z,{className:"h-4 w-4"})})]}),"error"!==O.stage&&"ready"!==O.stage&&(0,a.jsx)(I,{value:O.progress,className:"w-full"}),O.error&&(0,a.jsxs)(V,{className:"border-red-800",children:[(0,a.jsx)(eG.Z,{className:"h-4 w-4"}),(0,a.jsx)(G,{className:"text-red-400",children:O.error})]}),O.podId&&(0,a.jsxs)("div",{className:"p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Pod ID"}),(0,a.jsx)("div",{className:"text-white font-mono text-xs break-all",children:O.podId})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(m,{onClick:es,disabled:!P.trim()||!!O&&"error"!==O.stage&&"ready"!==O.stage,className:"flex-1 bg-green-600 hover:bg-green-700",children:O&&"error"!==O.stage&&"ready"!==O.stage?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eq.Z,{className:"h-4 w-4 animate-spin mr-2"}),O.stage.charAt(0).toUpperCase()+O.stage.slice(1),"..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4 mr-2"}),"Deploy to RunPod"]})}),(0,a.jsx)(m,{variant:"outline",onClick:()=>N("url-input"),className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",disabled:!!O&&"error"!==O.stage&&"ready"!==O.stage,children:"Use Custom Server"}),(null==s?void 0:s.recommendedSetup)==="local"&&(0,a.jsx)(m,{variant:"outline",onClick:()=>N("server-download"),className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",disabled:!!O&&"error"!==O.stage&&"ready"!==O.stage,children:"Try Local Setup"})]}),(null==O?void 0:O.stage)==="creating"&&(0,a.jsxs)(V,{className:"border-blue-800 bg-blue-900/20",children:[(0,a.jsx)(eG.Z,{className:"h-4 w-4 text-blue-400"}),(0,a.jsxs)(G,{className:"text-blue-300",children:[(0,a.jsx)("strong",{children:"Cost Estimate:"})," High-end GPU instances cost approximately $0.50-$2.00/hour. The app will automatically terminate the instance when you close it to save costs."]})]})]}),"complete"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-green-900/20 border border-green-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(ee.Z,{className:"h-5 w-5 text-green-400"}),(0,a.jsx)("span",{className:"text-green-400 font-medium text-lg",children:"Setup Complete!"})]}),(0,a.jsx)("p",{className:"text-zinc-300",children:"Your TTS server is now running and ready to generate speech. You can now start using voice cloning features."})]}),i&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Server Type"}),(0,a.jsx)("div",{className:"text-white font-medium",children:"local"===i.type?"Local Server":"runpod"===i.type?"RunPod Cloud":"Remote Server"})]}),(0,a.jsxs)("div",{className:"p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:"Status"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),(0,a.jsx)("span",{className:"text-green-400 font-medium",children:"Online"})]})]})]}),(0,a.jsxs)("div",{className:"p-3 bg-zinc-800 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-zinc-400 mb-1",children:"Server URL"}),(0,a.jsx)("div",{className:"text-white font-mono text-sm bg-zinc-900 p-2 rounded break-all",children:i.url})]}),"runpod"===i.type&&(0,a.jsxs)(V,{className:"border-yellow-800 bg-yellow-900/20",children:[(0,a.jsx)(eG.Z,{className:"h-4 w-4 text-yellow-400"}),(0,a.jsxs)(G,{className:"text-yellow-300",children:[(0,a.jsx)("strong",{children:"Remember:"})," Your RunPod instance is running and incurring costs. The app will automatically terminate it when you close the application."]})]})]}),(0,a.jsx)(m,{onClick:()=>{T.m.setState({isServerSetupComplete:!0})},className:"w-full bg-blue-600 hover:bg-blue-700",children:"Start Using Voice Cloning"})]}),i&&"complete"!==n&&(0,a.jsxs)("div",{className:"p-4 bg-zinc-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-zinc-300 font-medium",children:"Current Server"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(j,{variant:"online"===i.status?"default":"checking"===i.status?"secondary":"destructive",className:"online"===i.status?"bg-green-600 text-white":"checking"===i.status?"bg-yellow-600 text-white":"bg-red-600 text-white",children:["online"===i.status&&(0,a.jsx)(ee.Z,{className:"h-3 w-3 mr-1"}),"checking"===i.status&&(0,a.jsx)(eq.Z,{className:"h-3 w-3 mr-1 animate-spin"}),"offline"===i.status&&(0,a.jsx)(eG.Z,{className:"h-3 w-3 mr-1"}),i.status.toUpperCase()]}),(0,a.jsx)(j,{variant:"outline",className:"border-zinc-600 text-zinc-300",children:i.type.toUpperCase()})]})]}),(0,a.jsx)("div",{className:"text-sm text-zinc-400 font-mono bg-zinc-900 p-2 rounded break-all",children:i.url}),i.lastChecked&&(0,a.jsxs)("div",{className:"text-xs text-zinc-500 mt-1",children:["Last checked:"," ",(null==i?void 0:i.lastChecked)?new Date(i.lastChecked).toLocaleTimeString():"N/A"]})]}),((null==L?void 0:L.stage)==="error"||(null==O?void 0:O.stage)==="error")&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(V,{className:"border-red-800",children:[(0,a.jsx)(eG.Z,{className:"h-4 w-4"}),(0,a.jsxs)(G,{className:"text-red-300",children:[(0,a.jsx)("strong",{children:"Setup Failed:"})," ",(null==L?void 0:L.error)||(null==O?void 0:O.error)]})]}),(0,a.jsx)("div",{className:"text-sm text-zinc-400",children:(0,a.jsx)("strong",{children:"Troubleshooting Options:"})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(null==L?void 0:L.stage)==="error"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(m,{variant:"outline",onClick:et,className:"justify-start border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:[(0,a.jsx)(e5.Z,{className:"h-4 w-4 mr-2"}),"Retry Local Setup"]}),(0,a.jsxs)(m,{variant:"outline",onClick:()=>N("url-input"),className:"justify-start border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:[(0,a.jsx)(er.Z,{className:"h-4 w-4 mr-2"}),"Use Custom Server Instead"]})]}),(null==O?void 0:O.stage)==="error"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(m,{variant:"outline",onClick:()=>{H(null),A("")},className:"justify-start border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:[(0,a.jsx)(ex.Z,{className:"h-4 w-4 mr-2"}),"Retry RunPod Deployment"]}),(0,a.jsxs)(m,{variant:"outline",onClick:()=>N("url-input"),className:"justify-start border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:[(0,a.jsx)(er.Z,{className:"h-4 w-4 mr-2"}),"Use Custom Server Instead"]})]}),(0,a.jsxs)(m,{variant:"outline",onClick:()=>N("runpod-deploy"),className:"justify-start border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:[(0,a.jsx)(sr.Z,{className:"h-4 w-4 mr-2"}),"Try Different Cloud Option"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-zinc-800",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors ".concat("hardware-check"===n?"bg-blue-400":["server-download","server-start","url-input","runpod-deploy","complete"].includes(n)?"bg-green-400":"bg-zinc-600")}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors ".concat(["server-download","server-start"].includes(n)?"bg-blue-400":["url-input","runpod-deploy","complete"].includes(n)?"bg-green-400":"bg-zinc-600")}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors ".concat(["url-input","runpod-deploy"].includes(n)?"bg-blue-400":"complete"===n?"bg-green-400":"bg-zinc-600")}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors ".concat("complete"===n?"bg-green-400":"bg-zinc-600")})]}),(0,a.jsxs)("div",{className:"text-xs text-zinc-500",children:["hardware-check"===n&&"Analyzing Hardware",["server-download","server-start"].includes(n)&&"Setting up Local Server",["url-input","runpod-deploy"].includes(n)&&"Configuring Server","complete"===n&&"Setup Complete"]})]}),!1]})]})})})}function sn(){let{isLoading:e}=(0,T.m)();return e?(0,a.jsx)("div",{className:"flex h-screen bg-background grid-pattern items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(eq.Z,{className:"h-6 w-6 animate-spin"}),(0,a.jsx)("span",{className:"text-lg",children:"Loading DeepFak3r..."})]})}):(0,a.jsxs)("div",{className:"flex h-screen bg-background grid-pattern",children:[(0,a.jsx)(ew,{}),(0,a.jsx)("main",{className:"flex-1 p-6 overflow-y-auto",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"DeepFak3r Vibe Voice"}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["\uD83C\uDFA4 Transform"," ",(0,a.jsx)("span",{className:"font-semibold decoration-wavy text-primary animate-pulse",children:"any text"})," ","into"," ",(0,a.jsx)("span",{className:"font-semibold text-primary underline decoration-wavy animate-pulse",children:"any voice"}),"—with vibe voice! ✨"]})]}),(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsx)(e2,{}),(0,a.jsx)(e9,{})]})]})}),(0,a.jsx)(si,{})]})}}},function(e){e.O(0,[982,97,971,117,744],function(){return e(e.s=5573)}),_N_E=e.O()}]);